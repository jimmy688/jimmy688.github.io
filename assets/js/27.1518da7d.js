(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1197:function(t,a,s){t.exports=s.p+"assets/img/image-20200406153246246.46ac2e58.png"},1198:function(t,a,s){t.exports=s.p+"assets/img/image-20200406153340005.54ddf539.png"},1199:function(t,a,s){t.exports=s.p+"assets/img/image-20200406174753029.0c9a1210.png"},1200:function(t,a,s){t.exports=s.p+"assets/img/image-20200406201642219.50626a97.png"},1201:function(t,a,s){t.exports=s.p+"assets/img/image-20200406213106141.ea640565.png"},1202:function(t,a,s){t.exports=s.p+"assets/img/image-20200406214109395.628c0004.png"},1203:function(t,a,s){t.exports=s.p+"assets/img/image-20200408000032467.f772fbc8.png"},1204:function(t,a,s){t.exports=s.p+"assets/img/image-20200408000802963.caa6062e.png"},1205:function(t,a,s){t.exports=s.p+"assets/img/image-20200408003034574.c84d90ba.png"},1206:function(t,a,s){t.exports=s.p+"assets/img/image-20200410155923280.68a0517d.png"},1207:function(t,a,s){t.exports=s.p+"assets/img/image-20200410160425194.78f6c137.png"},1208:function(t,a,s){t.exports=s.p+"assets/img/image-20200410170101378.21f546be.png"},1209:function(t,a,s){t.exports=s.p+"assets/img/image-20200410170536143.96aadccb.png"},1210:function(t,a,s){t.exports=s.p+"assets/img/image-20200410170600805.6e819f20.png"},1211:function(t,a,s){t.exports=s.p+"assets/img/image-20200410170715921.5031cbca.png"},2010:function(t,a,s){"use strict";s.r(a);var n=s(17),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"oozie的介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oozie的介绍"}},[t._v("#")]),t._v(" oozie的介绍")]),t._v(" "),n("p",[t._v("Oozie是运行在hadoop平台上的一种工作流调度引擎，它可以用来调度与管理hadoop任务，如，MapReduce、Pig等。那么，对于OozieWorkflow中的一个个的action（可以理解成一个个MapReduce任务）Oozie是根据什么来对action的执行时间与执行顺序进行管理调度的呢？")]),t._v(" "),n("p",[t._v("答案就是我们在数据结构中常见的有向无环图(DAGDirect Acyclic Graph)的模式来进行管理调度的，我们可以利用HPDL语言（一种xml语言）来定义整个workflow，实现工作流的调度oozie的架构以及执行流程。")]),t._v(" "),n("h2",{attrs:{id:"oozie的架构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oozie的架构"}},[t._v("#")]),t._v(" oozie的架构")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1197),alt:"image-20200406153246246"}})]),t._v(" "),n("h2",{attrs:{id:"oozie的执行流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oozie的执行流程"}},[t._v("#")]),t._v(" oozie的执行流程")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1198),alt:"image-20200406153340005"}})]),t._v(" "),n("h2",{attrs:{id:"oozie的组件介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oozie的组件介绍"}},[t._v("#")]),t._v(" oozie的组件介绍")]),t._v(" "),n("ol",[n("li",[t._v("workFlow：工作流，定义工作流的任务的执行，主要由一个个的action组成，在xml中进行配置即可")]),t._v(" "),n("li",[t._v("Coordinator ：协作器，说白了就是oozie当中的定时任务调度的模块")]),t._v(" "),n("li",[t._v("Bundle ：很少用，是多个Coordinator的抽象，可以通过bundle将多个Coordinator进行组装集合起来，形成一个bundle。")])]),t._v(" "),n("h2",{attrs:{id:"oozie的安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oozie的安装"}},[t._v("#")]),t._v(" oozie的安装")]),t._v(" "),n("h4",{attrs:{id:"下载安装包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载安装包"}},[t._v("#")]),t._v(" 下载安装包")]),t._v(" "),n("p",[t._v("oozie安装包的下载网址：")]),t._v(" "),n("p",[t._v("http://archive.cloudera.com/cdh5/cdh/5/oozie-4.1.0-cdh5.14.2.tar.gz")]),t._v(" "),n("p",[t._v("这里我们选择node03服务器作为安装服务器，下载安装包然后上传到node03服务器的/kkb/soft路径下去等待备用")]),t._v(" "),n("h4",{attrs:{id:"第一步-修改core-site-xml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步-修改core-site-xml"}},[t._v("#")]),t._v(" 第一步：修改core-site.xml")]),t._v(" "),n("p",[t._v("修改core-site.xml，添加我们hadoop集群的代理用户,之前安装hue的时候已经修改过了。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /kkb/install/hadoop-2.6.2-cdh5.14.2/etc/hadoop\n\nvim core-site.xml\n")])])]),n("p",[t._v("添加以下内容：")]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("hadoop.proxyuser.hadoop.hosts"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("*"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("hadoop.proxyuser.hadoop.groups"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("*"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("注意：hadoop的历史任务的服务必须启动，即19888端口可以查看")]),t._v(" "),n("p",[t._v("重启hdfs与yarn集群以及启动jobhistory")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/hadoop-2.6.2-cdh5.14.2\nsbin/stop-dfs.sh\nsbin/start-dfs.sh\nsbin/stop-yarn.sh\nsbin/start-yarn.sh\nsbin/mr-jobhistory-daemon.sh start historyserver\n")])])]),n("h4",{attrs:{id:"第二步-上传oozie的安装包并解压"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步-上传oozie的安装包并解压"}},[t._v("#")]),t._v(" 第二步：上传oozie的安装包并解压")]),t._v(" "),n("p",[t._v("将我们的oozie的安装包上传到/kkb/soft")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/soft/\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf oozie-4.1.0-cdh5.14.2.tar.gz -C /kkb/install\n")])])]),n("h4",{attrs:{id:"第三步-解压hadooplibs到与oozie平行的目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-解压hadooplibs到与oozie平行的目录"}},[t._v("#")]),t._v(" 第三步：解压hadooplibs到与oozie平行的目录")]),t._v(" "),n("p",[t._v("将oozie-hadooplibs-4.1.0-cdh5.14.2.tar.gz这个压缩包，解压到oozie的家目录的平行目录下")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf /kkb/install/oozie-4.1.0-cdh5.14.2/oozie-hadooplibs-4.1.0-cdh5.14.2.tar.gz -C /kkb/install/\n")])])]),n("h4",{attrs:{id:"第四步-创建libext目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四步-创建libext目录"}},[t._v("#")]),t._v(" 第四步：创建libext目录")]),t._v(" "),n("p",[t._v("在oozie的安装路径下创建libext目录")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p libext\n")])])]),n("h4",{attrs:{id:"第五步-拷贝依赖包到libext"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第五步-拷贝依赖包到libext"}},[t._v("#")]),t._v(" 第五步：拷贝依赖包到libext")]),t._v(" "),n("p",[t._v("拷贝一些依赖包到libext目录下面去")]),t._v(" "),n("p",[t._v("拷贝所有的依赖包")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -ra hadooplibs/hadooplib-2.6.0-cdh5.14.2.oozie-4.1.0-cdh5.14.2/* libext/\n")])])]),n("p",[t._v("拷贝mysql的驱动包")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" /kkb/install/hive-1.1.0-cdh5.14.2/lib/mysql-connector-java-5.1.38.jar /kkb/install/oozie-4.1.0-cdh5.14.2/libext/\n")])])]),n("h4",{attrs:{id:"第六步-添加ext-2-2-zip压缩包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第六步-添加ext-2-2-zip压缩包"}},[t._v("#")]),t._v(" 第六步：添加ext-2.2.zip压缩包")]),t._v(" "),n("p",[t._v("拷贝ext-2.2.zip这个包到libext目录当中去")]),t._v(" "),n("p",[t._v("将我们准备好的软件ext-2.2.zip拷贝到我们的libext目录当中去")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" /kkb/soft/ext-2.2.zip /kkb/install/oozie-4.1.0-cdh5.14.2/libext/\n")])])]),n("h4",{attrs:{id:"第七步-修改oozie-site-xml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第七步-修改oozie-site-xml"}},[t._v("#")]),t._v(" 第七步：修改oozie-site.xml")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /kkb/install/oozie-4.1.0-cdh5.14.2/conf\n\nvim oozie-site.xml\n")])])]),n("p",[t._v("如果没有这些属性，直接添加进去即可，oozie默认使用的是UTC的时区，我们需要在我们oozie-site.xml当中记得要配置我们的时区为GMT+0800时区")]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("oozie.service.JPAService.jdbc.driver"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.mysql.jdbc.Driver"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("oozie.service.JPAService.jdbc.url"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("jdbc:mysql://node03:3306/oozie"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("oozie.service.JPAService.jdbc.username"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("root"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("oozie.service.JPAService.jdbc.password"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("123456"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("oozie.processing.timezone"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("GMT+0800"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("oozie.service.ProxyUserService.proxyuser.hue.hosts"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("*"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("oozie.service.ProxyUserService.proxyuser.hue.groups"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("*"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("oozie.service.coord.check.maximum.frequency"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("false"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("oozie.service.HadoopAccessorService.hadoop.configurations"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("*=/kkb/install/hadoop-2.6.0-cdh5.14.2/etc/hadoop"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h4",{attrs:{id:"第八步-创建mysql数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第八步-创建mysql数据库"}},[t._v("#")]),t._v(" 第八步：创建mysql数据库")]),t._v(" "),n("div",{staticClass:"language-sql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[t._v("mysql "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("uroot "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("database")]),t._v(" oozie"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"第九步-上传oozie依赖的jar包到hdfs上面去"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第九步-上传oozie依赖的jar包到hdfs上面去"}},[t._v("#")]),t._v(" 第九步：上传oozie依赖的jar包到hdfs上面去")]),t._v(" "),n("p",[t._v("上传oozie解压后的目录的yarn.tar.gz到hdfs目录去")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hadoop@node03 oozie-4.1.0-cdh5.14.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ bin/oozie-setup.sh sharelib create -fs hdfs://node01:8020 -locallib oozie-sharelib-4.1.0-cdh5.14.2-yarn.tar.gz\n")])])]),n("p",[t._v("实际上就是将这些jar包解压到了hdfs的/user/hadoop/share/lib/lib_20200406174131路径下：")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1199),alt:"image-20200406174753029"}})]),t._v(" "),n("h4",{attrs:{id:"第十步-创建oozie的数据库表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第十步-创建oozie的数据库表"}},[t._v("#")]),t._v(" 第十步：创建oozie的数据库表")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\n\nbin/oozie-setup.sh db create -run -sqlfile oozie.sql\n")])])]),n("h4",{attrs:{id:"第十一步-打包项目-生成war包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第十一步-打包项目-生成war包"}},[t._v("#")]),t._v(" 第十一步：打包项目，生成war包")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("zip")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("unzip")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\nbin/oozie-setup.sh prepare-war\n")])])]),n("h4",{attrs:{id:"第十二步-配置oozie的环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第十二步-配置oozie的环境变量"}},[t._v("#")]),t._v(" 第十二步：配置oozie的环境变量")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/profile\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("OOZIE_HOME")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/kkb/install/oozie-4.1.0-cdh5.14.2\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("OOZIE_URL")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://node03:11000/oozie\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(":"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$OOZIE_HOME")]),t._v("/bin\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n")])])]),n("h2",{attrs:{id:"启动与关闭oozie服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动与关闭oozie服务"}},[t._v("#")]),t._v(" 启动与关闭oozie服务")]),t._v(" "),n("p",[t._v("启动命令")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\nbin/oozied.sh start \n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hadoop@node03 oozie-4.1.0-cdh5.14.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ jps\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27682")]),t._v(" NodeManager\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("40547")]),t._v(" HRegionServer\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27574")]),t._v(" DataNode\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("46824")]),t._v(" Jps\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("40443")]),t._v(" QuorumPeerMain\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("46287")]),t._v(" Bootstrap  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#出现Bootstrap表示启动了oozie")]),t._v("\n")])])]),n("p",[t._v("关闭命令")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("bin/oozied.sh stop\n")])])]),n("h2",{attrs:{id:"浏览器页面访问oozie"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#浏览器页面访问oozie"}},[t._v("#")]),t._v(" 浏览器页面访问oozie")]),t._v(" "),n("p",[t._v("http://node03:11000/oozie/")]),t._v(" "),n("p",[t._v("解决oozie的页面的时区问题：")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1200),alt:"image-20200406201642219"}})]),t._v(" "),n("p",[t._v("我们页面访问的时候，发现我们的oozie使用的还是GMT的时区，与我们现在的时区相差一定的时间，所以我们需要调整一个js的获取时区的方法，将其改成我们现在的时区")]),t._v(" "),n("p",[t._v("修改js当中的时区问题")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie-server/webapps/oozie\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" oozie-console.js\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#搜索getTimeZone,将"GMT"改成"GMT+0800"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-name function"}},[t._v("getTimeZone")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Ext.state.Manager.setProvider"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("new Ext.state.CookieProvider"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("))")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" Ext.state.Manager.get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TimezoneId"')]),t._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GMT+0800"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"使用oozie调度shell脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用oozie调度shell脚本"}},[t._v("#")]),t._v(" 使用oozie调度shell脚本")]),t._v(" "),n("p",[t._v("oozie安装好了之后，我们需要测试oozie的功能是否完整好使，官方已经给我们带了各种测试案例，我们可以通过官方提供的各种案例来对我们的oozie进行调度。")]),t._v(" "),n("h4",{attrs:{id:"第一步-解压官方提供的调度案例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步-解压官方提供的调度案例"}},[t._v("#")]),t._v(" 第一步：解压官方提供的调度案例")]),t._v(" "),n("p",[t._v("oozie自带了各种案例，我们可以使用oozie自带的各种案例来作为模板，所以我们这里先把官方提供的各种案例给解压出来")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxf oozie-examples.tar.gz\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#解压后，会出现一个目录：/kkb/install/oozie-4.1.0-cdh5.14.2/examples")]),t._v("\n")])])]),n("h4",{attrs:{id:"第二步-创建我们的工作目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步-创建我们的工作目录"}},[t._v("#")]),t._v(" 第二步：创建我们的工作目录")]),t._v(" "),n("p",[t._v("在任意地方创建一个oozie的工作目录，以后我们的调度任务的配置文件全部放到oozie的工作目录当中去")]),t._v(" "),n("p",[t._v("我这里直接在oozie的安装目录下面创建工作目录")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" oozie_works\n")])])]),n("h4",{attrs:{id:"第三步-拷贝我们的任务模板到我们的工作目录当中去"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-拷贝我们的任务模板到我们的工作目录当中去"}},[t._v("#")]),t._v(" 第三步：拷贝我们的任务模板到我们的工作目录当中去")]),t._v(" "),n("p",[t._v("任务模板以及工作目录都准备好了之后，把我们的shell的任务模板拷贝到我们oozie的工作目录当中去")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -r examples/apps/shell/ oozie_works/\n")])])]),n("h4",{attrs:{id:"第四步-随意准备一个shell脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四步-随意准备一个shell脚本"}},[t._v("#")]),t._v(" 第四步：随意准备一个shell脚本")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /kkb/install/oozie-4.1.0-cdh5.14.2\nvim oozie_works/shell/hello.sh\n")])])]),n("p",[t._v("注意：这个脚本一定要是在我们oozie工作路径下的shell路径下的位置")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /kkb/install/hello_oozie.txt\n")])])]),n("h4",{attrs:{id:"第五步-修改模板下的配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第五步-修改模板下的配置文件"}},[t._v("#")]),t._v(" 第五步：修改模板下的配置文件")]),t._v(" "),n("p",[t._v("修改job.properties")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/shell\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" job.properties\n")])])]),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nameNode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("hdfs://node01:8020\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("jobTracker")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node01:8032\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("queueName")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("default\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("examplesRoot")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("oozie_works\noozie.wf.application.path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${nameNode}")]),t._v("/user/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${user.name}")]),t._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${examplesRoot}")]),t._v("/shell\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("EXEC")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("hello.sh \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#jobTracker是hadoop1.x的主节点，现在已经不用了")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#queueName表示任务提交的队列")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#examplesRoot表示oozie任务的配置文件的根路径")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#oozie.wf.application.path表示要将oozie任务上传到hdfs的哪个目录")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#EXEC=hello.sh表示要执行的脚本")]),t._v("\n")])])]),n("p",[t._v("修改workflow.xml")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("vim workflow.xml\n")])])]),n("p",[t._v("要注意的地方如下：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('1. <exec>${EXEC}</exec>  #这里要改\n2. \x3c!-- <argument>my_output=Hello Oozie</argument> --\x3e #这里要注释掉，因为将要执行的脚本不需要参数\n3. <file>/user/hadoop/oozie_works/shell/\\${EXEC}#${EXEC}</file>这个要自己添加，是脚本要上传到hdfs中的路径\n4. <ok to="end"/>  #这里可改可不改，to="end",表示如果执行成功，直接跳到<end>步骤\n')])])]),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("workflow-app")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uri:oozie:workflow:0.4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("shell-wf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("start")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("shell-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("action")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("shell-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("shell")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uri:oozie:shell-action:0.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${jobTracker}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${nameNode}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.job.queue.name"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${queueName}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("exec")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${EXEC}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("exec")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  #这里要改\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- <argument>my_output=Hello Oozie</argument> --\x3e")]),t._v(" #这里要注释掉，因为脚本没参数\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/user/hadoop/oozie_works/shell/${EXEC}#${EXEC}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("capture-output")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("shell")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ok")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("  #这里可改可不改\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("decision")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("check-output"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("switch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            ${wf:actionData('shell-node')['my_output'] eq 'Hello Oozie'}\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("case")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail-output"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("switch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("decision")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("kill")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Shell action failed, error message[${wf:errorMessage(wf:lastErrorNode())}]"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("kill")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("kill")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail-output"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Incorrect output, expected [Hello Oozie] but was [${wf:actionData('shell-node')['my_output']}]"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("kill")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("workflow-app")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h4",{attrs:{id:"第六步-上传我们的调度任务到hdfs上面去"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第六步-上传我们的调度任务到hdfs上面去"}},[t._v("#")]),t._v(" 第六步：上传我们的调度任务到hdfs上面去")]),t._v(" "),n("p",[t._v("注意：上传的hdfs目录为/user/root，因为我们hadoop启动的时候使用的是root用户，如果hadoop启动的是其他用户，那么就上传到")]),t._v(" "),n("p",[t._v("/user/其他用户")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\n\nhdfs dfs -put oozie_works/ /user/hadoop\n")])])]),n("h4",{attrs:{id:"第七步-执行调度任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第七步-执行调度任务"}},[t._v("#")]),t._v(" 第七步：执行调度任务")]),t._v(" "),n("p",[t._v("通过oozie的命令来执行我们的调度任务")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\n\nbin/oozie job -oozie http://node03:11000/oozie -config oozie_works/shell/job.properties -run\n")])])]),n("p",[t._v("从监控界面可以看到我们的任务正在执行了：")]),t._v(" "),n("img",{attrs:{src:"oozie.assets/image-20200406212303844.png",alt:"image-20200406212303844"}}),t._v(" "),n("p",[t._v("继续刷新，成功了：")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1201),alt:"image-20200406213106141"}})]),t._v(" "),n("p",[t._v("通过19888端口，查看hadoop的JobHistory，会发现，oozie实际上是启动了一个MR任务去执行我们的shell脚本。")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1202),alt:"image-20200406214109395"}})]),t._v(" "),n("img",{staticStyle:{zoom:"80%"},attrs:{src:"oozie.assets/image-20200406214728641.png",alt:"image-20200406214728641"}}),t._v(" "),n("h2",{attrs:{id:"使用oozie调度hive"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用oozie调度hive"}},[t._v("#")]),t._v(" 使用oozie调度hive")]),t._v(" "),n("h4",{attrs:{id:"第一步-拷贝hive的案例模板"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步-拷贝hive的案例模板"}},[t._v("#")]),t._v(" 第一步：拷贝hive的案例模板")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /kkb/install/oozie-4.1.0-cdh5.14.2\n\ncp -ra examples/apps/hive2/ oozie_works/\n")])])]),n("h4",{attrs:{id:"第二步-编辑hive模板"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步-编辑hive模板"}},[t._v("#")]),t._v(" 第二步：编辑hive模板")]),t._v(" "),n("p",[t._v("这里使用的是hiveserver2来进行提交任务，需要注意我们要将hiveserver2的服务给启动起来")]),t._v(" "),n("p",[t._v("修改job.properties")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/hive2\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" job.properties\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nameNode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("hdfs://node01:8020\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("jobTracker")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node01:8032\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("queueName")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("default\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("jdbcURL")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("jdbc:hive2://node03:10000/default\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("examplesRoot")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("oozie_works\noozie.use.system.libpath"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 配置我们文件上传到hdfs的保存路径")]),t._v("\noozie.wf.application.path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${nameNode}")]),t._v("/user/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${user.name}")]),t._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${examplesRoot}")]),t._v("/hive2\n")])])]),n("p",[t._v("修改workflow.xml()")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("vim workflow.xml\n")])])]),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8"?>')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("workflow-app")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uri:oozie:workflow:0.5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hive2-wf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("start")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hive2-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("action")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hive2-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("hive2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uri:oozie:hive2-action:0.1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${jobTracker}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${nameNode}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("prepare")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("delete")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("path")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${nameNode}/user/${wf:user()}/${examplesRoot}/output-data/hive2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("mkdir")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("path")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${nameNode}/user/${wf:user()}/${examplesRoot}/output-data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("prepare")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.job.queue.name"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${queueName}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("jdbc-url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${jdbcURL}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("jdbc-url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("script.q"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("param")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("INPUT=/user/${wf:user()}/${examplesRoot}/input-data/table"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("param")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("param")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("OUTPUT=/user/${wf:user()}/${examplesRoot}/output-data/hive2"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("param")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("hive2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ok")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("kill")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Hive2 (Beeline) action failed, error message[${wf:errorMessage(wf:lastErrorNode())}]"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("kill")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("workflow-app")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n")])])]),n("p",[t._v("编辑script.q文件")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/hive2\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" script.q\n")])])]),n("div",{staticClass:"language-sql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DROP")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("IF")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXISTS")]),t._v(" test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" EXTERNAL "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" test "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" STORED "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" TEXTFILE LOCATION "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'${INPUT}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" test "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" test "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" test "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"第三步-上传工作文件到hdfs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-上传工作文件到hdfs"}},[t._v("#")]),t._v(" 第三步：上传工作文件到hdfs")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works\nhdfs dfs -put hive2/ /user/hadoop/oozie_works/\n")])])]),n("h4",{attrs:{id:"第四步-执行oozie的调度"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四步-执行oozie的调度"}},[t._v("#")]),t._v(" 第四步：执行oozie的调度")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hadoop@node03 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ hive --service hiveserver2\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\n\nbin/oozie job -oozie http://node03:11000/oozie -config oozie_works/hive2/job.properties -run\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#-oozie http://node03:11000/oozie 表示oozie url")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#-config oozie_works/hive2/job.properties 表示oozie配置文件的路径")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#-run 表示 run a job")]),t._v("\n")])])]),n("h4",{attrs:{id:"第五步-查看调度结果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第五步-查看调度结果"}},[t._v("#")]),t._v(" 第五步：查看调度结果")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1203),alt:"image-20200408000032467"}})]),t._v(" "),n("p",[n("img",{attrs:{src:s(1204),alt:"image-20200408000802963"}})]),t._v(" "),n("h2",{attrs:{id:"bin-oozie命令的使用帮助"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bin-oozie命令的使用帮助"}},[t._v("#")]),t._v(" bin/oozie命令的使用帮助")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hadoop@node03 oozie-4.1.0-cdh5.14.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ bin/oozie "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v("\nusage: \n      the "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" variable "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'OOZIE_URL'")]),t._v(" is used as default value "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-oozie'")]),t._v(" option\n      the "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" variable "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'OOZIE_TIMEZONE'")]),t._v(" is used as default value "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-timezone'")]),t._v(" option\n      the "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" variable "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'OOZIE_AUTH'")]),t._v(" is used as default value "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-auth'")]),t._v(" option\n      custom headers "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" Oozie web services can be specified using "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-Dheader:NAME=VALUE'")]),t._v("\n\n      oozie "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" display usage "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" all commands or specified "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v("\n\n      oozie version "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" show client version\n\n      oozie job "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("OPTIONS"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" job operations\n                -action "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("          coordinator rerun/kill on action ids "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requires -rerun/-kill"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                                       coordinator log retrieval on action ids"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requires -log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -allruns               Get workflow "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("jobs")]),t._v(" corresponding to a coordinator action\n                                       including all the reruns\n                -auth "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" authentication "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("SIMPLE"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("KERBEROS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                -change "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("          change a coordinator or bundle job\n                -config "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("          job configuration "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.xml'")]),t._v(" or "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.properties'")]),t._v("\n                -configcontent "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("   job configuration\n                -coordinator "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("     bundle rerun on coordinator names "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requires -rerun"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -D "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("    set/override value "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" given property\n                -date "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("            coordinator/bundle rerun on action dates "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requires -rerun"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                                       coordinator log retrieval on action dates "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requires -log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -debug                 Use debug mode to see debugging statements on stdout\n                -definition "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("      job definition\n                -diff "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("            Show "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),t._v(" of the new coord definition and properties with the\n                                       existing one "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -doas "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("            doAs user, impersonates as the specified user\n                -dryrun                Dryrun a workflow "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("since "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.3")]),t._v(".2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" or coordinator "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("since "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                       job without actually executing it\n                -failed                runs the failed workflow actions of the coordinator actions\n                                       "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requires -rerun"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -filter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("          "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("comparator"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("comparator"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("*\n                                       "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("All Coordinator actions satisfying the filters will be\n                                       retreived"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".\n                                       key: status or nominaltime\n                                       comparator: "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(". "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" is used as OR and others\n                                       as AND\n                                       status: values are valid status like SUCCEEDED, KILLED etc.\n                                       Only "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" and "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" apply "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" status\n                                       nominaltime: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" of "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),t._v(" yyyy-MM-dd"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'T'")]),t._v("HH:mm"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Z'")]),t._v("\n                -ignore "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("          change status of a coordinator job or action to IGNORED\n                                       "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("-action required to ignore coord actions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -info "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("            info of a job\n                -interval "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("        polling interval "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" minutes "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default is "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(", requires -poll"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -kill "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),t._v(" a job "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("coordinator can mention -action or -date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -len "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("             number of actions "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default TOTAL ACTIONS, requires -info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -localtime             use "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("same as passing your "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" zone to -timezone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".\n                                       Overrides -timezone option\n                -log "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("             job log\n                -logfilter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("       job log search parameter. Can be specified as -logfilter\n                                       "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("opt1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("val1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("opt2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("val1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("opt3")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("val1. Supported options are recent,\n                                       start, end, loglevel, text, limit and debug\n                -nocleanup             "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" not clean up output-events of the coordiantor rerun\n                                       actions "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requires -rerun"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -offset "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("          job info offset of actions "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),t._v(", requires -info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -oozie "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("           Oozie URL\n                -order "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("           order to show coord actions "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default ascending order, "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'desc'")]),t._v("\n                                       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" descending order, requires -info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -poll "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("            poll Oozie "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("until")]),t._v(" a job reaches a terminal state or a "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),t._v("\n                                       occurs\n                -refresh               re-materialize the coordinator rerun actions "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("requires\n                                       -rerun"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -rerun "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("           rerun a job  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("coordinator requires -action or -date, bundle\n                                       requires -coordinator or -date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -resume "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("          resume a job\n                -run                   run a job\n                -start "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("           start a job\n                -submit                submit a job\n                -suspend "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("         "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("suspend")]),t._v(" a job\n                -timeout "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("         "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" minutes "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default is "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(", negative values indicate\n                                       no timeout, requires -poll"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                -timezone "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("        use "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" zone with the specified ID "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default GMT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".\n                                       See "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'oozie info -timezones'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" a list\n                -update "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("          Update coord definition and properties\n                -value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("           new endtime/concurrency/pausetime value "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" changing a\n                                       coordinator job\n                -verbose               verbose mode\n\n      oozie "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("jobs")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("OPTIONS"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("jobs")]),t._v(" status\n                 -auth "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" authentication "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("SIMPLE"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("KERBEROS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                 -bulk "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("       key-value pairs to filter bulk "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("jobs")]),t._v(" response. e.g.\n                                   "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("bundle")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("B"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("coordinators")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("C"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("actionstatus")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("startcreatedtime")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n                                   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("SC"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("endcreatedtime")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("EC"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("startscheduledtime")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("SS"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("endscheduledt\n                                   "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ime")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ES"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" bundle, coordinators and actionstatus can be multiple\n                                   comma separated valuesbundle and coordinators can be id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" or\n                                   appName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" of those jobs. Specifying bundle is mandatory, other\n                                   params are optional\n                 -doas "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("       doAs user, impersonates as the specified user\n                 -filter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                                   "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("text")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("*"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("user")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("U"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("N"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("group")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("G"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("status")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("S"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("frequency")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("F\n                                   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("unit")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("M"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("startcreatedtime")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("SC"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("endcreatedtime")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("EC"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                                   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sortBy")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("SB"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                                   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text filter: matches partially with name and user or complete\n                                   match with job IDvalid unit values are "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'months'")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'days'")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hours'")]),t._v("\n                                   or "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'minutes'")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" startcreatedtime, endcreatedtime: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" of "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),t._v("\n                                   yyyy-MM-dd"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'T'")]),t._v("HH:mm"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Z'")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" valid values "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" sortBy are "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'createdTime'")]),t._v("\n                                   or "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lastModifiedTime'")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                 -jobtype "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("    job "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Supported in Oozie-2.0 or later versions ONLY -\n                                   '")]),t._v("coordinator"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' or '")]),t._v("bundle"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' or '")]),t._v("wf"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'(default))\n                 -kill             bulk kill operation\n                 -len <arg>        number of jobs (default '")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("')\n                 -localtime        use local time (same as passing your time zone to -timezone).\n                                   Overrides -timezone option\n                 -offset <arg>     jobs offset (default '")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("')\n                 -oozie <arg>      Oozie URL\n                 -resume           bulk resume operation\n                 -suspend          bulk suspend operation\n                 -timezone <arg>   use time zone with the specified ID (default GMT).\n                                   See '")]),t._v("oozie info -timezones"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' for a list\n                 -verbose          verbose mode\n\n      oozie admin <OPTIONS> : admin operations\n                  -auth <arg>         select authentication type [SIMPLE|KERBEROS]\n                  -configuration      show Oozie system configuration\n                  -doas <arg>         doAs user, impersonates as the specified user\n                  -instrumentation    show Oozie system instrumentation\n                  -javasysprops       show Oozie Java system properties\n                  -metrics            show Oozie system metrics\n                  -oozie <arg>        Oozie URL\n                  -osenv              show Oozie system OS environment\n                  -queuedump          show Oozie server queue elements\n                  -servers            list available Oozie servers (more than one only if HA is\n                                      enabled)\n                  -shareliblist       List available sharelib that can be specified in a workflow\n                                      action\n                  -sharelibupdate     Update server to use a newer version of sharelib\n                  -status             show the current system status\n                  -systemmode <arg>   Supported in Oozie-2.0 or later versions ONLY. Change oozie\n                                      system mode [NORMAL|NOWEBSERVICE|SAFEMODE]\n                  -version            show Oozie server build version\n\n      oozie validate <OPTIONS> <ARGS> : validate a workflow, coordinator, bundle XML file\n                     -auth <arg>    select authentication type [SIMPLE|KERBEROS]\n                     -oozie <arg>   Oozie URL\n\n      oozie sla <OPTIONS> : sla operations (Deprecated with Oozie 4.0)\n                -auth <arg>     select authentication type [SIMPLE|KERBEROS]\n                -filter <arg>   filter of SLA events. e.g., jobid=<J>\\;appname=<A>\n                -len <arg>      number of results (default '")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("', max '")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("')\n                -offset <arg>   start offset (default '")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("')\n                -oozie <arg>    Oozie URL\n\n      oozie pig <OPTIONS> -X <ARGS> : submit a pig job, everything after '")]),t._v("-X"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' are pass-through parameters to pig, any '")]),t._v("-D"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' arguments after '")]),t._v("-X"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' are put in <configuration>\n                -auth <arg>           select authentication type [SIMPLE|KERBEROS]\n                -config <arg>         job configuration file '")]),t._v(".properties"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\n                -D <property=value>   set/override value for given property\n                -doas <arg>           doAs user, impersonates as the specified user\n                -file <arg>           pig script\n                -oozie <arg>          Oozie URL\n                -P <property=value>   set parameters for script\n\n      oozie hive <OPTIONS> -X <ARGS> : submit a hive job, everything after '")]),t._v("-X"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' are pass-through parameters to hive, any '")]),t._v("-D"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' arguments after '")]),t._v("-X"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' are put in <configuration>\n                 -auth <arg>           select authentication type [SIMPLE|KERBEROS]\n                 -config <arg>         job configuration file '")]),t._v(".properties"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\n                 -D <property=value>   set/override value for given property\n                 -doas <arg>           doAs user, impersonates as the specified user\n                 -file <arg>           hive script\n                 -oozie <arg>          Oozie URL\n                 -P <property=value>   set parameters for script\n\n      oozie sqoop <OPTIONS> -X <ARGS> : submit a sqoop job, everything after '")]),t._v("-X"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' are pass-through parameters to sqoop, any '")]),t._v("-D"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' arguments after '")]),t._v("-X"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' are put in <configuration>\n                  -auth <arg>           select authentication type [SIMPLE|KERBEROS]\n                  -command <command>    sqoop command\n                  -config <arg>         job configuration file '")]),t._v(".properties"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\n                  -D <property=value>   set/override value for given property\n                  -doas <arg>           doAs user, impersonates as the specified user\n                  -oozie <arg>          Oozie URL\n\n      oozie info <OPTIONS> : get more detailed info about specific topics\n                 -timezones   display a list of available time zones\n\n      oozie mapreduce <OPTIONS> : submit a mapreduce job\n                      -auth <arg>           select authentication type [SIMPLE|KERBEROS]\n                      -config <arg>         job configuration file '")]),t._v(".properties'\n                      -D "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("   set/override value "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" given property\n                      -doas "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("           doAs user, impersonates as the specified user\n                      -oozie "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("          Oozie URL\n")])])]),n("h2",{attrs:{id:"使用oozie调度mr任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用oozie调度mr任务"}},[t._v("#")]),t._v(" 使用oozie调度MR任务")]),t._v(" "),n("h4",{attrs:{id:"第一步-准备mr执行的数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步-准备mr执行的数据"}},[t._v("#")]),t._v(" 第一步：准备MR执行的数据")]),t._v(" "),n("p",[t._v("选用hadoop工程自带的MR程序来运行wordcount的示例")]),t._v(" "),n("p",[t._v("准备以下数据上传到HDFS的/oozie/input路径下去")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("hdfs dfs -mkdir -p /oozie/input\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /tmp/\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" wordcount.txt\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("hello  world  hadoop\nspark  hive  hadoop\n")])])]),n("p",[t._v("将我们的数据上传到hdfs对应目录")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("hdfs dfs -put /tmp/wordcount.txt /oozie/input\n")])])]),n("h4",{attrs:{id:"第二步-执行官方测试案例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步-执行官方测试案例"}},[t._v("#")]),t._v(" 第二步：执行官方测试案例")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" jar /kkb/install/hadoop-2.6.0-cdh5.14.2/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.6.0-cdh5.14.2.jar wordcount /oozie/input/ /oozie/output\n")])])]),n("h4",{attrs:{id:"第三步-准备我们调度的资源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-准备我们调度的资源"}},[t._v("#")]),t._v(" 第三步：准备我们调度的资源")]),t._v(" "),n("p",[t._v("将我们需要调度的资源都准备好放到一个文件夹下面去，包括我们的jar包，我们的job.properties，以及我们的workflow.xml。")]),t._v(" "),n("p",[t._v("拷贝MR的任务模板")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -ra examples/apps/map-reduce/ oozie_works/\n")])])]),n("p",[t._v("删掉MR任务模板lib目录下自带的jar包")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/map-reduce/lib\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf oozie-examples-4.1.0-cdh5.14.2.jar\n")])])]),n("h4",{attrs:{id:"第三步-拷贝我们自己的jar包到对应目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-拷贝我们自己的jar包到对应目录"}},[t._v("#")]),t._v(" 第三步：拷贝我们自己的jar包到对应目录")]),t._v(" "),n("p",[t._v("从上一步的删除当中，我们可以看到我们需要调度的jar包存放在了")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("/kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/map-reduce/lib\n")])])]),n("p",[t._v("这个目录下，所以我们把我们需要调度的jar包也放到这个路径下即可")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" /kkb/install/hadoop-2.6.0-cdh5.14.2/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.6.0-cdh5.14.2.jar /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/map-reduce/lib/\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hadoop@node03 lib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\nhadoop-mapreduce-examples-2.6.0-cdh5.14.2.jar\n")])])]),n("h4",{attrs:{id:"第四步-修改配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四步-修改配置文件"}},[t._v("#")]),t._v(" 第四步：修改配置文件")]),t._v(" "),n("p",[t._v("修改job.properties")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/map-reduce\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" job.properties\n")])])]),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nameNode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("hdfs://node01:8020\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("jobTracker")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node01:8032\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("queueName")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("default\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("examplesRoot")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("oozie_works\noozie.wf.application.path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${nameNode}")]),t._v("/user/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${user.name}")]),t._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${examplesRoot}")]),t._v("/map-reduce/workflow.xml\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("outputDir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/oozie/output\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("inputdir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/oozie/input\n")])])]),n("p",[t._v("修改workflow.xml")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/map-reduce\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" workflow.xml\n")])])]),n("p",[t._v("要修改的地方如下：")]),t._v(" "),n("ol",[n("li",[t._v("26行："),n("delete",{attrs:{path:"${nameNode}/${outputDir}"}})],1),t._v(" "),n("li",[t._v("33行-56行的内容全部注释掉，这个是hadoop1.x的内容")]),t._v(" "),n("li",[t._v("注释掉后，将57行-105行的内容添加上来")])]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8"?>')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!--\n  Licensed to the Apache Software Foundation (ASF) under one\n  or more contributor license agreements.  See the NOTICE file\n  distributed with this work for additional information\n  regarding copyright ownership.  The ASF licenses this file\n  to you under the Apache License, Version 2.0 (the\n  "License"); you may not use this file except in compliance\n  with the License.  You may obtain a copy of the License at\n  \n       http://www.apache.org/licenses/LICENSE-2.0\n  \n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an "AS IS" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n--\x3e')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("workflow-app")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uri:oozie:workflow:0.5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("map-reduce-wf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("start")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mr-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("action")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mr-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("map-reduce")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${jobTracker}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${nameNode}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("prepare")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("delete")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("path")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${nameNode}/${outputDir}"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("prepare")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.job.queue.name"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${queueName}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--  \n                <property>\n                    <name>mapred.mapper.class</name>\n                    <value>org.apache.oozie.example.SampleMapper</value>\n                </property>\n                <property>\n                    <name>mapred.reducer.class</name>\n                    <value>org.apache.oozie.example.SampleReducer</value>\n                </property>\n                <property>\n                    <name>mapred.map.tasks</name>\n                    <value>1</value>\n                </property>\n                <property>\n                    <name>mapred.input.dir</name>\n                    <value>/user/${wf:user()}/${examplesRoot}/input-data/text</value>\n                </property>\n                <property>\n                    <name>mapred.output.dir</name>\n                    <value>/user/${wf:user()}/${examplesRoot}/output-data/${outputDir}</value>\n                </property>\n\t\t\t\t--\x3e")]),t._v("\n\t\t\t\t\n\t\t\t\t   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 开启使用新的API来进行配置 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.mapper.new-api"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("true"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.reducer.new-api"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("true"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 指定MR的输出key的类型 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapreduce.job.output.key.class"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.hadoop.io.Text"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 指定MR的输出的value的类型--\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapreduce.job.output.value.class"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.hadoop.io.IntWritable"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 指定输入路径 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.input.dir"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${nameNode}/${inputdir}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 指定输出路径 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.output.dir"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${nameNode}/${outputDir}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 指定执行的map类 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapreduce.job.map.class"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.hadoop.examples.WordCount$TokenizerMapper"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 指定执行的reduce类 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapreduce.job.reduce.class"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.hadoop.examples.WordCount$IntSumReducer"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--  配置map task的个数 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.map.tasks"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("map-reduce")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ok")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("kill")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Map/Reduce failed, error message[${wf:errorMessage(wf:lastErrorNode())}]"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("kill")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("workflow-app")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h4",{attrs:{id:"第五步-上传调度任务到hdfs对应目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第五步-上传调度任务到hdfs对应目录"}},[t._v("#")]),t._v(" 第五步：上传调度任务到hdfs对应目录")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works\nhdfs dfs -put map-reduce/ /user/hadoop/oozie_works/\n")])])]),n("h4",{attrs:{id:"第六步-执行调度任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第六步-执行调度任务"}},[t._v("#")]),t._v(" 第六步：执行调度任务")]),t._v(" "),n("p",[t._v("执行我们的调度任务，然后通过oozie的11000端口进行查看任务结果")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\nbin/oozie job -oozie http://node03:11000/oozie -config oozie_works/map-reduce/job.properties -run\n")])])]),n("h4",{attrs:{id:"第七步-查看效果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第七步-查看效果"}},[t._v("#")]),t._v(" 第七步：查看效果")]),t._v(" "),n("p",[t._v("登录http://node03:11000/oozie/")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1205),alt:"image-20200408003034574"}})]),t._v(" "),n("h2",{attrs:{id:"oozie的任务串联"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oozie的任务串联"}},[t._v("#")]),t._v(" oozie的任务串联")]),t._v(" "),n("p",[t._v("在实际工作当中，肯定会存在多个任务需要执行，并且存在上一个任务的输出结果作为下一个任务的输入数据这样的情况，所以我们需要在workflow.xml配置文件当中配置多个action，实现多个任务之间的相互依赖关系")]),t._v(" "),n("p",[t._v("需求：首先执行一个shell脚本，执行完了之后再执行一个MR的程序，最后再执行一个hive的程序")]),t._v(" "),n("h4",{attrs:{id:"第一步-准备我们的工作目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步-准备我们的工作目录"}},[t._v("#")]),t._v(" 第一步：准备我们的工作目录")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p sereval-actions\n")])])]),n("h4",{attrs:{id:"第二步-准备我们的调度文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步-准备我们的调度文件"}},[t._v("#")]),t._v(" 第二步：准备我们的调度文件")]),t._v(" "),n("p",[t._v("将我们之前的hive，shell，以及MR的执行，进行串联成到一个workflow当中去，准备我们的资源文件")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" hive2/script.q sereval-actions/\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" shell/hello.sh sereval-actions/\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -ra map-reduce/lib sereval-actions/\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hadoop@node03 sereval-actions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),t._v("\n/kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/sereval-actions\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hadoop@node03 sereval-actions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\nhello.sh  lib  script.q\n")])])]),n("h4",{attrs:{id:"第三步-开发调度的配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-开发调度的配置文件"}},[t._v("#")]),t._v(" 第三步：开发调度的配置文件")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/sereval-actions\n")])])]),n("p",[t._v("创建配置文件workflow.xml并编辑")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("vim workflow.xml\n")])])]),n("p",[t._v("单个任务时，配置文件内容大致如下：")]),t._v(" "),n("p",[n("code",[t._v("<action>...</action>")])]),t._v(" "),n("p",[t._v("多个任务时，配置文件内容就是多个action的集成，大致如下：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('> - <start to="shell-node"/>\n> - <action name="shell-node">\n> - - <ok to="mr-node"/>\n>   - <error to="mr-node"/>\n> - </action>\n> - <action name="mr-node">\n> - - <ok to="hive2-node"/>\n>   - <error to="fail"/>\n> - </action>\n> - <action name="hive2-node">\n> - - <ok to="end"/>\n>   - <error to="fail"/>\n> - </action>\n')])])]),n("p",[t._v("将下面代码块所有内容添加到配置文件里：")]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("workflow-app")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uri:oozie:workflow:0.4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("shell-wf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("start")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("shell-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("action")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("shell-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("shell")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uri:oozie:shell-action:0.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${jobTracker}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${nameNode}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.job.queue.name"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${queueName}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("exec")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${EXEC}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("exec")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- <argument>my_output=Hello Oozie</argument> --\x3e")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/user/hadoop/oozie_works/sereval-actions/${EXEC}#${EXEC}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("capture-output")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("shell")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ok")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mr-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mr-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("action")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mr-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("map-reduce")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${jobTracker}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${nameNode}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("prepare")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("delete")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("path")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${nameNode}/${outputDir}"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("prepare")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.job.queue.name"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${queueName}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--  \n                <property>\n                    <name>mapred.mapper.class</name>\n                    <value>org.apache.oozie.example.SampleMapper</value>\n                </property>\n                <property>\n                    <name>mapred.reducer.class</name>\n                    <value>org.apache.oozie.example.SampleReducer</value>\n                </property>\n                <property>\n                    <name>mapred.map.tasks</name>\n                    <value>1</value>\n                </property>\n                <property>\n                    <name>mapred.input.dir</name>\n                    <value>/user/${wf:user()}/${examplesRoot}/input-data/text</value>\n                </property>\n                <property>\n                    <name>mapred.output.dir</name>\n                    <value>/user/${wf:user()}/${examplesRoot}/output-data/${outputDir}</value>\n                </property>\n\t\t\t\t--\x3e")]),t._v("\n\t\t\t\t\n\t\t\t\t   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 开启使用新的API来进行配置 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.mapper.new-api"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("true"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.reducer.new-api"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("true"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 指定MR的输出key的类型 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapreduce.job.output.key.class"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.hadoop.io.Text"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 指定MR的输出的value的类型--\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapreduce.job.output.value.class"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.hadoop.io.IntWritable"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 指定输入路径 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.input.dir"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${nameNode}/${inputdir}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 指定输出路径 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.output.dir"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${nameNode}/${outputDir}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 指定执行的map类 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapreduce.job.map.class"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.hadoop.examples.WordCount$TokenizerMapper"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 指定执行的reduce类 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapreduce.job.reduce.class"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.hadoop.examples.WordCount$IntSumReducer"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--  配置map task的个数 --\x3e")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.map.tasks"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("map-reduce")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ok")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hive2-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("action")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hive2-node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("hive2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uri:oozie:hive2-action:0.1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${jobTracker}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${nameNode}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("prepare")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("delete")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("path")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${nameNode}/user/${wf:user()}/${examplesRoot}/output-data/hive2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("mkdir")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("path")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${nameNode}/user/${wf:user()}/${examplesRoot}/output-data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("prepare")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.job.queue.name"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${queueName}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("jdbc-url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${jdbcURL}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("jdbc-url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("script.q"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("param")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("INPUT=/user/${wf:user()}/${examplesRoot}/input-data/table"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("param")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("param")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("OUTPUT=/user/${wf:user()}/${examplesRoot}/output-data/hive2"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("param")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("hive2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ok")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("decision")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("check-output"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("switch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            ${wf:actionData('shell-node')['my_output'] eq 'Hello Oozie'}\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("case")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail-output"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("switch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("decision")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("kill")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Shell action failed, error message[${wf:errorMessage(wf:lastErrorNode())}]"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("kill")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("kill")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fail-output"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Incorrect output, expected [Hello Oozie] but was [${wf:actionData('shell-node')['my_output']}]"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("kill")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("workflow-app")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("开发我们的job.properties配置文件")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/sereval-actions\nvim job.properties\n")])])]),n("p",[t._v("内容就是多个任务的参数的综合：")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nameNode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("hdfs://node01:8020\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("jobTracker")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node01:8032\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("queueName")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("default\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("examplesRoot")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("oozie_works\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("EXEC")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("hello.sh\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("outputDir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/oozie/output\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("inputdir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/oozie/input\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("jdbcURL")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("jdbc:hive2://node03:10000/default\noozie.use.system.libpath"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 配置我们文件上传到hdfs的保存路径")]),t._v("\noozie.wf.application.path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${nameNode}")]),t._v("/user/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${user.name}")]),t._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${examplesRoot}")]),t._v("/sereval-actions/workflow.xml \n")])])]),n("h4",{attrs:{id:"第四步-上传我们的资源文件夹到hdfs对应路径"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四步-上传我们的资源文件夹到hdfs对应路径"}},[t._v("#")]),t._v(" 第四步：上传我们的资源文件夹到hdfs对应路径")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/\nhdfs dfs -put sereval-actions/ /user/hadoop/oozie_works/\n")])])]),n("h4",{attrs:{id:"第五步-执行调度任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第五步-执行调度任务"}},[t._v("#")]),t._v(" 第五步：执行调度任务")]),t._v(" "),n("p",[t._v("要保证hiveserver2服务已经开启。")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hadoop@node03 oozie-4.1.0-cdh5.14.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ bin/oozie job -oozie http://node03:11000/oozie -config oozie_works/sereval-actions/job.properties -run\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#之前出现了一次错误，不知道为什么，下面一行内容建议使用tab补全功能输入")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#oozie_works/sereval-actions/job.properties")]),t._v("\n")])])]),n("h4",{attrs:{id:"第六步-查看效果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第六步-查看效果"}},[t._v("#")]),t._v(" 第六步：查看效果")]),t._v(" "),n("p",[t._v("http://node03:11000/oozie/")]),t._v(" "),n("img",{staticStyle:{zoom:"80%"},attrs:{src:"http://node03:11000/oozie/v2/job/0000003-200406202248813-oozie-hado-W?show=graph",alt:"Runtime error : Can't display the graph. Number of actions are more than display limit 25"}}),t._v(" "),n("h2",{attrs:{id:"oozie定时任务执行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oozie定时任务执行"}},[t._v("#")]),t._v(" oozie定时任务执行")]),t._v(" "),n("p",[t._v("在oozie当中，主要是通过Coordinator 来实现任务的定时调度，与我们的workflow类似的，Coordinator 这个模块也是主要通过xml来进行配置即可，接下来我们就来看看如何配置Coordinator 来实现任务的定时调度")]),t._v(" "),n("p",[t._v("Coordinator 的调度主要可以有两种实现方式：")]),t._v(" "),n("p",[t._v("第一种：基于时间的定时任务调度, oozie基于时间的调度主要需要指定三个参数，第一个起始时间，第二个结束时间，第三个调度频率")]),t._v(" "),n("p",[t._v("第二种：基于数据的任务调度，只有在有了数据才会去出发执行，只要在有了数据才会触发调度任务。")]),t._v(" "),n("h5",{attrs:{id:"第一步-拷贝定时任务的调度模板"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步-拷贝定时任务的调度模板"}},[t._v("#")]),t._v(" 第一步：拷贝定时任务的调度模板")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /kkb/install/oozie-4.1.0-cdh5.14.2\ncp -r examples/apps/cron oozie_works/cron-job\n")])])]),n("h5",{attrs:{id:"第二步-拷贝我们的hello-sh脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步-拷贝我们的hello-sh脚本"}},[t._v("#")]),t._v(" 第二步：拷贝我们的hello.sh脚本")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works\ncp shell/hello.sh cron-job/\n")])])]),n("h5",{attrs:{id:"第三步-修改配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-修改配置文件"}},[t._v("#")]),t._v(" 第三步：修改配置文件")]),t._v(" "),n("h6",{attrs:{id:"修改job-properties"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改job-properties"}},[t._v("#")]),t._v(" 修改job.properties")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works/cron-job\nvim job.properties\n")])])]),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nameNode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("hdfs://node01:8020\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("jobTracker")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node01:8032\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("queueName")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("default\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("examplesRoot")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("oozie_works\noozie.coord.application.path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${nameNode}")]),t._v("/user/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${user.name}")]),t._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${examplesRoot}")]),t._v("/cron-job/coordinator.xml\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("start")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-08-22T19:20+0800\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-08-22T19:20+0800\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("EXEC")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("hello.sh\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("workflowAppUri")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${nameNode}")]),t._v("/user/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${user.name}")]),t._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${examplesRoot}")]),t._v("/cron-job/workflow.xml\n")])])]),n("h6",{attrs:{id:"修改coordinator-xml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改coordinator-xml"}},[t._v("#")]),t._v(" 修改coordinator.xml")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("vim coordinator.xml\n")])])]),n("p",[t._v("要修改的地方如下：")]),t._v(" "),n("ul",[n("li",[t._v('name="cron-job"')]),t._v(" "),n("li",[t._v('frequency="${coord:minutes(1)}"')]),t._v(" "),n("li",[t._v('timezone="GMT+0800"')]),t._v(" "),n("li",[t._v('xmlns="uri:oozie:coordinator:0.4"')])]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!--\n\toozie的frequency 可以支持很多表达式，其中可以通过定时每分，或者每小时，或者每天，或者每月进行执行，也支持可以通过与linux的crontab表达式类似的写法来进行定时任务的执行\n\t例如frequency 也可以写成以下方式\n\tfrequency="10 9 * * *"  每天上午的09:10:00开始执行任务\n\tfrequency="0 1 * * *"  每天凌晨的01:00开始执行任务\n --\x3e')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!-- frequency="${coord:minutes(1)}" 表示每隔一分钟执行一次--\x3e')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("coordinator-app")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("cron-job"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("frequency")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${coord:minutes(1)}"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("start")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${start}"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${end}"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("timezone")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("GMT+0800"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                 "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uri:oozie:coordinator:0.4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("workflow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("app-path")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${workflowAppUri}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("app-path")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("jobTracker"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${jobTracker}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("nameNode"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${nameNode}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("queueName"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${queueName}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("workflow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("coordinator-app")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n")])])]),n("h6",{attrs:{id:"修改workflow-xml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改workflow-xml"}},[t._v("#")]),t._v(" 修改workflow.xml")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("vim workflow.xml\n")])])]),n("p",[t._v("要修改的地方如下：")]),t._v(" "),n("ul",[n("li",[t._v("添加"),n("code",[t._v("<shell>..</shell>")]),t._v("之间的所有内容")])]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("workflow-app")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uri:oozie:workflow:0.5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("one-op-wf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("start")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("action1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("action")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("action1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("shell")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uri:oozie:shell-action:0.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${jobTracker}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("job-tracker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${nameNode}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name-node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapred.job.queue.name"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${queueName}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("exec")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${EXEC}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("exec")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- <argument>my_output=Hello Oozie</argument> --\x3e")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/user/hadoop/oozie_works/cron-job/${EXEC}#${EXEC}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("capture-output")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("shell")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ok")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("error")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("workflow-app")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h5",{attrs:{id:"第四步-上传到hdfs对应路径"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四步-上传到hdfs对应路径"}},[t._v("#")]),t._v(" 第四步：上传到hdfs对应路径")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2/oozie_works\nhdfs dfs -put cron-job/ /user/hadoop/oozie_works/\n")])])]),n("h5",{attrs:{id:"第五步-运行定时任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第五步-运行定时任务"}},[t._v("#")]),t._v(" 第五步：运行定时任务")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\n\nbin/oozie job -oozie http://node03:11000/oozie -config oozie_works/cron-job/job.properties -run\n")])])]),n("h5",{attrs:{id:"第六步-查看效果-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第六步-查看效果-2"}},[t._v("#")]),t._v(" 第六步：查看效果")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1206),alt:"image-20200410155923280"}})]),t._v(" "),n("h2",{attrs:{id:"oozie任务的查看及杀死"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oozie任务的查看及杀死"}},[t._v("#")]),t._v(" oozie任务的查看及杀死")]),t._v(" "),n("h5",{attrs:{id:"查看所有普通任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看所有普通任务"}},[t._v("#")]),t._v(" 查看所有普通任务")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hadoop@node03 oozie-4.1.0-cdh5.14.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ oozie "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("jobs")]),t._v("\nJob ID                                   App Name     Status    User      Group     Started                 Ended                   \n--------------------------------------------------------------------------------------\n0000003-200406202248813-oozie-hado-W     shell-wf     SUCCEEDED hadoop    -         "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-04-07 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":19 GMT    "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-04-07 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":21 GMT    \n--------------------------------------------------------------------------------------\n0000002-200406202248813-oozie-hado-W     map-reduce-wfSUCCEEDED hadoop    -         "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-04-07 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":29 GMT    "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-04-07 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":30 GMT    \n--------------------------------------------------------------------------------------\n0000001-200406202248813-oozie-hado-W     hive2-wf     SUCCEEDED hadoop    -         "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-04-07 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(":59 GMT    "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-04-07 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":04 GMT    \n--------------------------------------------------------------------------------------\n0000000-200406202248813-oozie-hado-W     shell-wf     SUCCEEDED hadoop    -         "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-04-06 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":22 GMT    "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-04-06 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(":23 GMT    \n--------------------------------------------------------------------------------------\n")])])]),n("h5",{attrs:{id:"查看定时任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看定时任务"}},[t._v("#")]),t._v(" 查看定时任务")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hadoop@node03 oozie-4.1.0-cdh5.14.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ oozie "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("jobs")]),t._v(" -jobtype coordinator\nJob ID                                   App Name       Status    Freq Unit         Started                 Next Materialized       \n--------------------------------------------------------------------------------------\n0000004-200406202248813-oozie-hado-C     cron-job       PREP      "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("    MINUTE       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-04-10 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":00 GMT    -                       \n--------------------------------------------------------------------------------------\n")])])]),n("h5",{attrs:{id:"杀死某个任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#杀死某个任务"}},[t._v("#")]),t._v(" 杀死某个任务")]),t._v(" "),n("p",[t._v("oozie可以通过jobid来杀死某个定时任务，语法：oozie job -kill [id]")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("oozie job -kill 0000004-200406202248813-oozie-hado-C\n")])])]),n("p",[t._v("定时任务被杀死后，Status会显示KILLED。"),n("img",{attrs:{src:s(1207),alt:"image-20200410160425194"}})]),t._v(" "),n("h2",{attrs:{id:"hue整合oozie"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hue整合oozie"}},[t._v("#")]),t._v(" hue整合oozie")]),t._v(" "),n("h4",{attrs:{id:"第一步-停止oozie与hue的进程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步-停止oozie与hue的进程"}},[t._v("#")]),t._v(" 第一步：停止oozie与hue的进程")]),t._v(" "),n("p",[t._v("停止oozie进程：")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\nbin/oozied.sh stop\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#通过jps查看，没有BootStrap进程就代表停掉了")]),t._v("\n")])])]),n("h4",{attrs:{id:"第二步-修改oozie的配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步-修改oozie的配置文件"}},[t._v("#")]),t._v(" 第二步：修改oozie的配置文件")]),t._v(" "),n("p",[t._v("这个是老版本的bug，新版本已经不需要修改和上传了，这一步我们都不需要做了")]),t._v(" "),n("p",[t._v("修改oozie的配置文件oozie-site.xml---不需要")]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("    \n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("oozie.service.WorkflowAppService.system.libpath"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/user/oozie/share/lib"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("oozie.use.system.libpath"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("true"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("重新上传所有的jar包到hdfs的/user/oozie/share/lib路径下去---不需要")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /kkb/install/oozie-4.1.0-cdh5.14.2\n\nbin/oozie-setup.sh sharelib create -fs hdfs://node01:8020 -locallib oozie-sharelib-4.1.0-cdh5.14.2-yarn.tar.gz\n")])])]),n("h4",{attrs:{id:"第三步-修改hue的配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-修改hue的配置文件"}},[t._v("#")]),t._v(" 第三步：修改hue的配置文件")]),t._v(" "),n("p",[t._v("修改hue的配置文件hue.ini----\x3e通过notepad修改即可")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("liboozie"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## The URL where the Oozie service runs on. This is required in order for")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## users to submit jobs. Empty value disables the config check.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("oozie_url")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://node03:11000/oozie\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Requires FQDN in oozie_url if enabled")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## security_enabled=false")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Location on HDFS where the workflows/coordinator are deployed when submitted.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("remote_deployement_dir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/user/hadoop/oozie_works\n")])])]),n("p",[t._v("修改[oozie]，大概在1151行左右的样子")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("oozie"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Location on local FS where the examples are stored.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## local_data_dir=/kkb/install/oozie-4.1.0-cdh5.14.2/examples/apps")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Location on local FS where the data for the examples is stored.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## sample_data_dir=/kkb/install/oozie-4.1.0-cdh5.14.2/examples/input-data")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Location on HDFS where the oozie examples and workflows are stored.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Parameters are $TIME and $USER, e.g. /user/$USER/hue/workspaces/workflow-$TIME")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## remote_data_dir=/user/root/oozie_works/examples/apps")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Maximum of Oozie workflows or coodinators to retrieve in one API call.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("oozie_jobs_count")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Use Cron format for defining the frequency of a Coordinator instead of the old frequency number/unit.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("enable_cron_scheduling")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Flag to enable the saved Editor queries to be dragged and dropped into a workflow.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("enable_document_action")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Flag to enable Oozie backend filtering instead of doing it at the page level in Javascript. Requires Oozie 4.3+.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("enable_oozie_backend_filtering")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Flag to enable the Impala action.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("enable_impala_action")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("filebrowser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Location on local filesystem where the uploaded archives are temporary stored.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("archive_upload_tempdir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/tmp\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Show Download Button for HDFS file browser.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("show_download_button")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Show Upload Button for HDFS file browser.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("show_upload_button")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Flag to enable the extraction of a uploaded archive in HDFS.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("enable_extract_uploaded_archive")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n")])])]),n("h4",{attrs:{id:"第四步-启动hue与oozie的进程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四步-启动hue与oozie的进程"}},[t._v("#")]),t._v(" 第四步：启动hue与oozie的进程")]),t._v(" "),n("p",[t._v("启动hue进程")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /kkb/install/hue-3.9.0-cdh5.14.2\nbuild/env/bin/supervisor\n")])])]),n("p",[t._v("启动oozie进程")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /kkb/install/oozie-4.1.0-cdh5.14.2\nbin/oozied.sh start\n")])])]),n("h4",{attrs:{id:"第五步-页面访问hue"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第五步-页面访问hue"}},[t._v("#")]),t._v(" 第五步：页面访问hue")]),t._v(" "),n("p",[t._v("http://node03.hadoop.com:8888/")]),t._v(" "),n("h6",{attrs:{id:"添加oozie-workflow任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#添加oozie-workflow任务"}},[t._v("#")]),t._v(" 添加oozie workflow任务")]),t._v(" "),n("p",[t._v("事先写好hql/impala sql等，或者准备好mapreduce jar包等，然后通过拉拽的方式设置即可。")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1208),alt:"image-20200410170101378"}})]),t._v(" "),n("h6",{attrs:{id:"添加oozie-定时任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#添加oozie-定时任务"}},[t._v("#")]),t._v(" 添加oozie 定时任务")]),t._v(" "),n("p",[t._v("添加好oozie workflow之后，就可以将该workflow设置为定时任务了。")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1209),alt:"image-20200410170536143"}})]),t._v(" "),n("p",[n("img",{attrs:{src:s(1210),alt:"image-20200410170600805"}})]),t._v(" "),n("p",[n("img",{attrs:{src:s(1211),alt:"image-20200410170715921"}})]),t._v(" "),n("img",{staticStyle:{zoom:"67%"},attrs:{src:"oozie.assets/image-20200410171154007.png",alt:"image-20200410171154007"}}),t._v(" "),n("h2",{attrs:{id:"oozie使用过程当中可能遇到的问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oozie使用过程当中可能遇到的问题"}},[t._v("#")]),t._v(" oozie使用过程当中可能遇到的问题")]),t._v(" "),n("ol",[n("li",[t._v("Mysql权限配置")])]),t._v(" "),n("p",[t._v("授权所有主机可以使用root用户操作所有数据库和数据表")]),t._v(" "),n("div",{staticClass:"language-sql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[t._v("mysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("grant")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("all")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(" root"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@'%'")]),t._v(" identified "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123456'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("grant")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("option")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" flush "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("privileges")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[n("p",[t._v("workflow.xml配置的时候不要忽略file属性")])]),t._v(" "),n("li",[n("p",[t._v("jps查看进程时，注意有没有bootstrap")])])]),t._v(" "),n("p",[n("strong",[t._v("4)")]),t._v(" 关闭oozie")]),t._v(" "),n("p",[t._v("如果bin/oozied.sh stop无法关闭，则可以使用kill -9 [pid]，之后oozie根目录下的oozie-server/temp/xxx.pid文件一定要删除。")]),t._v(" "),n("p",[t._v("**5) **Oozie重新打包时，一定要注意先关闭进程，删除对应文件夹下面的pid文件。（可以参考第4条目）")]),t._v(" "),n("p",[n("strong",[t._v("6)")]),t._v(" 配置文件一定要生效")]),t._v(" "),n("p",[t._v("起始标签和结束标签无对应则不生效，配置文件的属性写错了，那么则执行默认的属性。")]),t._v(" "),n("ol",{attrs:{start:"7"}},[n("li",[n("p",[t._v("libext下边的jar存放于某个文件夹中，导致share/lib创建不成功**。**")])]),t._v(" "),n("li",[n("p",[t._v("修改Hadoop配置文件，需要重启集群。一定要记得scp到其他节点。")])]),t._v(" "),n("li",[n("p",[t._v("JobHistoryServer必须开启，集群要重启的。")])]),t._v(" "),n("li",[n("p",[t._v("Mysql配置如果没有生效的话，默认使用derby数据库。")])]),t._v(" "),n("li",[n("p",[t._v("在本地修改完成的job配置，必须重新上传到HDFS。")])]),t._v(" "),n("li",[n("p",[t._v("将HDFS中上传的oozie配置文件下载下来查看是否有错误。")])]),t._v(" "),n("li",[n("p",[t._v("Linux用户名和Hadoop的用户名不一致。")])])]),t._v(" "),n("p",[t._v("15）sharelib找不到，包括重新初始化oozie")]),t._v(" "),n("p",[t._v("如果部署oozie出错，修复执行，初始化oozie：")]),t._v(" "),n("ol",[n("li",[t._v("停止oozie（要通过jps检查bootstrap进程是否已经不存在）")]),t._v(" "),n("li",[t._v("删除oozie-server/temp/")]),t._v(" "),n("li",[t._v("删除HDFS上的sharelib文件夹")]),t._v(" "),n("li",[t._v("删除oozie.sql文件，删除Mysql中删除oozie库，重新创建")]),t._v(" "),n("li",[t._v("重新按照顺序执行文档中oozie的安装重新再来一遍")])])])}),[],!1,null,null,null);a.default=e.exports}}]);