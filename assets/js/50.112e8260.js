(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1984:function(s,a,e){"use strict";e.r(a);var t=e(17),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),e("p",[s._v("注意事项："),e("strong",[s._v("所有机器一定要保证时钟同步")])])]),s._v(" "),e("h2",{attrs:{id:"node01安装zookeeper"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#node01安装zookeeper"}},[s._v("#")]),s._v(" node01安装zookeeper")]),s._v(" "),e("p",[e("a",{attrs:{href:"http://archive.cloudera.com/cdh5/cdh/5/",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载zookeeper安装包"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("下载版本："),e("code",[s._v("zookeeper-3.4.5-cdh5.14.2.tar.gz")])]),s._v(" "),e("p",[s._v("上传到"),e("code",[s._v("node01")]),s._v("的"),e("code",[s._v("/kkb/soft")]),s._v("路径，并解压到"),e("code",[s._v("/kkb/install")]),s._v("路径：")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /kkb/soft\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf zookeeper-3.4.5-cdh5.14.2.tar.gz -C /kkb/install/ \n")])])]),e("p",[s._v("修改配置文件")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /kkb/install/zookeeper-3.4.5-cdh5.14.2/conf\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" zoo_sample.cfg  zoo.cfg\n")])])]),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /kkb/install/zookeeper-3.4.5-cdh5.14.2/zkdatas\n")])])]),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" zoo.cfg\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dataDir")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/kkb/install/zookeeper-3.4.5-cdh5.14.2/zkdatas\nautopurge.snapRetainCount"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删掉注释")]),s._v("\nautopurge.purgeInterval"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删掉注释")]),s._v("\nserver.1"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node01:2888:3888\nserver.2"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node02:2888:3888\nserver.3"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node03:2888:3888\n")])])]),e("p",[s._v("添加"),e("code",[s._v("myid")]),s._v("配置：")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("br")]),e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /kkb/install/zookeeper-3.4.5-cdh5.14.2/zkdatas/myid\n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),e("h2",{attrs:{id:"分发zookeeper安装包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分发zookeeper安装包"}},[s._v("#")]),s._v(" 分发Zookeeper安装包")]),s._v(" "),e("p",[s._v("分发node01的安装包到node02和node03上：")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /kkb/install/zookeeper-3.4.5-cdh5.14.2/ node02:/kkb/install/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /kkb/install/zookeeper-3.4.5-cdh5.14.2/ node03:/kkb/instal/\n")])])]),e("p",[s._v("node02上修改myid的值为2")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vi /kkb/install/zookeeper-3.4.5-cdh5.14.2/myid\n\n2\n")])])]),e("p",[s._v("node03上修改myid的值为3")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vi /kkb/install/zookeeper-3.4.5-cdh5.14.2/myid\n\n3\n")])])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),e("p",[s._v("每个节点的myid值一定要正确，否则后面会出错")])]),s._v(" "),e("h2",{attrs:{id:"配置zookeeper环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置zookeeper环境变量"}},[s._v("#")]),s._v(" 配置zookeeper环境变量")]),s._v(" "),e("p",[s._v("所有节点配置zookeeper环境变量：")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /home/hadoop/.bash_profile\n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ZOOKEEPER_HOME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/kkb/install/zookeeper-3.4.5-cdh5.14.2\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(":ZOOKEEPER_HOME/bin\n")])])]),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /home/hadoop/.bash_profile\n")])])]),e("h2",{attrs:{id:"所有机器启动zookeeper服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#所有机器启动zookeeper服务"}},[s._v("#")]),s._v(" 所有机器启动zookeeper服务")]),s._v(" "),e("p",[s._v("所有机器执行：")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("/kkb/install/zookeeper-3.4.5-cdh5.14.2/bin/zkServer.sh start\n")])])]),e("p",[s._v("查看启动状态：")]),s._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("/kkb/install/zookeeper-3.4.5-cdh5.14.2/bin/zkServer.sh status\n")])])]),e("p",[s._v("出现类似下列信息时表示正常开启:")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("JMX enabled by default")]),s._v(" "),e("p",[s._v("Using config: /kkb/install/zookeeper-3.4.5-cdh5.14.2/bin/../conf/zoo.cfg")]),s._v(" "),e("p",[s._v("Mode: leader")])]),s._v(" "),e("p",[s._v("⚠️"),e("strong",[s._v("搭建完并启动zookeeper集群后，执行jps会出现QuorumPeerMain")])])])}),[],!1,null,null,null);a.default=r.exports}}]);