(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1979:function(t,s,a){"use strict";a.r(s);var n=a(17),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"认识cypress"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#认识cypress"}},[t._v("#")]),t._v(" 认识cypress")]),t._v(" "),n("p",[t._v("cypress相关文档：")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://docs.cypress.io/guides/core-concepts/introduction-to-cypress.html#Cypress-Can-Be-Simple-Sometimes",target:"_blank",rel:"noopener noreferrer"}},[t._v("cypress官方文档"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("cypress能干什么：")]),t._v(" "),n("ul",[n("li",[t._v("End to End test")]),t._v(" "),n("li",[t._v("Integration tests")]),t._v(" "),n("li",[t._v("Unit tests")])]),t._v(" "),n("blockquote",[n("p",[t._v("e2e test的一个理解：站在"),n("strong",[t._v("用户角度")]),t._v("的测试，把我们的程序当成一个黑盒子，不管内部是怎么实现的，我只负责打开浏览器，把测试内容在页面上输入一遍，看是不是我想要得到的结果。")])]),t._v(" "),n("p",[t._v("cypress可以测试任何能在浏览器运行的东西。")]),t._v(" "),n("p",[t._v("cypress提供了两个服务（组件），分别是Test  Runner测试运行器和Dashboard，来帮助我们记录测试。")]),t._v(" "),n("p",[t._v("cypress的特点：")]),t._v(" "),n("ul",[n("li",[t._v("为运行的测试记录快照")]),t._v(" "),n("li",[t._v("报错时，错误可读性很强，帮助提高调试的速度")]),t._v(" "),n("li",[t._v("不需要在测试代码中添加等待或者睡眠。（有自己的"),n("a",{attrs:{href:""}},[t._v("重试和超时机制")]),t._v("）")]),t._v(" "),n("li",[t._v("不需要使用Selenium或者驱动，更加快速和可靠。")]),t._v(" "),n("li",[t._v("cypress与应用程序运行在同一个循环中，而大多数测试工具（如Selenium）都是通过在浏览器外部运行并在网络上执行远程命令来操作的。")]),t._v(" "),n("li",[t._v("能够[记录操作截图和视频](Selenium or WebDriver)")]),t._v(" "),n("li",[t._v("完美"),n("a",{attrs:{href:"https://docs.cypress.io/guides/guides/cross-browser-testing.html#Continuous-Integration-Strategies",target:"_blank",rel:"noopener noreferrer"}},[t._v("运行在持续集成pipeline中"),n("OutboundLink")],1),t._v("。")])]),t._v(" "),n("blockquote",[n("p",[t._v("Cypress最终从上到下控制整个自动化过程，这使它处于一个独特的位置，能够理解浏览器内外发生的一切。这意味着Cypress能够提供比任何其他测试工具更一致和准确的结果。"),n("a",{attrs:{href:"https://docs.cypress.io/guides/overview/key-differences.html#Architecture",target:"_blank",rel:"noopener noreferrer"}},[t._v("链接"),n("OutboundLink")],1)])]),t._v(" "),n("p",[n("img",{attrs:{src:a(447),alt:"image-20201218000023216"}})]),t._v(" "),n("h3",{attrs:{id:"cypress的超时和重试机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cypress的超时和重试机制"}},[t._v("#")]),t._v(" cypress的超时和重试机制")]),t._v(" "),n("p",[t._v("如果使用jQuery来去定位元素时，可能是这样的：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定位获取元素")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" $myElement "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.element'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("first")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置判断条件，如果元素找到了，才做什么。。。。")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$myElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$myElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("而cypress中处理找不到元素问题的方式是"),n("strong",[t._v("自动重试")]),t._v("机制。")]),t._v(" "),n("p",[t._v("cypress会自动重试，直到"),n("strong",[t._v("元素被找到")]),t._v("或者"),n("strong",[t._v("达到超时时间")]),t._v("（默认为4秒）。比如：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("cy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#element'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("$myElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$myElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cy.get()会重复去找元素#element,直到找到或超时")]),t._v("\n")])])]),n("p",[t._v("自动重试机制使得cypress更加健壮，可以避免一些查找元素失败的情况，如：")]),t._v(" "),n("ul",[n("li",[t._v("DOM未加载")]),t._v(" "),n("li",[t._v("XHR请求没有响应")]),t._v(" "),n("li",[t._v("动画未完成")]),t._v(" "),n("li",[t._v("等等。。")])]),t._v(" "),n("blockquote",[n("p",[t._v("可以通过[参数defaultCommandTimeout]来修改"),n("a",{attrs:{href:"https://docs.cypress.io/guides/references/configuration.html#Timeouts",target:"_blank",rel:"noopener noreferrer"}},[t._v("重试的超时时间"),n("OutboundLink")],1),t._v("。")])]),t._v(" "),n("h3",{attrs:{id:"cypress的持续集成策略"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cypress的持续集成策略"}},[t._v("#")]),t._v(" cypress的持续集成策略")]),t._v(" "),n("p",[t._v("cypress可以运行在多种浏览器中：")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://www.google.com/chrome/browser/canary.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Canary"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.google.com/chrome/browser/desktop/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chrome"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.chromium.org/Home",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chromium"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.microsoft.com/edge",target:"_blank",rel:"noopener noreferrer"}},[t._v("Edge"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.microsoftedgeinsider.com/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("Edge Beta"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.microsoftedgeinsider.com/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("Edge Canary"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.microsoftedgeinsider.com/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("Edge Dev"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://electron.atom.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Electron"),n("OutboundLink")],1),t._v(" "),n("strong",[t._v("无头浏览器")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.mozilla.org/firefox/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Firefox"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.mozilla.org/firefox/developer/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Firefox Developer Edition"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.mozilla.org/firefox/nightly/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Firefox Nightly"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("可以通过"),n("code",[t._v("--browser")]),t._v("选项来指定cypress的运行浏览器：")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("cypress run --browser chrome\ncypress run --browser firefox\n")])])]),n("blockquote",[n("p",[t._v("使用cypress run命令来运行时，默认使用Electron无头浏览器来运行。")])]),t._v(" "),n("p",[t._v("可以通过"),n("strong",[t._v("npm sripts")]),t._v("来设定运行的快捷键：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cy:run:chrome"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cypress run --browser chrome"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cy:run:firefox"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cypress run --browser firefox"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("https://docs.cypress.io/guides/guides/cross-browser-testing.html#Continuous-Integration-Strategies")]),t._v(" "),n("h2",{attrs:{id:"cypress的安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cypress的安装"}},[t._v("#")]),t._v(" cypress的安装")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://docs.cypress.io/guides/getting-started/installing-cypress.html#System-requirements",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装cypress点击此处"),n("OutboundLink")],1)]),t._v(" "),n("ul",[n("li",[n("p",[t._v("cypress支持mac os, windows, linux系统。")])]),t._v(" "),n("li",[n("p",[t._v("如果使用npm来安装，需要使用Node.js 10或者 12和以上的版本。")])]),t._v(" "),n("li",[n("p",[t._v("使用在linux中安装，需要一些依赖：")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" libgtk2.0-0 libgtk-3-0 libgbm-dev libnotify-dev libgconf-2-4 libnss3 libxss1 libasound2 libxtst6 xauth xvfb\n")])])]),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y xorg-x11-server-Xvfb gtk2-devel gtk3-devel libnotify-devel GConf2 nss libXScrnSaver alsa-lib\n")])])])])]),t._v(" "),n("p",[n("strong",[t._v("1、通过npm安装。")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /your/project/path\n")])])]),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改当前目录的package.json文件，添加执行脚本")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cypress:open"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cypress open"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" cypress --save-dev\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run cypress:open\n")])])]),n("p",[n("strong",[t._v("2、通过yarn直接安装")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /your/project/path\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("yarn add cypress --dev\n")])])]),n("p",[t._v("3、"),n("strong",[t._v("直接下载安装包安装")])]),t._v(" "),n("p",[n("a",{attrs:{href:"https://download.cypress.io/desktop",target:"_blank",rel:"noopener noreferrer"}},[t._v("download Cypress directly from our CDN"),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("h2",{attrs:{id:"cypress的默认文件结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cypress的默认文件结构"}},[t._v("#")]),t._v(" cypress的默认文件结构")]),t._v(" "),n("p",[t._v("使用"),n("code",[t._v("npm rum cypress")]),t._v("命令首次打开cypress，cypress会自动地初始化配置并生成一个"),n("strong",[t._v("默认的"),n("a",{attrs:{href:"https://docs.cypress.io/guides/core-concepts/writing-and-organizing-tests.html#Folder-Structure",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件夹结构"),n("OutboundLink")],1)]),t._v("：")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("/cypress\n  /fixtures \n    - example.json\n\n  /integration\n    /examples\n      - actions.spec.js\n      - aliasing.spec.js\n      \n  /plugins\n    - index.js\n\n  /support\n    - commands.js\n    - index.js\n")])])]),n("h3",{attrs:{id:"fixtures"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fixtures"}},[t._v("#")]),t._v(" fixtures")]),t._v(" "),n("p",[n("strong",[t._v("简介")])]),t._v(" "),n("ul",[n("li",[t._v("测试夹具通常配合 "),n("code",[t._v("cy.fixture()")]),t._v(" 使用")]),t._v(" "),n("li",[t._v("主要用来"),n("strong",[t._v("存储")]),t._v("测试用例的"),n("strong",[t._v("外部静态数据")]),t._v("，静态数据通常存储在 .json 文件中")]),t._v(" "),n("li",[n("code",[t._v("fixtures")]),t._v(" 默认就在 "),n("code",[t._v("cypress/fixtures")]),t._v(" 目录下，但也可以配置到另一个目录")])]),t._v(" "),n("h3",{attrs:{id:"integration"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#integration"}},[t._v("#")]),t._v(" integration")]),t._v(" "),n("p",[t._v("测试文件就是"),n("strong",[t._v("测试用例")]),t._v("，默认位于 "),n("strong",[t._v("cypress/integration")]),t._v(" ，但也可以配置到另一个目录")]),t._v(" "),n("p",[n("strong",[t._v("测试文件格式")]),t._v("：所有在 integration 文件下，且文件格式是以下的文件都将被 Cypress 识别为测试文件")]),t._v(" "),n("ul",[n("li",[n("code",[t._v(".js")]),t._v(" ：普通的"),n("code",[t._v("JavaScript")]),t._v(" 编写的文件**【最常用】**")]),t._v(" "),n("li",[n("code",[t._v(".jsx")]),t._v(" ：带有扩展的 "),n("code",[t._v("JavaScript")]),t._v(" 文件，其中可以包含处理 "),n("code",[t._v("XML")]),t._v(" 的 "),n("code",[t._v("ECMAScript")])]),t._v(" "),n("li",[n("code",[t._v(".coffee")]),t._v(" ：一套 "),n("code",[t._v("JavaScript")]),t._v(" 转译的语言。有更严格的语法")]),t._v(" "),n("li",[n("code",[t._v(".cjsx")]),t._v(" ："),n("code",[t._v("CoffeeScript")]),t._v(" 中的 "),n("code",[t._v("jsx")]),t._v(" 文件")])]),t._v(" "),n("p",[t._v("创建好后，"),n("code",[t._v("Cypress")]),t._v(" 的 "),n("code",[t._v("Test Runner")]),t._v(" 刷新之后就可以看到对应测试文件了")]),t._v(" "),n("h3",{attrs:{id:"plugins"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[t._v("#")]),t._v(" plugins")]),t._v(" "),n("ul",[n("li",[t._v("Cypress 独有优点就是"),n("strong",[t._v("测试代码运行在浏览器之内")]),t._v("，使得 Cypress 跟其他的测试框架相比，有显著的架构优势")]),t._v(" "),n("li",[t._v("这优点虽然提供了可靠性测试，但也使得和在浏览器之外进行通信更加困难**【痛点：和外部通信困难】**")])]),t._v(" "),n("p",[n("strong",[t._v("插件文件的诞生")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("Cypress")]),t._v(" 为了解决上述痛点提供了一些现成的插件，使你可以"),n("strong",[t._v("修改或扩展 Cypress 的内部行为")]),t._v("（如：动态修改配置信息和环境变量等），也可以自定义自己的插件")]),t._v(" "),n("li",[t._v("默认情况，插件位于 "),n("code",[t._v("cypress/plugins/index.js")]),t._v(" 中，但可以配置到另一个目录")]),t._v(" "),n("li",[t._v("为了方便，每个"),n("strong",[t._v("测试文件运行之前")]),t._v("，"),n("code",[t._v("Cypress")]),t._v(" 都会"),n("strong",[t._v("自动加载插件文件")]),t._v(" "),n("code",[t._v("cypress/plugins/index.js")])])]),t._v(" "),n("p",[n("strong",[t._v("插件的应用场景")])]),t._v(" "),n("ul",[n("li",[t._v("动态更改来自 cypress.json，cypress.env.json，CLI或系统环境变量的"),n("strong",[t._v("已解析配置和环境变量")])]),t._v(" "),n("li",[t._v("修改特定浏览器的启动参数")]),t._v(" "),n("li",[t._v("将消息直接从测试代码传递到后端")])]),t._v(" "),n("h3",{attrs:{id:"support"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#support"}},[t._v("#")]),t._v(" support")]),t._v(" "),n("ul",[n("li",[t._v("支持文件目录是放置可重用配置项，如**==底层通用函数或全局默认配置==**")]),t._v(" "),n("li",[t._v("支持文件默认位于 "),n("code",[t._v("cypress/support/index.js")]),t._v(" 中，但可以配置到另一个目录")]),t._v(" "),n("li",[t._v("为了方便，每个"),n("strong",[t._v("测试文件运行之前")]),t._v("，"),n("code",[t._v("Cypress")]),t._v(" 都会"),n("strong",[t._v("自动加载支持文件")]),t._v(" "),n("code",[t._v("cypress/support/index.js")])])]),t._v(" "),n("h2",{attrs:{id:"测试用例文件的编写"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试用例文件的编写"}},[t._v("#")]),t._v(" 测试用例文件的编写")]),t._v(" "),n("p",[t._v("借鉴于mocha。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -- Start: Our Cypress Tests --")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Unit test our math functions'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("context")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'math'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'can add numbers'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("eq")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'can subtract numbers'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("subtract")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("eq")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("specify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'can divide numbers'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("divide")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("eq")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("specify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'can multiply numbers'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("multiply")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("eq")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -- End: Our Cypress Tests --")]),t._v("\n")])])]),n("p",[t._v("hooks：控制用例执行的前置和后置的操作。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// root-level hook")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// runs before every test")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hooks'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("before")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// runs once before all tests in the block")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// runs before each test in the block")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// runs after each test in the block")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("after")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// runs once after all tests in the block")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("code",[t._v(".only")]),t._v("与"),n("code",[t._v(".skip")]),t._v("，帮助我们仅运行或者跳过某条用例。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("  it"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("only")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'returns \"fizz\" when number is multiple of 3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("numsExpectedToEq")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fizz'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'returns \"buzz\" when number is multiple of 5'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("numsExpectedToEq")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'buzz'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("it"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("skip")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'returns \"fizz\" when number is multiple of 3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("numsExpectedToEq")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fizz'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("结合"),n("code",[t._v("javascript")]),t._v("代码来"),n("strong",[t._v("动态的生成多个测试")]),t._v("：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'if your app uses jQuery'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mouseover'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mouseout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mouseenter'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mouseleave'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'triggers event: '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      cy\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#with-jquery'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("invoke")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'trigger'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#messages'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'contain'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'the event '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" event "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'was fired'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h2",{attrs:{id:"断言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#断言"}},[t._v("#")]),t._v(" 断言")]),t._v(" "),n("p",[t._v("https://docs.cypress.io/guides/references/assertions.html#Chai")]),t._v(" "),n("p",[t._v("cypress集成了 "),n("a",{attrs:{href:"https://docs.cypress.io/guides/references/assertions.html#Chai",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chai"),n("OutboundLink")],1),t._v("断言库。")]),t._v(" "),n("p",[n("strong",[t._v("常用的断言：")])]),t._v(" "),n("p",[n("strong",[t._v("Length")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// retry until we find 3 matching <li.selected>")]),t._v("\ncy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'li.selected'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'have.length'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("strong",[t._v("Class")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// retry until this input does not have class disabled")]),t._v("\ncy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'form'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'input'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'not.have.class'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'disabled'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("strong",[t._v("Value")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// retry until this textarea has the correct value")]),t._v("\ncy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'textarea'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'have.value'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo bar baz'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("strong",[t._v("Text Content")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// retry until this span does not contain 'click me'")]),t._v("\ncy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("parent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'span.help'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'not.contain'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click me'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("strong",[t._v("Visibility")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// retry until this button is visible")]),t._v("\ncy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'button'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'be.visible'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("strong",[t._v("Existence")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// retry until loading spinner no longer exists")]),t._v("\ncy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#loading'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'not.exist'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("strong",[t._v("State")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// retry until our radio is checked")]),t._v("\ncy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("':radio'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'be.checked'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("strong",[t._v("CSS")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// retry until .completed has matching css")]),t._v("\ncy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.completed'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'have.css'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text-decoration'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'line-through'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// retry while .accordion css has the "display: none" property')]),t._v("\ncy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#accordion'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'not.have.css'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'display'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'none'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("strong",[t._v("多个断言")]),t._v("   https://docs.cypress.io/guides/core-concepts/retry-ability.html#Multiple-assertions")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("cy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.todo-list li'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// command")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'have.length'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// assertion")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("$li")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2 more assertions")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$li"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'first item'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("equal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'todo a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$li"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'second item'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("equal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'todo B'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h2",{attrs:{id:"定位元素"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#定位元素"}},[t._v("#")]),t._v(" 定位元素")]),t._v(" "),n("p",[t._v("cypress跟jQuery的定位元素方法很像，而且cypress集成了jQuery，可以使用jQuery的方法来定位和操控元素。")]),t._v(" "),n("p",[t._v("1、使用cypress定位元素：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("cy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#main-content'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.article'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("children")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'img[src^=\"/static\"]'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("first")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("2、使用cypress"),n("a",{attrs:{href:"https://docs.cypress.io/api/utilities/$.html#Syntax",target:"_blank",rel:"noopener noreferrer"}},[t._v("集成的jQuery"),n("OutboundLink")],1),t._v("来定位元素：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("语法：\n\tCypress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selector"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n例子：\n    Cypress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" $li "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cypress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ul li:first'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("定位元素的优先级：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('<button id="main" class="btn btn-large" name="submission"\n  role="button" data-cy="submit">Submit</button>\n')])])]),n("table",[n("thead",[n("tr",[n("th",[t._v("Selector")]),t._v(" "),n("th",[t._v("Recommended")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("code",[t._v("cy.get('button').click()")])]),t._v(" "),n("td",[t._v("尽量不使用")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("cy.get('.btn.btn-large').click()")])]),t._v(" "),n("td",[t._v("尽量不使用")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("cy.get('#main').click()")])]),t._v(" "),n("td",[t._v("少量使用")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("cy.get('[name=submission]').click()")])]),t._v(" "),n("td",[t._v("少量使用")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("cy.contains('Submit').click()")])]),t._v(" "),n("td",[t._v("Depends")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("cy.get('[data-cy=submit]').click()")])]),t._v(" "),n("td",[t._v("Always")])])])]),t._v(" "),n("h2",{attrs:{id:"插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[t._v("#")]),t._v(" 插件")]),t._v(" "),n("p",[t._v("一般来说，所有的测试代码，cypress的命令等都是运行在浏览器上的，但是cypress也是一个插件可以使用的Node进程。")]),t._v(" "),n("p",[t._v("我们可以写自己的自定义代码然后在cypress特定的生命周期中去执行。")]),t._v(" "),n("h3",{attrs:{id:"使用场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[t._v("#")]),t._v(" 使用场景")]),t._v(" "),n("h4",{attrs:{id:"配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" "),n("a",{attrs:{href:"https://docs.cypress.io/api/plugins/configuration-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("通过插件，可以使用编程的方式来修改已解析的配置和环境变量。")]),t._v(" "),n("p",[t._v("已解析的配置和环境变量：来自于配置文件（默认为cypress.json）,cypress.env.json，命令行，或者系统环境变量）。")]),t._v(" "),n("p",[t._v("利用插件，可以：")]),t._v(" "),n("ul",[n("li",[t._v("使用具有不同配置的多个环境")]),t._v(" "),n("li",[t._v("基于环境来交换环境变量")]),t._v(" "),n("li",[t._v("使用内置的fs库来读入配置文件")]),t._v(" "),n("li",[t._v("更改用于测试的浏览器列表")]),t._v(" "),n("li",[t._v("在yml中写配置")])]),t._v(" "),n("h4",{attrs:{id:"预处理程序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#预处理程序"}},[t._v("#")]),t._v(" "),n("a",{attrs:{href:"https://docs.cypress.io/api/plugins/preprocessors-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("预处理程序"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("code",[t._v("file:preprocessor")]),t._v(" event 可用于自定义测试代码传输和发送到浏览器的方式。")]),t._v(" "),n("p",[t._v("默认情况下，Cypress支持ES2015+、TypeScript和CoffeeScript，使用webpack为浏览器打包。")]),t._v(" "),n("p",[t._v("可使用"),n("code",[t._v("file:preprocessor")]),t._v("来进行：")]),t._v(" "),n("ul",[n("li",[t._v("添加最新的ES* 支持。")]),t._v(" "),n("li",[t._v("使用ClojureScript来编写测试代码。")]),t._v(" "),n("li",[t._v("自定义Babel设置以添加自己的插件。")]),t._v(" "),n("li",[t._v("自定义编译TypeScript的选项。")]),t._v(" "),n("li",[t._v("把网页包换成Browserify或其他任何东西。")])]),t._v(" "),n("h4",{attrs:{id:"浏览器运行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#浏览器运行"}},[t._v("#")]),t._v(" "),n("a",{attrs:{href:"https://docs.cypress.io/api/plugins/browser-launch-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("浏览器运行"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("code",[t._v("before:browser:launch")]),t._v(" event 可用于为每个特别的浏览器修改运行时的参数，如：")]),t._v(" "),n("ul",[n("li",[t._v("加载一个Chrome扩展（插件）")]),t._v(" "),n("li",[t._v("启用或禁用实验chrome的一个功能")]),t._v(" "),n("li",[t._v("控制chrome加载的组件")])]),t._v(" "),n("h4",{attrs:{id:"截图处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#截图处理"}},[t._v("#")]),t._v(" "),n("a",{attrs:{href:"https://docs.cypress.io/api/plugins/after-screenshot-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("截图处理"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("code",[t._v("after:screenshot")]),t._v(" event在截图保存到磁盘后会被调用，利用该event可以：")]),t._v(" "),n("ul",[n("li",[t._v("保存截图的相关详细信息")]),t._v(" "),n("li",[t._v("重命名截图")]),t._v(" "),n("li",[t._v("对截图进行缩放、裁剪等操作")])]),t._v(" "),n("h3",{attrs:{id:"插件安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件安装"}},[t._v("#")]),t._v(" 插件安装")]),t._v(" "),n("p",[t._v("可以通过 npm install 命令来安装以下链接里的插件："),n("a",{attrs:{href:"https://docs.cypress.io/plugins/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("cypress插件"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("plugin name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --save-dev\n")])])]),n("h3",{attrs:{id:"插件使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件使用"}},[t._v("#")]),t._v(" 插件使用")]),t._v(" "),n("p",[t._v("无论是通过npm install方式安装插件还是自己用代码写一个插件，都需要在"),n("code",[t._v("cypress/plugins/index.js")]),t._v("文件中export导出一个函数，cypress会调用这个函数，传送你的项目的配置。")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// export a function")]),t._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bind to the event we care about")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<event>'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("arg1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugin stuff here")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"自己定义插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自己定义插件"}},[t._v("#")]),t._v(" 自己定义插件")]),t._v(" "),n("p",[t._v("首先，"),n("code",[t._v("cypress/plugins/index.js")]),t._v("必须通过下面格式export导出一个函数：")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// export a function")]),t._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// configure plugins here")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("这个函数在cypress运行的时候会被调用，函数将会接受两个参数： "),n("code",[t._v("on")]),t._v(" 和"),n("code",[t._v("config")]),t._v("。")]),t._v(" "),n("p",[t._v("函数可以返回一个同步函数，也可以返回一个Promise，直到它解决为止。这样，就能够在导出的函数中执行异步操作，例如从文件系统读入文件。")]),t._v(" "),n("p",[t._v("如果返回或解析一个对象，那么Cypress将把这个对象合并到config中，这样就可以覆盖配置或环境变量。")]),t._v(" "),n("blockquote",[n("p",[t._v("一个模块就是一个独立的文件， 文件内部的所有变量，外部无法获取，export关键字用于暴露数据，"),n("strong",[t._v("暴露给其它模块")]),t._v("。")])]),t._v(" "),n("h4",{attrs:{id:"on"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#on"}},[t._v("#")]),t._v(" on")]),t._v(" "),n("p",[n("code",[t._v("on")]),t._v("是一个函数，用来为不同的导出的事件event注册监听器。对一个event注册监听的格式如下：")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<event>'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("arg1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugin stuff here")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"config"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[t._v("#")]),t._v(" config")]),t._v(" "),n("p",[n("code",[t._v("config")]),t._v("是一个已解析的cypress配置，这个配置包含项目中所有被传入到浏览器中的值。")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/cypress-io/cypress/blob/master/packages/server/lib/config.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("有关所有配置值的综合列表，可以参阅此处。"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("一些插件可能需要用到这些值，")]),t._v(" "),n("p",[t._v("一些插件可能会使用这些值，从而可以根据配置执行某些操作。")]),t._v(" "),n("p",[t._v("可以通过编程方式修改这些值，然后能够根据运行环境之类的东西交换配置。")]),t._v(" "),n("h3",{attrs:{id:"通过插件修改配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过插件修改配置"}},[t._v("#")]),t._v(" "),n("a",{attrs:{href:"https://docs.cypress.io/api/plugins/configuration-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("通过插件修改配置"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("想要修改配置，需要从插件文件导出的函数中返回一个对象，如下：")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cypress/plugins/index.js")]),t._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// see what all is in here!")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// modify config values")]),t._v("\n  config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaultCommandTimeout "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v("\n  config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("baseUrl "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://staging.acme.com'")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// modify env var value")]),t._v("\n  config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENVIRONMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'staging'")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// return config")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" config\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("strong",[t._v("如果没有返回对象，配置不会被修改。")])]),t._v(" "),n("p",[t._v("已解析的值会展示在测试运行器的”设置“选项卡中：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(448),alt:"Resolved configuration in the Desktop app"}})]),t._v(" "),n("p",[n("strong",[t._v("cypress中，可以等待返回的promise，使得能够执行异步任务，并使用最终修改后的配置对象来进行解析。")])]),t._v(" "),n("h4",{attrs:{id:"例子1-定义可用的浏览器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#例子1-定义可用的浏览器"}},[t._v("#")]),t._v(" 例子1：定义可用的浏览器")]),t._v(" "),n("p",[t._v("在插件文件中，可以过滤从config对象传过来的浏览器列表，然后返回一个你自己定义的执行"),n("code",[t._v("cypress open")]),t._v("命令时"),n("strong",[t._v("可用的浏览器")]),t._v("。")]),t._v(" "),n("blockquote",[n("p",[t._v("注意：执行cypress open时，需要打开浏览器。")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cypress/plugins/index.js")]),t._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// inside config.browsers array each object has information like")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// {")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   name: 'chrome',")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   family: 'chromium',")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   channel: 'canary',")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   displayName: 'Canary',")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   version: '80.0.3966.0',")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   path:")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    '/Applications/Canary.app/Contents/MacOS/Canary',")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   majorVersion: 80")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    browsers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("browsers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("b")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("family "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chromium'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("经过上面的插件文件的过滤，当我们打开测试运行器（test runner)的时候，浏览器列表中只能看到系统的chrome浏览器，如下图：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(449),alt:"Filtered list of Chrome browsers"}})]),t._v(" "),n("blockquote",[n("p",[t._v("如果插件文件中返回的浏览器列表为空或者返回"),n("code",[t._v("browsers: null")]),t._v("，则将自动恢复默认列表。")])]),t._v(" "),n("h4",{attrs:{id:"例子2-读取不同的配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#例子2-读取不同的配置文件"}},[t._v("#")]),t._v(" 例子2：读取不同的配置文件")]),t._v(" "),n("p",[t._v("基于不同的场景，有时候我们可能需要创建不同的配置文件，"),n("strong",[t._v("然后读取不同的配置文件去执行测试任务")]),t._v("。")]),t._v(" "),n("blockquote",[n("p",[t._v("注意，这里的读取不同的配置文件，并不是说将要读取的默认的配置文件cypress.json改成其它的配置文件了，cypress执行测试时，依然会去读取cypress.json配置文件，但是，这里的配置文件的值可能会覆盖掉cypress.json中的值。")]),t._v(" "),n("p",[t._v("我们可以看一下cypress的配置优先级：")]),t._v(" "),n("ol",[n("li",[t._v("默认值")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://docs.cypress.io/guides/references/configuration.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置文件"),n("OutboundLink")],1),t._v("中的值（配置文件默认为cypress.json，可以通过"),n("code",[t._v("--config-file")]),t._v("来指定为其它的文件）")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://docs.cypress.io/guides/guides/environment-variables.html#Option-2-cypress-env-json",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境变量文件"),n("OutboundLink")],1),t._v("中的值（文件为cypress.env.json，可以自己创建）")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://docs.cypress.io/guides/guides/environment-variables.html#Option-3-CYPRESS",target:"_blank",rel:"noopener noreferrer"}},[t._v("系统环境变量"),n("OutboundLink")],1),t._v("中的值（"),n("code",[t._v("CYPRESS_*")]),t._v("）")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://docs.cypress.io/guides/guides/command-line.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("命令行参数"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://docs.cypress.io/api/plugins/configuration-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件文件"),n("OutboundLink")],1),t._v(" 返回的值")])])]),t._v(" "),n("p",[t._v("例如：")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("cypress.qa.json")])]),t._v(" "),n("li",[n("code",[t._v("cypress.dev.json")])]),t._v(" "),n("li",[n("code",[t._v("cypress.prod.json")])])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// promisified fs module")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs-extra'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConfigurationByFile")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pathToConfigFile "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'..'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'config'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("file"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(".json")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readJson")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pathToConfigFile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugins file")]),t._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// accept a configFile value or use development by default")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" file "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("configFile "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConfigurationByFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("blockquote",[n("p",[n("code",[t._v("require()")]),t._v("方法：")]),t._v(" "),n("p",[t._v("用于引入模块、 "),n("code",[t._v("JSON")]),t._v("、或本地文件。 可以从 "),n("code",[t._v("node_modules")]),t._v(" 引入模块。 可以使用相对路径（例如 "),n("code",[t._v("./")]),t._v("、 "),n("code",[t._v("./foo")]),t._v("、 "),n("code",[t._v("./bar/baz")]),t._v("、 "),n("code",[t._v("../foo")]),t._v("）引入本地模块或 JSON 文件，路径会根据 "),n("a",{attrs:{href:"http://nodejs.cn/s/etUQhi",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("__dirname")]),n("OutboundLink")],1),t._v(" 定义的目录名或当前工作目录进行处理。")])]),t._v(" "),n("p",[t._v("接下来，可以通过环境变量来读取不同的配置文件：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("cypress run\ncypress run --env "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("configFile")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("qa\ncypress run --env "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("configFile")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("staging\ncypress run --env "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("configFile")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("production\n")])])]),n("p",[t._v("上面的不同的环境变量，对应下面不同的配置文件的读取：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cypress/config/development.json\ncypress/config/qa.json\ncypress/config/staging.json\ncypress/config/production.json\n")])])]),n("p",[t._v("不同的配置文件可以填写不同的内容，比如下面的例子：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cypress/config/development.json")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"baseUrl"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:1234"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"env"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"something"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"development"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cypress/config/qa.json")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"baseUrl"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://qa.acme.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"env"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"something"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"qa"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cypress/config/staging.json")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"baseUrl"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://staging.acme.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"env"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"something"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"staging"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cypress/config/production.json")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"baseUrl"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://production.acme.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"env"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"something"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"production"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"可用的事件event"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#可用的事件event"}},[t._v("#")]),t._v(" 可用的事件event")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("Event")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("Description")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("a",{attrs:{href:"https://docs.cypress.io/api/plugins/preprocessors-api.html",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("file:preprocessor")]),n("OutboundLink")],1)]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Occurs when a spec or spec-related file needs to be transpiled for the browser.")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("a",{attrs:{href:"https://docs.cypress.io/api/plugins/browser-launch-api.html",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("before:browser:launch")]),n("OutboundLink")],1)]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Occurs immediately before launching a browser.")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("a",{attrs:{href:"https://docs.cypress.io/api/commands/task.html",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("task")]),n("OutboundLink")],1)]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Occurs in conjunction with the "),n("code",[t._v("cy.task")]),t._v(" command.")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("a",{attrs:{href:"https://docs.cypress.io/api/plugins/after-screenshot-api.html",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("after:screenshot")]),n("OutboundLink")],1)]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Occurs after a screenshot is taken.")])])])]),t._v(" "),n("h3",{attrs:{id:"运行时上下文"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行时上下文"}},[t._v("#")]),t._v(" 运行时上下文")]),t._v(" "),n("p",[t._v("打开一个cypress项目的时候，插件文件会被调用。")]),t._v(" "),n("p",[t._v("cypress会生成一个独立的子进程来加载插件文件（plugin files)。")]),t._v(" "),n("p",[t._v("注意：")]),t._v(" "),n("blockquote",[n("p",[t._v("cypress加载的只是插件文件，不是你的本地项目，也不是其它你可以控制的东西。")]),t._v(" "),n("p",[t._v("因此，全局上下文和Node的版本是控制在cypress下的。")]),t._v(" "),n("p",[t._v("Node的版本：")]),t._v(" "),n("ul",[n("li",[t._v("插件中的代码会被cypress本身绑定的Node的版本来执行。")]),t._v(" "),n("li",[t._v("这个Node的版本与你本地安装的Node的版本无关。因此，")])]),t._v(" "),n("p",[t._v("此版本的节点与本地安装的Node版本无关。因此，在插件文件中需要写与绑定的Node版本兼容的代码，或者设置"),n("a",{attrs:{href:"https://docs.cypress.io/guides/references/configuration.html#Node-version",target:"_blank",rel:"noopener noreferrer"}},[t._v("node的版本"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("p",[t._v("设置方法：")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("参数")]),t._v(" "),n("th",[t._v("默认值")]),t._v(" "),n("th",[t._v("描述")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("code",[t._v("nodeVersion")])]),t._v(" "),n("td",[n("code",[t._v("bundled")])]),t._v(" "),n("td",[t._v("如果设置为"),n("code",[t._v("system")]),t._v(", 当加载插件时候，Cypress将会在你的路径上寻找可执行的Node，否则，cypress将会使用cypress绑定的Node版本。")])])])]),t._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/cypress-io/cypress/blob/master/.node-version",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击此处"),n("OutboundLink")],1),t._v("查看当前cypress绑定的node版本。")])]),t._v(" "),n("h4",{attrs:{id:"npm模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm模块"}},[t._v("#")]),t._v(" npm模块")]),t._v(" "),n("p",[t._v("当cypress执行插件文件时，会使用"),n("code",[t._v("process.cwd()")]),t._v("来设置项目的路径，从而可以加载任何已安装的npm模块，也可以加载本地的文件。")]),t._v(" "),n("p",[t._v("例如，如果你的package.json文件如下：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"My Project"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"debug"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x.x.x"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"devDependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lodash"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x.x.x"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("那么你可以进行以下的操作：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cypress/plugins/index.js")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" _ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lodash'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// yup, dev dependencies")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// yup, built in node modules")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" debug "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'debug'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// yup, dependencies")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" User "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../../lib/models/user'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// yup, relative local modules")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /Users/janelane/Dev/my-project/cypress/plugins/index.js")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cwd")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /Users/janelane/Dev/my-project")]),t._v("\n")])])]),n("h3",{attrs:{id:"插件错误处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件错误处理"}},[t._v("#")]),t._v(" 插件错误处理")]),t._v(" "),n("p",[t._v("Cypress在子进程中生成插件文件，这样它就与Cypress本身运行的上下文隔离开来。因此，不能以任何方式意外地修改或更改Cypress自身的执行。")]),t._v(" "),n("p",[t._v("如果插件文件有未捕获的异常、未经处理的承诺拒绝或语法错误，将自动捕获这些异常展示在控制台内部或者在测试运行器（Test Runner）中。")]),t._v(" "),n("p",[t._v("插件中的错误不会导致Cypress崩溃。")]),t._v(" "),n("h3",{attrs:{id:"插件文件的更改"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件文件的更改"}},[t._v("#")]),t._v(" 插件文件的更改")]),t._v(" "),n("p",[t._v("一般来说，写Node代码的时候，修改了任何文件之后，需要重启进程。")]),t._v(" "),n("p",[t._v("但是，在cypress中，将会自动监控你的插件文件或者任何的改变，然后立即生效（重新读取文件和执行导出的函数）。")]),t._v(" "),n("p",[t._v("因此，我们可以在cypress已经运行的时候，不断修改插件的代码。")]),t._v(" "),n("h2",{attrs:{id:"报告"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#报告"}},[t._v("#")]),t._v(" 报告")]),t._v(" "),n("h3",{attrs:{id:"cypress内置报告器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cypress内置报告器"}},[t._v("#")]),t._v(" cypress内置报告器")]),t._v(" "),n("p",[t._v("报告器：reporter")]),t._v(" "),n("p",[t._v("因为cypress是基于mocha构建的，所以mocha的所有报告器，cypress都可以使用。")]),t._v(" "),n("blockquote",[n("p",[t._v("Mocha是一个功能丰富的运行在Node.js和浏览器中的"),n("strong",[t._v("JavaScript测试框架")]),t._v("。")])]),t._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://mochajs.org/#reporters",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mocha内置的报告器"),n("OutboundLink")],1),t._v("：")]),t._v(" "),n("ul",[n("li",[n("p",[n("strong",[t._v("SPEC")]),t._v(" 报告器，这个是默认的报告器。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(450),alt:"image-20201210115340888"}})])]),t._v(" "),n("li",[n("p",[t._v("Dot Matrix报告器")])]),t._v(" "),n("li",[n("p",[t._v("Nyan报告器")])]),t._v(" "),n("li",[n("p",[t._v("TAP报告器")])]),t._v(" "),n("li",[n("p",[t._v("Landing Strip报告器")])]),t._v(" "),n("li",[n("p",[t._v("LIST报告器")])]),t._v(" "),n("li",[n("p",[t._v("JSON报告器")])]),t._v(" "),n("li",[n("p",[t._v("Markdown报告器")])])])])]),t._v(" "),n("p",[t._v("也可以使用下面两种mocha的第三方报告器，目前已经集成在cypress中，无需安装任何东西：")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/cypress-io/mocha-teamcity-reporter",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("teamcity")]),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/michaelleeallen/mocha-junit-reporter",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("junit")]),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("建议使用自定义的报告器或者使用第三方报告器。")]),t._v(" "),n("h3",{attrs:{id:"cypress自定义报告器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cypress自定义报告器"}},[t._v("#")]),t._v(" cypress自定义报告器")]),t._v(" "),n("h4",{attrs:{id:"自定义报告器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义报告器"}},[t._v("#")]),t._v(" 自定义报告器")]),t._v(" "),n("h5",{attrs:{id:"本地安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#本地安装"}},[t._v("#")]),t._v(" 本地安装")]),t._v(" "),n("p",[t._v("可以通过绝对路径或相对路径加载自定义的"),n("a",{attrs:{href:"https://mochajs.org/api/tutorial-custom-reporter.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mocha报告器"),n("OutboundLink")],1),t._v("，可在cypress.json配置（默认）或者"),n("a",{attrs:{href:"https://docs.cypress.io/guides/guides/command-line.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("命令行"),n("OutboundLink")],1),t._v("来指定")]),t._v(" "),n("p",[t._v("例子，加入项目结构如下：")]),t._v(" "),n("div",{staticClass:"language-txt extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("> my-project\n  > cypress\n  > src\n  > reporters\n    - custom.js\n")])])]),n("p",[t._v("可通过下面的方式指定自定义的报告器的路径。")]),t._v(" "),n("p",[t._v("配置文件（默认为cypress.json）中：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reporter"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reporters/custom.js"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("命令行中：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("cypress run --reporter reporters/custom.js\n")])])]),n("h5",{attrs:{id:"通过npm安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过npm安装"}},[t._v("#")]),t._v(" 通过npm安装")]),t._v(" "),n("p",[t._v("通过npm安装自定义的报告器时，需要指定package的名称。")]),t._v(" "),n("p",[t._v("配置文件（默认为cypress.json）：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reporter"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mochawesome"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("命令行：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("cypress run --reporter mochawesome\n")])])]),n("h4",{attrs:{id:"报告器参数设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#报告器参数设置"}},[t._v("#")]),t._v(" 报告器参数设置")]),t._v(" "),n("p",[t._v("可通过cypress.json文件或者命令行来指定报告器的参数。")]),t._v(" "),n("p",[t._v("不同的报告器，可能会有不同的参数设置，可以去参考使用的报告器的官方文档。")]),t._v(" "),n("p",[t._v("举个例子：下面的cypress.json的配置使得，将会输出"),n("code",[t._v("JUnit")]),t._v("报告到控制台并保存到一个XML文件中。")]),t._v(" "),n("p",[t._v("配置文件（默认为cypress.json）：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reporter"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"junit"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reporterOptions"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mochaFile"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"results/my-test-output.xml"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"toConsole"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("命令行：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("cypress run --reporter junit "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --reporter-options "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mochaFile=results/my-test-output.xml,toConsole=true"')]),t._v("\n")])])]),n("h4",{attrs:{id:"合并多个用例文件的测试报告"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#合并多个用例文件的测试报告"}},[t._v("#")]),t._v(" 合并多个用例文件的测试报告")]),t._v(" "),n("p",[t._v("每一个用例文件都会独立生成一个报告，每运行一个用例文件的测试报告都会覆盖之前的报告文件。")]),t._v(" "),n("p",[t._v("如果想要为每一个用例文件保存一份报告，可以在"),n("code",[t._v("mochaFile")]),t._v("的文件名中使用"),n("code",[t._v("[hash]")]),t._v("。")]),t._v(" "),n("p",[t._v("例子：下面的配置使得可以在results目录下创建独立的XML文件。")]),t._v(" "),n("p",[t._v("配置文件（默认为cypress.json）：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reporter"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"junit"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reporterOptions"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mochaFile"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"results/my-test-output-[hash].xml"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("命令行：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("cypress run --reporter junit "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --reporter-options "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mochaFile=results/my-test-output-[hash].xml"')]),t._v("\n")])])]),n("hr"),t._v(" "),n("p",[t._v("还可以使用第三方工具来合并输出的报告，比如对于"),n("a",{attrs:{href:"https://github.com/adamgruber/mochawesome",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mochawesome"),n("OutboundLink")],1),t._v(" 报告器，可以使用"),n("a",{attrs:{href:"https://github.com/antontelesh/mochawesome-merge",target:"_blank",rel:"noopener noreferrer"}},[t._v("mochawesome-merge"),n("OutboundLink")],1),t._v(" 工具来合并报告。")]),t._v(" "),n("h4",{attrs:{id:"使用多种报告器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用多种报告器"}},[t._v("#")]),t._v(" 使用多种报告器")]),t._v(" "),n("p",[t._v("在持续集成中，可能想生成junit报告和json报告，但是使用这种报告器，测试在运行时不会有额外的反馈。")]),t._v(" "),n("p",[t._v("解决办法就是使用多种报告器。建议使用npm module方式来安装：https://github.com/you54f/cypress-multi-reporters。")]),t._v(" "),n("h5",{attrs:{id:"例子1"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#例子1"}},[t._v("#")]),t._v(" "),n("a",{attrs:{href:"https://github.com/cypress-io/cypress-example-circleci-orb",target:"_blank",rel:"noopener noreferrer"}},[t._v("例子1"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("strong",[t._v("输出SPEC报告到控制台，保存junit XML文件。")])]),t._v(" "),n("p",[t._v("输出SPEC报告到控制台，保存多个Mochawesome JSON报告并合并为一个单独的报告。")]),t._v(" "),n("p",[t._v("安装额外的依赖：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev cypress-multi-reporters mocha-junit-reporter\n")])])]),n("p",[t._v("指定报告器和报告器的参数：")]),t._v(" "),n("p",[t._v("配置文件（默认为cypress.json)：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reporter"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cypress-multi-reporters"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reporterOptions"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"configFile"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reporter-config.json"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("命令行：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("cypress run --reporter cypress-multi-reporters "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --reporter-options "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("configFile")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("reporter-config.json\n")])])]),n("p",[t._v("添加一个名称为"),n("code",[t._v("reporter-config.json")]),t._v(" 的文件，文件里面定义了报告器的配置")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reporterEnabled"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"spec, mocha-junit-reporter"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mochaJunitReporterReporterOptions"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mochaFile"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cypress/results/results-[hash].xml"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("运行前，最好将报告目录cypress/results（可以是其它的）里的文件全部删除，因为每一次运行都会输出一个新的XML文件。")]),t._v(" "),n("p",[t._v("举个例子，可以在package.json中添加npm脚本来删除文件和设置特定的运行方式：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"delete:reports"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rm cypress/results/* || true"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"prereport"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run delete:reports"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"report"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cypress run --reporter cypress-multi-reporters --reporter-options configFile=reporter-config.json"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("hr"),t._v(" "),n("h5",{attrs:{id:"例子2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#例子2"}},[t._v("#")]),t._v(" "),n("a",{attrs:{href:"https://github.com/cypress-io/cypress-example-circleci-orb",target:"_blank",rel:"noopener noreferrer"}},[t._v("例子2"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("strong",[t._v("输出SPEC报告到控制台，为每个测试文件生成一个Mochawesome JSON文件，然后合并所有JSON报告为一个单独的报告")])]),t._v(" "),n("p",[t._v("安装额外的依赖：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev mochawesome mochawesome-merge mochawesome-report-generator\n")])])]),n("p",[t._v("配置文件（默认为cypress.json):")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reporter"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mochawesome"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reporterOptions"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reportDir"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cypress/results"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"overwrite"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"html"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"json"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("命令行：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("cypress run --reporter mochawesome "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --reporter-options "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("reportDir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("reporter-config.json,overwrite"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false,html"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false,json"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n")])])]),n("p",[t._v("运行后，会生成文件："),n("code",[t._v("cypress/results/mochawesome.json, cypress/results/mochawesome_001.json, ...")]),t._v("。")]),t._v(" "),n("p",[t._v("然后就可以使用"),n("a",{attrs:{href:"https://github.com/antontelesh/mochawesome-merge",target:"_blank",rel:"noopener noreferrer"}},[t._v("mochawesome-merge"),n("OutboundLink")],1),t._v("工具来合并它们了：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("npx mochawesome-merge "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cypress/results/*.json"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" mochawesome.json\n")])])]),n("p",[t._v("之后，我们会根据"),n("code",[t._v("mochawesome.json")]),t._v(" 文件，使用"),n("a",{attrs:{href:"https://github.com/adamgruber/mochawesome-report-generator",target:"_blank",rel:"noopener noreferrer"}},[t._v("mochawesome-report-generator"),n("OutboundLink")],1),t._v("工具来生成一个合并的HTML报告。")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("npx marge mochawesome.json\n")])])]),n("p",[t._v("生成的HTML报告"),n("code",[t._v("mochawesome-report/mochawesome.html")]),t._v(" 如下，包含了所有测试的结果，耗时，以及测试body等：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(451),alt:"Mochawesome HTML report"}})]),t._v(" "),n("h3",{attrs:{id:"mochawesome报告器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mochawesome报告器"}},[t._v("#")]),t._v(" mochawesome报告器")]),t._v(" "),n("p",[t._v("Mochawesome是一个为javascript测试框架定制的一个报告器，比如mocha。它运行在node.js上，并与mochawesome报告生成器"),n("a",{attrs:{href:"https://github.com/adamgruber/mochawesome-report-generator",target:"_blank",rel:"noopener noreferrer"}},[t._v("mochawesome-report-generator（marge）"),n("OutboundLink")],1),t._v(" 一起工作，生成独立的HTML/CSS报告（Marge从mochawesome获取JSON输出并生成一个完整的HTML/CSS报告）。")]),t._v(" "),n("p",[t._v("Mochawesome报告器的特点：")]),t._v(" "),n("ul",[n("li",[t._v("简单、干净、现代化")]),t._v(" "),n("li",[t._v("漂亮的图表")]),t._v(" "),n("li",[t._v("支持测试和套件的嵌套")]),t._v(" "),n("li",[t._v("可以展示before和after hooks")]),t._v(" "),n("li",[t._v("可查看测试代码")]),t._v(" "),n("li",[t._v("跟踪失败的测试")]),t._v(" "),n("li",[t._v("支持添加测试的上下文信息")]),t._v(" "),n("li",[t._v("具有过滤器（只查看想看的测试)")]),t._v(" "),n("li",[t._v("反应灵敏")]),t._v(" "),n("li",[t._v("离线观看")]),t._v(" "),n("li",[t._v("支持并行模式")])]),t._v(" "),n("p",[t._v("使用方式：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("1、安装\nnpm install --save-dev mochawesome\n")])])]),n("p",[t._v("mochawesome报告器可设置的参数：")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("Option Name")]),t._v(" "),n("th",[t._v("Type")]),t._v(" "),n("th",[t._v("Default")]),t._v(" "),n("th",[t._v("Description")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("code",[t._v("quiet")])]),t._v(" "),n("td",[t._v("boolean")]),t._v(" "),n("td",[t._v("false")]),t._v(" "),n("td",[t._v("Silence console messages")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("reportFilename")])]),t._v(" "),n("td",[t._v("string")]),t._v(" "),n("td",[t._v("mochawesome")]),t._v(" "),n("td",[t._v("Filename of saved report   "),n("em",[t._v("Applies to the generated html and json files.")])])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("html")])]),t._v(" "),n("td",[t._v("boolean")]),t._v(" "),n("td",[t._v("true")]),t._v(" "),n("td",[t._v("Save the HTML output for the test run")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("json")])]),t._v(" "),n("td",[t._v("boolean")]),t._v(" "),n("td",[t._v("true")]),t._v(" "),n("td",[t._v("Save the JSON output for the test run")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("consoleReporter")])]),t._v(" "),n("td",[t._v("string")]),t._v(" "),n("td",[t._v("spec")]),t._v(" "),n("td",[t._v("Name of mocha reporter to use for console output, or "),n("code",[t._v("none")]),t._v(" to disable console report output entirely")])])])]),t._v(" "),n("p",[t._v("mochawesome报告器生成的报告：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(452),alt:"Mochawesome Report"}})]),t._v(" "),n("h2",{attrs:{id:"数据驱动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据驱动"}},[t._v("#")]),t._v(" 数据驱动")]),t._v(" "),n("p",[t._v("第一种方式：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/// <reference types="cypress"/>')]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导入数据文件 testdata.json，并保存在 testData 变量中")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" testData "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../../data/testdata.json'")]),t._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'create a project with data-driven'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("context")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'testing'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'login'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            \n            cy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("visit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            cy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" testData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("测试数据：")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                cy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createProject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("proName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("desc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("after")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'logout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cy.logout();")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("第二种方式：动态生成测试")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'if your app uses jQuery'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mouseover'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mouseout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mouseenter'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mouseleave'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'triggers event: '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      cy\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#with-jquery'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("invoke")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'trigger'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#messages'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'contain'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'the event '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" event "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'was fired'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("第三种方式：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'参数化案例，输入不同的值'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义测试数据")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" testdatas "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"apulis"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"依瞳科技"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 前置-打开浏览器")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("before")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          cy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("visit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 参数化")]),t._v("\n    testdatas"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"百度输入框功能"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            cy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#kw'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'have.value'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("should")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'have.value'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h2",{attrs:{id:"常用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[t._v("#")]),t._v(" 常用命令")]),t._v(" "),n("h3",{attrs:{id:"查找页面元素的基本方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查找页面元素的基本方法"}},[t._v("#")]),t._v(" 查找页面元素的基本方法")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13065990.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("get()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13065990.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("find()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13065990.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("contains()"),n("OutboundLink")],1)])])])]),t._v(" "),n("h3",{attrs:{id:"查找页面元素的辅助方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查找页面元素的辅助方法"}},[t._v("#")]),t._v(" 查找页面元素的辅助方法")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"https://i.cnblogs.com/posts/edit;postId=14031640",target:"_blank",rel:"noopener noreferrer"}},[t._v("children()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://i.cnblogs.com/posts/edit;postId=14031640",target:"_blank",rel:"noopener noreferrer"}},[t._v("parents()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://i.cnblogs.com/posts/edit;postId=14031640",target:"_blank",rel:"noopener noreferrer"}},[t._v("parent()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://i.cnblogs.com/posts/edit;postId=14031640",target:"_blank",rel:"noopener noreferrer"}},[t._v("siblings()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://i.cnblogs.com/posts/edit;postId=14031640",target:"_blank",rel:"noopener noreferrer"}},[t._v("first()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://i.cnblogs.com/posts/edit;postId=14031640",target:"_blank",rel:"noopener noreferrer"}},[t._v("last()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://i.cnblogs.com/posts/edit;postId=14031640",target:"_blank",rel:"noopener noreferrer"}},[t._v("next()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://i.cnblogs.com/posts/edit;postId=14031640",target:"_blank",rel:"noopener noreferrer"}},[t._v("nextAll()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://i.cnblogs.com/posts/edit;postId=14031640",target:"_blank",rel:"noopener noreferrer"}},[t._v("nextUntil(selector)"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13065998.html#hid-iMfFd5",target:"_blank",rel:"noopener noreferrer"}},[t._v("prev()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13065998.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("prevUntil()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13065998.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("each()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13065998.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("eq()"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13065998.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("closest()"),n("OutboundLink")],1)])])])]),t._v(" "),n("h3",{attrs:{id:"点击命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#点击命令"}},[t._v("#")]),t._v(" 点击命令")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")]),t._v(" "),n("th",[t._v("作用")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13066005.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("click()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("单击")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13066005.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("dbclick()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("双击")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13066005.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("rightclick()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("右键点击")])])])]),t._v(" "),n("h3",{attrs:{id:"操作页面元素的命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#操作页面元素的命令"}},[t._v("#")]),t._v(" 操作页面元素的命令")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")]),t._v(" "),n("th",[t._v("作用")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13066011.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("type()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("输入框输入文本元素")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13140409.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("focus()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("聚焦DOM元素")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13140409.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("blur()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("DOM元素失去焦点")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13066015.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("clear()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("清空DOM元素")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13066039.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("submit()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("提交表单")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13066005.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("click()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("点击DOM元素")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13066005.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("dbclick()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("双击")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13066005.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("rightclick()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("右键点击")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13065988.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("check()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("选中单选框、复选框")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13065988.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("uncheck()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("取消选中复选框")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13066025.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("select()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("select options选项框")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13140634.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("scrollIntoView()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("将DOM元素滑动到可视区域")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13066031.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("trigger()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("DOM元素上触发事件")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13141302.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("scrollTo()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("滑动滚动条")])])])]),t._v(" "),n("h3",{attrs:{id:"获取页面全局对象的命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#获取页面全局对象的命令"}},[t._v("#")]),t._v(" 获取页面全局对象的命令")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")]),t._v(" "),n("th",[t._v("作用")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13151135.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("window()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("获取当前页面的窗口对象")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13149627.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("title()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("获取当前页面的title")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13149710.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("url()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("获取当前页面的URL")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13152064.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("location()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("获取当前页面的全局window.location对象")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://i.cnblogs.com/posts/edit-done;postId=13151943",target:"_blank",rel:"noopener noreferrer"}},[t._v("document()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("获取当前页面的全局windowd.ocument对象")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13150936.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("hash()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("获取当前页面的URL 哈希值")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13151649.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("root()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("获取根DOM元素")])])])]),t._v(" "),n("h3",{attrs:{id:"操作浏览器的命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#操作浏览器的命令"}},[t._v("#")]),t._v(" 操作浏览器的命令")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")]),t._v(" "),n("th",[t._v("作用")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13173455.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("go()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("浏览器前进、后退")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13173533.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("reload()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("刷新页面")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13174388.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("viewport()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("控制浏览器窗口的大小和方向")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13608977.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("visit()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("访问指定的 url")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13625824.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("wait()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("强制等待")])])])]),t._v(" "),n("h3",{attrs:{id:"操作上一条命令返回结果的命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#操作上一条命令返回结果的命令"}},[t._v("#")]),t._v(" 操作上一条命令返回结果的命令")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")]),t._v(" "),n("th",[t._v("作用")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13671895.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("then()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("将上一条命令返回的结果注入到下一个命令中")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13678233.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("and()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("创建一个断言。断言将自动重试，直到它们通过或超时")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13678233.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("should()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("and() 的别名")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13680832.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("invoke()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("对上一条命令的结果执行调用方法操作")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13686431.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("its()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("获取对象的属性值")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13730822.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("as()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("取别名")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14006553.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("within()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("限定命令作用域")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14006831.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("each()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("遍历当前元素")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14007116.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("spread()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("将数组内容作为单独的参数传回到回调函数")])])])]),t._v(" "),n("h3",{attrs:{id:"操作文件相关命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#操作文件相关命令"}},[t._v("#")]),t._v(" 操作文件相关命令")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")]),t._v(" "),n("th",[t._v("作用")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13671895.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("fixture()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("加载数据文件")])]),t._v(" "),n("tr",[n("td",[t._v("readFile()")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("writeFile()")]),t._v(" "),n("td")])])]),t._v(" "),n("h3",{attrs:{id:"网络相关命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#网络相关命令"}},[t._v("#")]),t._v(" 网络相关命令")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")]),t._v(" "),n("th",[t._v("作用")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13841964.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("request()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("发送 HTTP 请求")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13852941.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("route()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("路由")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13856700.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("server()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("mock 服务器")])]),t._v(" "),n("tr",[n("td",[t._v("intercept()")]),t._v(" "),n("td")])])]),t._v(" "),n("h3",{attrs:{id:"操作-cookie-相关命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#操作-cookie-相关命令"}},[t._v("#")]),t._v(" 操作 Cookie 相关命令")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")]),t._v(" "),n("th",[t._v("作用")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14014705.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("getCookies()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("获取所有 Cookies")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14014706.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("setCookie()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("设置一个 Cookie")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14014709.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("clearCookie()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("清除指定名称的 Cookie")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14014713.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("clearCookies()"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("清除所有 Cookie")])])])]),t._v(" "),n("h3",{attrs:{id:"cypress-api-命令大全"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cypress-api-命令大全"}},[t._v("#")]),t._v(" Cypress API 命令大全")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/13808675.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cypress.Commands"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14023979.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cypress.Cookies"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14030243.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cypress.config"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14031174.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cypress.env"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[t._v("Cypress.dom")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14024311.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cypress.platform"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14024356.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cypress.version"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14024183.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cypress.arch"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14024741.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cypress.spec"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14024553.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cypress.browser"),n("OutboundLink")],1)])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://www.cnblogs.com/poloyy/p/14025013.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cypress.log"),n("OutboundLink")],1)])])])]),t._v(" "),n("h2",{attrs:{id:"练习cypress"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#练习cypress"}},[t._v("#")]),t._v(" 练习cypress")]),t._v(" "),n("p",[t._v("下载github的开源：https://github.com/cypress-io/cypress-realworld-app")])])}),[],!1,null,null,null);s.default=e.exports},447:function(t,s,a){t.exports=a.p+"assets/img/image-20201218000023216.312ff71c.png"},448:function(t,s,a){t.exports=a.p+"assets/img/plugin-configuration.15548a6c.15548a6c.png"},449:function(t,s,a){t.exports=a.p+"assets/img/chrome-browsers-only.fac48f59.fac48f59.png"},450:function(t,s,a){t.exports=a.p+"assets/img/image-20201210115340888.26bc3756.png"},451:function(t,s,a){t.exports=a.p+"assets/img/mochawesome-report.accfcbf0.accfcbf0.png"},452:function(t,s,a){t.exports=a.p+"assets/img/marge-report-1.0.1.e5de0632.png"}}]);