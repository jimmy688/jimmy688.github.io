<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>待解决问题（TODO） | 个人博客 | JiiiiG</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="自是年少，韶华倾负">
    
    <link rel="preload" href="/assets/css/0.styles.420b7c1f.css" as="style"><link rel="preload" href="/assets/js/app.fdd7a502.js" as="script"><link rel="preload" href="/assets/js/16.375b747e.js" as="script"><link rel="preload" href="/assets/js/24.69816497.js" as="script"><link rel="prefetch" href="/assets/js/10.bbd38b9e.js"><link rel="prefetch" href="/assets/js/11.f49fc7d3.js"><link rel="prefetch" href="/assets/js/12.c5d97aa1.js"><link rel="prefetch" href="/assets/js/13.426d0224.js"><link rel="prefetch" href="/assets/js/14.1f257a58.js"><link rel="prefetch" href="/assets/js/15.be29bb6a.js"><link rel="prefetch" href="/assets/js/17.d02cdd8b.js"><link rel="prefetch" href="/assets/js/18.5d2371a4.js"><link rel="prefetch" href="/assets/js/19.038919a3.js"><link rel="prefetch" href="/assets/js/2.d6257727.js"><link rel="prefetch" href="/assets/js/20.b3582e09.js"><link rel="prefetch" href="/assets/js/21.0c1e826b.js"><link rel="prefetch" href="/assets/js/22.91bff1a5.js"><link rel="prefetch" href="/assets/js/23.faacea60.js"><link rel="prefetch" href="/assets/js/25.c9fcaa62.js"><link rel="prefetch" href="/assets/js/26.d28c3abe.js"><link rel="prefetch" href="/assets/js/27.1518da7d.js"><link rel="prefetch" href="/assets/js/28.748a5581.js"><link rel="prefetch" href="/assets/js/29.775019f1.js"><link rel="prefetch" href="/assets/js/3.141002a4.js"><link rel="prefetch" href="/assets/js/30.74e7c570.js"><link rel="prefetch" href="/assets/js/31.190b11f2.js"><link rel="prefetch" href="/assets/js/32.d8f4f116.js"><link rel="prefetch" href="/assets/js/33.c489bc81.js"><link rel="prefetch" href="/assets/js/34.db609d51.js"><link rel="prefetch" href="/assets/js/35.ad3402e6.js"><link rel="prefetch" href="/assets/js/36.45f11923.js"><link rel="prefetch" href="/assets/js/37.b47e0576.js"><link rel="prefetch" href="/assets/js/38.58b934a2.js"><link rel="prefetch" href="/assets/js/39.e4d6bcdf.js"><link rel="prefetch" href="/assets/js/4.e9b44388.js"><link rel="prefetch" href="/assets/js/40.555106bc.js"><link rel="prefetch" href="/assets/js/41.4387ceb1.js"><link rel="prefetch" href="/assets/js/42.9bd4aea0.js"><link rel="prefetch" href="/assets/js/43.587e7966.js"><link rel="prefetch" href="/assets/js/44.80285763.js"><link rel="prefetch" href="/assets/js/45.f978da77.js"><link rel="prefetch" href="/assets/js/46.d93e3f2e.js"><link rel="prefetch" href="/assets/js/47.c15bd2aa.js"><link rel="prefetch" href="/assets/js/48.cb55fa72.js"><link rel="prefetch" href="/assets/js/49.d0f4e454.js"><link rel="prefetch" href="/assets/js/5.b90b80cb.js"><link rel="prefetch" href="/assets/js/50.112e8260.js"><link rel="prefetch" href="/assets/js/51.a66bcd03.js"><link rel="prefetch" href="/assets/js/52.0c7cbfb1.js"><link rel="prefetch" href="/assets/js/53.67ef240b.js"><link rel="prefetch" href="/assets/js/54.2c2d082d.js"><link rel="prefetch" href="/assets/js/55.88f19a20.js"><link rel="prefetch" href="/assets/js/56.c726e920.js"><link rel="prefetch" href="/assets/js/57.eaee47c5.js"><link rel="prefetch" href="/assets/js/58.ac15a3ac.js"><link rel="prefetch" href="/assets/js/59.64bdc849.js"><link rel="prefetch" href="/assets/js/6.7eea74ff.js"><link rel="prefetch" href="/assets/js/7.a1370e98.js"><link rel="prefetch" href="/assets/js/8.2e898240.js"><link rel="prefetch" href="/assets/js/9.a2439994.js">
    <link rel="stylesheet" href="/assets/css/0.styles.420b7c1f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">个人博客 | JiiiiG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/linux/linux常用命令/01linux常用命令01.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><span class="title">大数据</span> <span class="arrow down"></span></button> <button type="button" aria-label="大数据" class="mobile-dropdown-title"><span class="title">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hadoop/01hadoop环境搭建/01搭建hadoop集群.html" class="nav-link">
  hadoop
</a></li><li class="dropdown-item"><!----> <a href="/hbase/hbase.html" class="nav-link">
  hbase
</a></li><li class="dropdown-item"><!----> <a href="/flink/flink.html" class="nav-link">
  flink
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程语言" class="mobile-dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/scala/.html" class="nav-link">
  java
</a></li></ul></div></div> <a href="https://github.com/MaLunan/press" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/linux/linux常用命令/01linux常用命令01.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><span class="title">大数据</span> <span class="arrow down"></span></button> <button type="button" aria-label="大数据" class="mobile-dropdown-title"><span class="title">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hadoop/01hadoop环境搭建/01搭建hadoop集群.html" class="nav-link">
  hadoop
</a></li><li class="dropdown-item"><!----> <a href="/hbase/hbase.html" class="nav-link">
  hbase
</a></li><li class="dropdown-item"><!----> <a href="/flink/flink.html" class="nav-link">
  flink
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程语言" class="mobile-dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/scala/.html" class="nav-link">
  java
</a></li></ul></div></div> <a href="https://github.com/MaLunan/press" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="待解决问题-todo"><a href="#待解决问题-todo" class="header-anchor">#</a> 待解决问题（TODO）</h2> <ol><li>scala数组可以存放不同类型的数据吗？如：val arr=Array(&quot;hello&quot;,1,3.5,Test)</li> <li></li></ol> <h2 id="scala简介"><a href="#scala简介" class="header-anchor">#</a> scala简介</h2> <ul><li>scala是运行在 JVM 上的多范式编程语言，同时支持==面向对象==和==面向函数编程==</li> <li>早期scala刚出现的时候，并没有怎么引起重视，随着==Spark==和==Kafka==这样基于scala的大数据框架的兴起，scala逐步进入大数据开发者的眼帘。scala的主要优势是它的表达性。</li> <li>官网地址: http://www.scala-lang.org</li></ul> <p>为什么要使用scala?</p> <ul><li>开发大数据应用程序（Spark程序、Flink程序）</li> <li>表达能力强，一行代码抵得上Java多行，开发速度快</li> <li>兼容Java，可以访问庞大的Java类库</li></ul> <p><img src="/assets/img/1568095858219.479dc69c.png" alt="1568095858219"></p> <h2 id="scala开发环境安装"><a href="#scala开发环境安装" class="header-anchor">#</a> scala开发环境安装</h2> <p>学习如何编写scala代码之前，需要先安装scala编译器以及开发工具。</p> <p>scala程序运行需要依赖于Java类库，必须要有**==Java运行环境==**，scala才能正确执行</p> <p><strong>要编译运行scala程序需要</strong>：</p> <ul><li>==jdk  ( jvm )==</li> <li>==scala编译器（scala SDK）==</li></ul> <p>Java程序编译执行流程</p> <p><img src="/assets/img/1556551819121.2cca5996.png" alt="1556551819121"></p> <p>Scala程序编译执行流程</p> <p><img src="/assets/img/1556551904384.44618d6b.png" alt="1556551904384"></p> <h4 id="第一步-安装jdk"><a href="#第一步-安装jdk" class="header-anchor">#</a> 第一步：安装JDK</h4> <div class="language- extra-class"><pre class="language-text"><code>安装JDK 1.8 64位版本，并配置好环境变量
</code></pre></div><h4 id="第二步-安装scala-sdk"><a href="#第二步-安装scala-sdk" class="header-anchor">#</a> 第二步：安装scala SDK</h4> <h6 id="下载安装包sdk"><a href="#下载安装包sdk" class="header-anchor">#</a> 下载安装包sdk</h6> <div class="language- extra-class"><pre class="language-text"><code>scala SDK是scala语言的编译器，要开发scala程序，必须要先安装SDK
</code></pre></div><p>安装包下载地址：https://www.scala-lang.org/download/2.11.8.html</p> <p>所有版本的安装包的下载地址：https://www.scala-lang.org/download/all.html</p> <p>下载安装包: scala-2.11.8.zip</p> <p><img src="/assets/img/scala-2.11.8.79692f09.png" alt="scala-sdk"></p> <h6 id="解压安装包"><a href="#解压安装包" class="header-anchor">#</a> 解压安装包</h6> <p>将下载好的安装包解压到没有空格没有中文的路径，我们的安装路径是：D:\scalaInstall</p> <img src="scala.assets/image-20200410180113337.png" alt="image-20200410180113337" style="zoom:67%;"> <h6 id="配置环境变量"><a href="#配置环境变量" class="header-anchor">#</a> 配置环境变量</h6> <p>新建系统变量：</p> <img src="scala.assets/image-20200410180356247.png" alt="image-20200410180356247" style="zoom:67%;"> <p>修改变量Path:</p> <img src="scala.assets/image-20200410180546044.png" alt="image-20200410180546044" style="zoom:67%;"> <h6 id="验证sdk是否安装成功"><a href="#验证sdk是否安装成功" class="header-anchor">#</a> 验证sdk是否安装成功</h6> <p>cmd--&gt;输入scala，回车</p> <div class="language-sh extra-class"><pre class="language-sh"><code>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span><span class="token number">9746</span><span class="token operator"><span class="token file-descriptor important">4</span>&gt;</span>scala
Welcome to Scala <span class="token number">2.11</span>.8 <span class="token punctuation">(</span>Java HotSpot<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> <span class="token number">64</span>-Bit Server VM, Java <span class="token number">1.8</span>.0_201<span class="token punctuation">)</span>.
Type <span class="token keyword">in</span> expressions <span class="token keyword">for</span> evaluation. Or try :help.

scala<span class="token operator">&gt;</span>
</code></pre></div><h4 id="第三步-安装idea的scala插件"><a href="#第三步-安装idea的scala插件" class="header-anchor">#</a> 第三步：安装IDEA的scala插件</h4> <p>IDEA默认是不支持scala程序开发，所以需要来安装scala插件来支持scala语言。安装scala插件可以通过在线安装，也可以通过离线安装。我们之前已经进行过在线安装了，不用再安装，下列展示了离线安装的方法。</p> <h6 id="查看idea版本"><a href="#查看idea版本" class="header-anchor">#</a> 查看IDEA版本</h6> <p>打开IDEA，通过help查看版本，我们的版本是2019.3.1</p> <img src="scala.assets/image-20200410180855619.png" alt="image-20200410180855619" style="zoom:67%;"> <h6 id="到idea官网下载对应版本的idea-scala插件"><a href="#到idea官网下载对应版本的idea-scala插件" class="header-anchor">#</a> 到IDEA官网下载对应版本的<a href="http://plugins.jetbrains.com/plugin/1347-scala" target="_blank" rel="noopener noreferrer">IDEA scala插件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h6> <p>一定要下载IDEA版本一致的scala插件，只需要保证主次版本一致即可，即2019.3</p> <p>查看scala的所有版本的地址为：https://plugins.jetbrains.com/plugin/1347-scala/versions</p> <p>我自己的IDEA对应的sacla版本下载地址：https://plugins.jetbrains.com/plugin/1347-scala/update/74711</p> <img src="scala.assets/image-20200410182625801.png" alt="image-20200410182625801" style="zoom:50%;"> <h6 id="本地安装插件"><a href="#本地安装插件" class="header-anchor">#</a> 本地安装插件</h6> <p>点击File ，再点击Settings</p> <p><img src="/assets/img/1568099639135.43beaa9e.png" alt="1568099639135"></p> <p><img src="/assets/img/image-20200410183223314.4871cba0.png" alt="image-20200410183223314"></p> <p><img src="/assets/img/1568099955417.b401acf6.png" alt="1568099955417"></p> <p>添加scala插件后，重启IDEA</p> <h6 id="验证插件是否安装成功"><a href="#验证插件是否安装成功" class="header-anchor">#</a> 验证插件是否安装成功</h6> <p>create project,有下列选择时，表示成功安装。</p> <p><img src="/assets/img/image-20200410183825825.01d7b5eb.png" alt="image-20200410183825825"></p> <h6 id="创建idea-scala-project"><a href="#创建idea-scala-project" class="header-anchor">#</a> 创建IDEA scala project</h6> <p><img src="/assets/img/image-20200410184231258.a819ccc5.png" alt="image-20200410184231258"></p> <h2 id="scala的repl交互式解释器"><a href="#scala的repl交互式解释器" class="header-anchor">#</a> scala的REPL交互式解释器</h2> <ul><li><p>Scala提供的最重要的一个工具是交互模式（REPL）。==REPL是一个交互式解释器==，可以即时编译、运行代码并返回结果，方便前期做学习和测试</p></li> <li><p>REPL</p> <ul><li>R(read)、E(evaluate) 、P（print）、L（loop），即读取、求值、打印、循环。</li></ul></li> <li><p>要启动scala解释器，只需要以下几步：</p> <ul><li>按住<code>windows键 + r</code></li> <li>输入<code>scala</code>即可</li></ul> <p><img src="/assets/img/1568101144953.c23da436.png" alt="1568101144953"></p></li> <li><p>退出scala解释器</p> <ul><li>使用 ==:quit== 就可以了</li></ul></li></ul> <h2 id="scala中声明变量"><a href="#scala中声明变量" class="header-anchor">#</a> scala中声明变量</h2> <h5 id="声明变量语法"><a href="#声明变量语法" class="header-anchor">#</a> 声明变量语法：</h5> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> 变量名称<span class="token operator">:</span>变量类型 <span class="token operator">=</span> 初始值
</code></pre></div><p>val定义的是<strong>不可重新赋值</strong>的变量(值不可修改)</p> <p>var定义的是<strong>可重新赋值</strong>的变量(值可以修改)</p> <p>ps：</p> <ul><li>scala中声明变量是变量名称在前，变量类型在后，跟java是正好相反</li> <li>scala的语句最后不需要添加分号</li></ul> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//使用val声明变量,相当于java中的final修饰,不能在指向其他的数据了</span>
 <span class="token keyword">val</span>  a<span class="token operator">:</span><span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">10</span>

<span class="token comment">//使用var声明变量,后期可以被修改重新赋值</span>
 <span class="token keyword">var</span>  b<span class="token operator">:</span><span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">20</span>	 
 b<span class="token operator">=</span><span class="token number">100</span>

<span class="token comment">//scala中的变量的类型可以显式的声明,也可以不声明,如果不显式的声明这会根据变量的值来推断出来变量的类型(scala支持类型推断)</span>
 <span class="token keyword">val</span> c <span class="token operator">=</span> <span class="token number">20</span>
</code></pre></div><p><img src="/assets/img/1568103524126.1a5421be.png" alt="1568103524126"></p> <h5 id="惰性变量"><a href="#惰性变量" class="header-anchor">#</a> 惰性变量</h5> <p>Scala中使用==关键字lazy==来定义惰性变量，实现延迟加载(懒加载)。</p> <p>惰性变量只能是不可变变量，并且只有在调用惰性变量时，才会去实例化这个变量。</p> <p>语法格式:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">lazy</span> <span class="token keyword">val</span> 变量名 <span class="token operator">=</span> 表达式
</code></pre></div><p><img src="/assets/img/1568104205830.d6715461.png" alt="1568104205830"></p> <p>​</p> <h2 id="scala中数据类型"><a href="#scala中数据类型" class="header-anchor">#</a> scala中数据类型</h2> <p>scala中的类型绝大多数和Java一样，scala的基本数据类型如下，本质上都是一个类。</p> <table><thead><tr><th>基础类型</th> <th>类型说明</th></tr></thead> <tbody><tr><td>Byte</td> <td>8位带符号整数</td></tr> <tr><td>Short</td> <td>16位带符号整数</td></tr> <tr><td><strong>Int</strong></td> <td>32位带符号整数</td></tr> <tr><td>Long</td> <td>64位带符号整数</td></tr> <tr><td>Char</td> <td>16位无符号Unicode字符</td></tr> <tr><td>String</td> <td>Char类型的序列（字符串）</td></tr> <tr><td>Float</td> <td>32位单精度浮点数</td></tr> <tr><td>Double</td> <td>64位双精度浮点数</td></tr> <tr><td>Boolean</td> <td>true或false</td></tr></tbody></table> <p><strong>scala类型与Java的区别：</strong></p> <ol><li>scala中所有的类型都使用大写字母开头</li> <li>整形使用Int而不是Integer</li> <li>scala中定义变量可以不写类型，让scala编译器自动推断</li></ol> <p><strong>scala类型的层次结构：</strong></p> <p><img src="/assets/img/1556592270468.827ba8f1.png" alt="1556592270468"></p> <table><thead><tr><th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>Any</td> <td><strong>所有类型</strong>的父类，,它有两个子类AnyRef与AnyVal</td></tr> <tr><td>AnyVal</td> <td><strong>所有数值类型</strong>的父类</td></tr> <tr><td>AnyRef</td> <td>所有对象类型（引用类型）的父类</td></tr> <tr><td>Unit</td> <td>表示空，Unit是AnyVal的子类，它只有一个实例值，即（），它类似于Java中的void，但scala要比Java更加面向对象</td></tr> <tr><td>Null</td> <td>Null是AnyRef的子类，也就是说它是所有引用类型的子类。它的实例是null,   可以将null赋值给任何对象类型</td></tr> <tr><td>Nothing</td> <td>所有类型的<strong>子类</strong>不能直接创建该类型实例，某个方法抛出异常时，返回的就是Nothing类型，因为Nothing是所有类的子类，那么它可以赋值为任何类型</td></tr></tbody></table> <h2 id="scala中的条件表达式"><a href="#scala中的条件表达式" class="header-anchor">#</a> scala中的条件表达式</h2> <p>scala中的表达式都是有值的，条件表达式就是if表达式，if表达式可以根据给定的条件是否满足，根据条件的结果（真或假）决定执行对应的操作。scala条件表达式的语法和Java一样。</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//定义变量x</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> x <span class="token operator">=</span><span class="token number">1</span>
x<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">//if表达式</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> y <span class="token operator">=</span><span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">1</span> <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span>
y<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">//支持混合类型表达式</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> z<span class="token operator">=</span><span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span> <span class="token keyword">else</span> <span class="token string">&quot;error&quot;</span>
z<span class="token operator">:</span> <span class="token builtin">Any</span> <span class="token operator">=</span> error  <span class="token comment">// z的类型由混合类型的共同父类决定</span>

<span class="token comment">//缺失else 相当于 if(x&gt;2) 1 else ()</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> m<span class="token operator">=</span><span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span>
m<span class="token operator">:</span> <span class="token builtin">AnyVal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//scala中有个Unit类，用作不返回任何结果的方法的结果类型,相当于Java中的void，Unit只有一个实例值，写成()</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> n<span class="token operator">=</span><span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span> <span class="token keyword">else</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
n<span class="token operator">:</span> <span class="token builtin">AnyVal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//if(xx) else if(xx) val </span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> k<span class="token operator">=</span><span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">1</span>
k<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">1</span>
</code></pre></div><h2 id="scala中的块表达式"><a href="#scala中的块表达式" class="header-anchor">#</a> scala中的块表达式</h2> <p>定义变量时用 {} 包含一系列表达式，其中块的最后一个表达式的值就是块的值。</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span> x<span class="token operator">=</span><span class="token number">0</span> 
<span class="token keyword">val</span> result<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token keyword">val</span> y<span class="token operator">=</span>x<span class="token operator">+</span><span class="token number">10</span>
  <span class="token keyword">val</span> z<span class="token operator">=</span>y<span class="token operator">+</span><span class="token string">&quot;-hello&quot;</span>  
  <span class="token keyword">val</span> m<span class="token operator">=</span>z<span class="token operator">+</span><span class="token string">&quot;-kaikeba&quot;</span>
    <span class="token string">&quot;over&quot;</span>    <span class="token comment">//相当于return &quot;over&quot;</span>
<span class="token punctuation">}</span>

result<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> over
<span class="token comment">//result的值就是块表达式的结果    </span>
<span class="token comment">//后期一个方法的返回值不需要加上return,把要返回的结果放在方法的最后一行就可以了 </span>
</code></pre></div><p>复制多行代码到scala REPL解释器中的方法是：</p> <p>写好多行代码，复制代码，然后在scala解释器中先输入 ==:paste==，回车,右键即可粘贴,之后按==ctrl+d==执行。</p> <p><img src="/assets/img/1568108241418.573e8b16.png" alt="1568108241418"></p> <h2 id="scala循环"><a href="#scala循环" class="header-anchor">#</a> scala循环</h2> <p>在scala中，可以使用for和while，但一般推荐使用for表达式，因为for表达式语法更简洁</p> <h4 id="for循环"><a href="#for循环" class="header-anchor">#</a> for循环</h4> <p>语法结构：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> 表达式<span class="token operator">/</span>数组<span class="token operator">/</span>集合<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//表达式</span>
<span class="token punctuation">}</span>
</code></pre></div><p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//简单的for循环</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> nums<span class="token operator">=</span> <span class="token number">1</span> to <span class="token number">10</span>
nums<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Range<span class="token punctuation">.</span>Inclusive <span class="token operator">=</span> Range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> nums<span class="token punctuation">)</span> println<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">4</span>
<span class="token number">5</span>
<span class="token number">6</span>
<span class="token number">7</span>
<span class="token number">8</span>
<span class="token number">9</span>
<span class="token number">10</span>

</code></pre></div><p>双重for循环</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//双重for循环</span>
scala<span class="token operator">&gt;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token number">3</span><span class="token punctuation">;</span> j <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token number">3</span><span class="token punctuation">)</span> println<span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token number">10</span><span class="token operator">+</span>j<span class="token punctuation">)</span>
<span class="token number">11</span>
<span class="token number">12</span>
<span class="token number">13</span>
<span class="token number">21</span>
<span class="token number">22</span>
<span class="token number">23</span>
<span class="token number">31</span>
<span class="token number">32</span>
<span class="token number">33</span>

<span class="token comment">//双重for循环打印99乘法表</span>
<span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token number">9</span><span class="token punctuation">;</span> j <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token namespace">i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    print<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token string">&quot;*&quot;</span><span class="token operator">+</span>j<span class="token operator">+</span><span class="token string">&quot;=&quot;</span><span class="token operator">+</span>i<span class="token operator">*</span>j<span class="token operator">+</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">==</span>j<span class="token punctuation">)</span><span class="token punctuation">{</span>
       println<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>    
<span class="token punctuation">}</span> 

<span class="token number">1</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token number">2</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">2</span>   <span class="token number">2</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">4</span>
<span class="token number">3</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">3</span>   <span class="token number">3</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">6</span>   <span class="token number">3</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">9</span>
<span class="token number">4</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">4</span>   <span class="token number">4</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">8</span>   <span class="token number">4</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">12</span>  <span class="token number">4</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">16</span>
<span class="token number">5</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">5</span>   <span class="token number">5</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">10</span>  <span class="token number">5</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">15</span>  <span class="token number">5</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">20</span>  <span class="token number">5</span><span class="token operator">*</span><span class="token number">5</span><span class="token operator">=</span><span class="token number">25</span>
<span class="token number">6</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">6</span>   <span class="token number">6</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">12</span>  <span class="token number">6</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">18</span>  <span class="token number">6</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">24</span>  <span class="token number">6</span><span class="token operator">*</span><span class="token number">5</span><span class="token operator">=</span><span class="token number">30</span>  <span class="token number">6</span><span class="token operator">*</span><span class="token number">6</span><span class="token operator">=</span><span class="token number">36</span>
<span class="token number">7</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">7</span>   <span class="token number">7</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">14</span>  <span class="token number">7</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">21</span>  <span class="token number">7</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">28</span>  <span class="token number">7</span><span class="token operator">*</span><span class="token number">5</span><span class="token operator">=</span><span class="token number">35</span>  <span class="token number">7</span><span class="token operator">*</span><span class="token number">6</span><span class="token operator">=</span><span class="token number">42</span>  <span class="token number">7</span><span class="token operator">*</span><span class="token number">7</span><span class="token operator">=</span><span class="token number">49</span>
<span class="token number">8</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">8</span>   <span class="token number">8</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">16</span>  <span class="token number">8</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">24</span>  <span class="token number">8</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">32</span>  <span class="token number">8</span><span class="token operator">*</span><span class="token number">5</span><span class="token operator">=</span><span class="token number">40</span>  <span class="token number">8</span><span class="token operator">*</span><span class="token number">6</span><span class="token operator">=</span><span class="token number">48</span>  <span class="token number">8</span><span class="token operator">*</span><span class="token number">7</span><span class="token operator">=</span><span class="token number">56</span>  <span class="token number">8</span><span class="token operator">*</span><span class="token number">8</span><span class="token operator">=</span><span class="token number">64</span>
<span class="token number">9</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">9</span>   <span class="token number">9</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">18</span>  <span class="token number">9</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">27</span>  <span class="token number">9</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">36</span>  <span class="token number">9</span><span class="token operator">*</span><span class="token number">5</span><span class="token operator">=</span><span class="token number">45</span>  <span class="token number">9</span><span class="token operator">*</span><span class="token number">6</span><span class="token operator">=</span><span class="token number">54</span>  <span class="token number">9</span><span class="token operator">*</span><span class="token number">7</span><span class="token operator">=</span><span class="token number">63</span>  <span class="token number">9</span><span class="token operator">*</span><span class="token number">8</span><span class="token operator">=</span><span class="token number">72</span>  <span class="token number">9</span><span class="token operator">*</span><span class="token number">9</span><span class="token operator">=</span><span class="token number">81</span>
</code></pre></div><p>守卫: 在for表达式中可以添加if判断语句，这个if判断就称为守卫</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//语法结构</span>
<span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> 达式<span class="token operator">/</span>数组<span class="token operator">/</span>集合 <span class="token keyword">if</span> 表达式<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 表达式</span>
<span class="token punctuation">}</span>

scala<span class="token operator">&gt;</span> <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token number">10</span> <span class="token keyword">if</span> i <span class="token operator">&gt;</span><span class="token number">5</span><span class="token punctuation">)</span> println<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token number">6</span>
<span class="token number">7</span>
<span class="token number">8</span>
<span class="token number">9</span>
<span class="token number">10</span>

</code></pre></div><p>for推导式: 在for循环体中，可以使用yield表达式构建出一个集合，我们把使用yield的for表达式称之为推导式</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// for推导式：for表达式中以yield开始，该for表达式会构建出一个集合</span>

<span class="token keyword">val</span> v <span class="token operator">=</span> <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">yield</span> i <span class="token operator">*</span> <span class="token number">10</span>
v<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>IndexedSeq<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Vector<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="while循环"><a href="#while循环" class="header-anchor">#</a> while循环</h4> <p>scala中while循环和Java中是一致的</p> <p>语法结构</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">while</span><span class="token punctuation">(</span>返回值为布尔类型的表达式<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//表达式</span>
<span class="token punctuation">}</span>
</code></pre></div><p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span>
x<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">10</span>

scala<span class="token operator">&gt;</span> <span class="token keyword">while</span><span class="token punctuation">(</span>x <span class="token operator">&gt;</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token operator">|</span> println<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
     <span class="token operator">|</span> x <span class="token operator">-=</span> <span class="token number">1</span>
     <span class="token operator">|</span> <span class="token punctuation">}</span>
<span class="token number">10</span>
<span class="token number">9</span>
<span class="token number">8</span>
<span class="token number">7</span>
<span class="token number">6</span>
</code></pre></div><h2 id="scala方法和函数"><a href="#scala方法和函数" class="header-anchor">#</a> scala方法和函数</h2> <h4 id="方法"><a href="#方法" class="header-anchor">#</a> 方法</h4> <h6 id="语法"><a href="#语法" class="header-anchor">#</a> 语法：</h6> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> methodName <span class="token punctuation">(</span>参数名<span class="token operator">:</span>参数类型<span class="token punctuation">,</span> 参数名<span class="token operator">:</span>参数类型<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">return</span> <span class="token keyword">type</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 方法体：一系列的代码</span>
<span class="token punctuation">}</span>
</code></pre></div><h6 id="说明"><a href="#说明" class="header-anchor">#</a> 说明：</h6> <ol><li>参数列表的参数类型不能省略</li> <li>返回值类型可以省略，由scala编译器自动推断</li> <li>返回值可以不写return，默认就是{}块表达式的值</li></ol> <h6 id="示例"><a href="#示例" class="header-anchor">#</a> 示例：</h6> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">def</span> add<span class="token punctuation">(</span>a<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">,</span>b<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token operator">=</span> a<span class="token operator">+</span>b
add<span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token builtin">Int</span>

scala<span class="token operator">&gt;</span> add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
res8<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">3</span>
</code></pre></div><h6 id="注意"><a href="#注意" class="header-anchor">#</a> 注意:</h6> <p>如果定义递归方法，不能省略返回值类型</p> <p>示例：定义递归方法（求阶乘）</p> <p>10 * 9 * 8 * 7 * 6 * ... * 1</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">def</span> m1<span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">{</span>
     <span class="token operator">|</span> <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span>
     <span class="token operator">|</span> <span class="token keyword">else</span> x <span class="token operator">*</span> m1<span class="token punctuation">(</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
     <span class="token operator">|</span> <span class="token punctuation">}</span>
<span class="token generics"><span class="token punctuation">&lt;</span>console<span class="token punctuation">&gt;</span></span><span class="token operator">:</span><span class="token number">14</span><span class="token operator">:</span> error<span class="token operator">:</span> recursive method m1 needs result <span class="token keyword">type</span>
       <span class="token keyword">else</span> x <span class="token operator">*</span> m1<span class="token punctuation">(</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token operator">^</span>

scala<span class="token operator">&gt;</span> <span class="token keyword">def</span> m1<span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">Int</span><span class="token operator">=</span><span class="token punctuation">{</span>
     <span class="token operator">|</span> <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span>
     <span class="token operator">|</span> <span class="token keyword">else</span> x <span class="token operator">*</span> m1<span class="token punctuation">(</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
     <span class="token operator">|</span> <span class="token punctuation">}</span>
m1<span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token builtin">Int</span>

scala<span class="token operator">&gt;</span> m1<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
res9<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">3628800</span>
</code></pre></div><h6 id="方法的参数"><a href="#方法的参数" class="header-anchor">#</a> 方法的参数</h6> <p><strong>默认参数:</strong> 在定义方法时可以给参数定义一个默认值。</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//1. 定义一个计算两个值相加的方法，这两个值默认为0</span>
<span class="token comment">//2. 调用该方法</span>

scala<span class="token operator">&gt;</span> <span class="token keyword">def</span> add<span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> x <span class="token operator">+</span> y
add<span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token builtin">Int</span>

scala<span class="token operator">&gt;</span> add<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
res14<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">10</span>

scala<span class="token operator">&gt;</span> add<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
res15<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">30</span>

scala<span class="token operator">&gt;</span> add<span class="token punctuation">(</span><span class="token punctuation">)</span>
res16<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre></div><p>**带名参数:**在调用方法时，可以指定参数的名称来进行调用。</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">def</span> add<span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> x <span class="token operator">+</span> y
add<span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token builtin">Int</span>

scala<span class="token operator">&gt;</span> add<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
res16<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">1</span>
</code></pre></div><p><strong>变长参数:</strong> 如果方法的参数是不固定的，可以定义一个方法的参数是变长参数。</p> <p>语法格式：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> 方法名<span class="token punctuation">(</span>参数名<span class="token operator">:</span>参数类型<span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">:</span>返回值类型 <span class="token operator">=</span> <span class="token punctuation">{</span>
    方法体
<span class="token punctuation">}</span>

<span class="token comment">//在参数类型后面加一个*号，表示参数可以是0个或者多个</span>
</code></pre></div><p>示例</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">def</span> sum1<span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">{</span>x<span class="token punctuation">.</span>sum<span class="token punctuation">}</span>
sum1<span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token builtin">Int</span>

scala<span class="token operator">&gt;</span> sum1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span>
res17<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">16</span>



<span class="token comment">//==========参数化================</span>
scala<span class="token operator">&gt;</span> sum1<span class="token punctuation">(</span><span class="token number">1</span> to <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token generics"><span class="token punctuation">&lt;</span>console<span class="token punctuation">&gt;</span></span><span class="token operator">:</span><span class="token number">14</span><span class="token operator">:</span> error<span class="token operator">:</span> <span class="token keyword">type</span> mismatch<span class="token punctuation">;</span>
 found   <span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Range<span class="token punctuation">.</span>Inclusive
 required<span class="token operator">:</span> <span class="token builtin">Int</span>
       sum1<span class="token punctuation">(</span><span class="token number">1</span> to <span class="token number">4</span><span class="token punctuation">)</span>
              <span class="token operator">^</span>

scala<span class="token operator">&gt;</span> sum1<span class="token punctuation">(</span><span class="token number">1</span> to <span class="token number">4</span><span class="token operator">:</span>_<span class="token operator">*</span><span class="token punctuation">)</span>
res19<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">10</span>
<span class="token comment">//将1 to 4变成参数</span>
</code></pre></div><h4 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h4> <p>scala支持函数式编程，将来编写Spark/Flink程序中，会大量使用到函数</p> <p>语法：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span> 函数变量名 <span class="token operator">=</span> <span class="token punctuation">(</span>参数名<span class="token operator">:</span>参数类型<span class="token punctuation">,</span> 参数名<span class="token operator">:</span>参数类型<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> 函数体
</code></pre></div><p>注意</p> <ul><li>函数是一个对象（变量）</li> <li>类似于方法，函数也有输入参数和返回值</li> <li>函数定义不需要使用def定义</li> <li>无需指定返回值类型</li> <li>函数体可以有花括号{}</li></ul> <p>演示</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> a <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> y
a<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token generics"><span class="token punctuation">&lt;</span>function2<span class="token punctuation">&gt;</span></span>

scala<span class="token operator">&gt;</span> a<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
res3<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">3</span>
</code></pre></div><p>一个函数没有赋予一个变量，则称为匿名函数，后期再实际开发代码的时候，基本上都是使用匿名函数,如：</p> <div class="language- extra-class"><pre class="language-text"><code>(x:Int,y:Int)=&gt;x+y
</code></pre></div><h4 id="方法和函数的区别"><a href="#方法和函数的区别" class="header-anchor">#</a> 方法和函数的区别</h4> <ol><li>方法是隶属于类或者对象的，在运行时，它是加载到JVM的方法区中</li> <li>可以将函数对象赋值给一个变量，在运行时，它是加载到JVM的堆内存中</li> <li>函数是一个对象，继承自FunctionN，函数对象有apply，curried，toString，tupled这些方法，而方法则没有</li></ol> <h4 id="方法转换为函数"><a href="#方法转换为函数" class="header-anchor">#</a> 方法转换为函数</h4> <ul><li><p>有时候需要将方法转换为函数，作为变量传递，就需要将方法转换为函数</p></li> <li><p>使用<code>_</code>即可将方法转换为函数</p></li> <li><p>示例</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">def</span> add<span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">,</span>y<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">=</span>x<span class="token operator">+</span>y
add<span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token builtin">Int</span>

scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> a <span class="token operator">=</span> add _  <span class="token comment">//add与_之间是有一个空格的！！！</span>
a<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token generics"><span class="token punctuation">&lt;</span>function2<span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h2 id="数组-定长-变长-元素可修改"><a href="#数组-定长-变长-元素可修改" class="header-anchor">#</a> 数组（定长/变长，元素可修改)</h2> <p>scala中数组的概念是和Java类似，可以用数组来存放一组数据</p> <p>scala中，有两种数组，一种是<strong>定长数组</strong>，另一种是<strong>变长数组</strong></p> <h4 id="定长数组"><a href="#定长数组" class="header-anchor">#</a> 定长数组</h4> <p>定长数组指的是数组的<strong>长度</strong>是<strong>不允许改变</strong>的，但是数组的<strong>元素</strong>是<strong>可以改变</strong>的</p> <p>语法</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// 通过指定长度定义数组</span>
<span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> 变量名 <span class="token operator">=</span> <span class="token keyword">new</span> Array<span class="token punctuation">[</span>元素类型<span class="token punctuation">]</span><span class="token punctuation">(</span>数组长度<span class="token punctuation">)</span>

<span class="token comment">// 用元素直接初始化数组</span>
<span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> 变量名 <span class="token operator">=</span> Array<span class="token punctuation">(</span>元素<span class="token number">1</span><span class="token punctuation">,</span> 元素<span class="token number">2</span><span class="token punctuation">,</span> 元素<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre></div><p>演示</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> a<span class="token operator">=</span><span class="token keyword">new</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
a<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> a<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
res19<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span>

scala<span class="token operator">&gt;</span> a<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">10</span>

scala<span class="token operator">&gt;</span> a
res21<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment">//////////////////////////////////////////////////////////////////</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> b <span class="token operator">=</span>Array<span class="token punctuation">(</span><span class="token string">&quot;hadoop&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;spark&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hive&quot;</span><span class="token punctuation">)</span>
b<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span>hadoop<span class="token punctuation">,</span> spark<span class="token punctuation">,</span> hive<span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> b<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
res24<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> hadoop

scala<span class="token operator">&gt;</span> b<span class="token punctuation">.</span>length  <span class="token comment">//通过.length查看数组长度</span>
res25<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">3</span>
</code></pre></div><h4 id="变长数组"><a href="#变长数组" class="header-anchor">#</a> 变长数组</h4> <p>变长数组指的是数组的长度是可变的，可以往数组中添加、删除元素</p> <p>创建变长数组，需要提前导入ArrayBuffer类</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span></span>ArrayBuffer
</code></pre></div><p>语法:</p> <p>创建空的ArrayBuffer变长数组</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> a <span class="token operator">=</span> ArrayBuffer<span class="token punctuation">[</span>元素类型<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>创建带有初始元素的ArrayBuffer</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> a <span class="token operator">=</span> ArrayBuffer<span class="token punctuation">(</span>元素<span class="token number">1</span>，元素<span class="token number">2</span>，元素<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre></div><p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//导入ArrayBuffer类型</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span></span>ArrayBuffer
<span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span></span>ArrayBuffer

<span class="token comment">//定义一个长度为0的整型变长数组</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> a<span class="token operator">=</span>ArrayBuffer<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
a<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>ArrayBuffer<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> ArrayBuffer<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//定义一个有初始元素的变长数组</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> b <span class="token operator">=</span> ArrayBuffer<span class="token punctuation">(</span><span class="token string">&quot;hadoop&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;storm&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;spark&quot;</span><span class="token punctuation">)</span>
b<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>ArrayBuffer<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> ArrayBuffer<span class="token punctuation">(</span>hadoop<span class="token punctuation">,</span> storm<span class="token punctuation">,</span> spark<span class="token punctuation">)</span>
</code></pre></div><p>变长数组的增删改操作</p> <ul><li>使用<code>+=</code>添加元素</li> <li>使用<code>-=</code>删除元素</li> <li>使用<code>++=</code>追加一个数组到变长数组</li></ul> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// 定义变长数组</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> a <span class="token operator">=</span> ArrayBuffer<span class="token punctuation">(</span><span class="token string">&quot;hadoop&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;spark&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;flink&quot;</span><span class="token punctuation">)</span>
a<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>ArrayBuffer<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> ArrayBuffer<span class="token punctuation">(</span>hadoop<span class="token punctuation">,</span> spark<span class="token punctuation">,</span> flink<span class="token punctuation">)</span>

<span class="token comment">// 追加一个元素</span>
scala<span class="token operator">&gt;</span> a <span class="token operator">+=</span> <span class="token string">&quot;flume&quot;</span>
res10<span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> ArrayBuffer<span class="token punctuation">(</span>hadoop<span class="token punctuation">,</span> spark<span class="token punctuation">,</span> flink<span class="token punctuation">,</span> flume<span class="token punctuation">)</span>

<span class="token comment">// 删除一个元素</span>
scala<span class="token operator">&gt;</span> a <span class="token operator">-=</span> <span class="token string">&quot;hadoop&quot;</span>
res11<span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> ArrayBuffer<span class="token punctuation">(</span>spark<span class="token punctuation">,</span> flink<span class="token punctuation">,</span> flume<span class="token punctuation">)</span>

<span class="token comment">// 追加一个数组</span>
scala<span class="token operator">&gt;</span> a <span class="token operator">++</span><span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token string">&quot;hive&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sqoop&quot;</span><span class="token punctuation">)</span>
res12<span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> ArrayBuffer<span class="token punctuation">(</span>spark<span class="token punctuation">,</span> flink<span class="token punctuation">,</span> flume<span class="token punctuation">,</span> hive<span class="token punctuation">,</span> sqoop<span class="token punctuation">)</span>
</code></pre></div><h4 id="遍历数组"><a href="#遍历数组" class="header-anchor">#</a> 遍历数组</h4> <p>可以使用以下两种方式来遍历数组：</p> <ul><li>使用==for表达式== 直接遍历数组中的元素</li> <li>使用 ==索引== 遍历数组中的元素</li></ul> <p>示例</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> a<span class="token punctuation">)</span>println<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
hadoop
hive
flume
spark

scala<span class="token operator">&gt;</span> <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> <span class="token number">0</span> to <span class="token namespace">a<span class="token punctuation">.</span>length</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span>println<span class="token punctuation">(</span>a<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
hadoop
hive
flume
spark

scala<span class="token operator">&gt;</span> <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> <span class="token number">0</span> until a<span class="token punctuation">.</span>length<span class="token punctuation">)</span> println<span class="token punctuation">(</span>a<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
hadoop
hive
flume
spark


<span class="token comment">//0 until n —— 生成一系列的数字，包含0，不包含n</span>
<span class="token comment">//0 to n    —— 包含0，也包含n</span>

</code></pre></div><h4 id="数组常用操作"><a href="#数组常用操作" class="header-anchor">#</a> 数组常用操作</h4> <ul><li>scala中的数组封装了丰富的计算操作，将来在对数据处理的时候，不需要我们自己再重新实现。
<ul><li>求和——sum方法</li> <li>求最大值——max方法</li> <li>求最小值——min方法</li> <li>排序——sorted方法</li></ul></li> <li>示例</li></ul> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> array<span class="token operator">=</span>Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
array<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment">//求和</span>
scala<span class="token operator">&gt;</span> array<span class="token punctuation">.</span>sum
res10<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">15</span>

<span class="token comment">//求最大值</span>
scala<span class="token operator">&gt;</span> array<span class="token punctuation">.</span>max
res11<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">5</span>

<span class="token comment">//求最小值</span>
scala<span class="token operator">&gt;</span> array<span class="token punctuation">.</span>min
res12<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">//升序</span>
scala<span class="token operator">&gt;</span> array<span class="token punctuation">.</span>sorted  <span class="token comment">//.sorted会生成一个新的排序后的数组，对原数组没有影响</span>
res13<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment">//降序    reverse 反转  //.reverse会生成一个新的反转后的数组，对原数组没有影响</span>
scala<span class="token operator">&gt;</span> array<span class="token punctuation">.</span>sorted<span class="token punctuation">.</span>reverse
res14<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="元组-不同类型-元素不可变"><a href="#元组-不同类型-元素不可变" class="header-anchor">#</a> 元组（不同类型，元素不可变）</h2> <p>元组可以用来包含一组不同类型的值。例如：姓名，年龄，性别，出生年月。元组的元素是不可变 的。</p> <h4 id="定义元组"><a href="#定义元组" class="header-anchor">#</a> 定义元组</h4> <p>使用括号来定义元组:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> 元组变量名称 <span class="token operator">=</span> <span class="token punctuation">(</span>元素<span class="token number">1</span><span class="token punctuation">,</span> 元素<span class="token number">2</span><span class="token punctuation">,</span> 元素<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre></div><p>使用箭头来定义元素（元组只有两个元素）:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> 元组 <span class="token operator">=</span> 元素<span class="token number">1</span><span class="token operator">-&gt;</span>元素<span class="token number">2</span>
</code></pre></div><h5 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> 示例</h5> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// 可以直接使用括号来定义一个元组 </span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">&quot;北京市&quot;</span><span class="token punctuation">)</span> 
a<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>张三<span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span>北京市<span class="token punctuation">)</span>

<span class="token comment">//使用箭头来定义元素</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">-&gt;</span><span class="token number">2</span> 
b<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="访问元组"><a href="#访问元组" class="header-anchor">#</a> 访问元组</h4> <p>访问方法：通过索引来访问元组中的元素，索引从1开始，_1表示访问第一个元素，依次类推</p> <div class="language- extra-class"><pre class="language-text"><code> _1、_2、_3....
</code></pre></div><p>示例</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">&quot;北京市&quot;</span><span class="token punctuation">)</span>
a<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>张三<span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span>北京市<span class="token punctuation">)</span>

<span class="token comment">//获取元组中的第一个元素</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>_1
res18<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">//获取元组中的第二个元素</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>_2
res19<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> 张三

<span class="token comment">//获取元组中的第三个元素</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>_3
res20<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">20</span>

<span class="token comment">//获取元组中的第四个元素</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>_4
res21<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> 北京市

<span class="token comment">//不能修改元组中的值</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>_4<span class="token operator">=</span><span class="token string">&quot;上海&quot;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>console<span class="token punctuation">&gt;</span></span><span class="token operator">:</span><span class="token number">12</span><span class="token operator">:</span> error<span class="token operator">:</span> reassignment to <span class="token namespace">val</span>
       a<span class="token punctuation">.</span>_4<span class="token operator">=</span><span class="token string">&quot;上海&quot;</span>
           <span class="token operator">^</span>
</code></pre></div><h2 id="映射map"><a href="#映射map" class="header-anchor">#</a> 映射Map</h2> <p>Map可以称之为映射。它是由键值对组成的集合。scala当中的Map集合与java当中的Map类似，也是key，value对形式的。</p> <p>在scala中，Map也分为不可变Map和可变 Map。</p> <h4 id="不可变map"><a href="#不可变map" class="header-anchor">#</a> 不可变Map</h4> <p>定义语法:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> map <span class="token operator">=</span> Map<span class="token punctuation">(</span>键<span class="token operator">-&gt;</span>值<span class="token punctuation">,</span> 键<span class="token operator">-&gt;</span>值<span class="token punctuation">,</span> 键<span class="token operator">-&gt;</span>值<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>    <span class="token comment">// 推荐，可读性更好 </span>
<span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> map <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token punctuation">(</span>键<span class="token punctuation">,</span> 值<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>键<span class="token punctuation">,</span> 值<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>键<span class="token punctuation">,</span> 值<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>键<span class="token punctuation">,</span> 值<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token comment">//键必须使用&quot;&quot;包起来</span>
</code></pre></div><p>演示</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> map1 <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token operator">-&gt;</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">&quot;lisi&quot;</span><span class="token operator">-&gt;</span><span class="token number">40</span><span class="token punctuation">)</span> 
map<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Map<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Map<span class="token punctuation">(</span>zhangsan <span class="token operator">-&gt;</span> <span class="token number">30</span><span class="token punctuation">,</span> lisi <span class="token operator">-&gt;</span> <span class="token number">40</span><span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> map2 <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
map<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Map<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Map<span class="token punctuation">(</span>zhangsan <span class="token operator">-&gt;</span> <span class="token number">30</span><span class="token punctuation">,</span> lisi <span class="token operator">-&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span>

<span class="token comment">// 根据key获取value </span>
scala<span class="token operator">&gt;</span> map1<span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span> 
res10<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">30</span>
</code></pre></div><h4 id="可变map"><a href="#可变map" class="header-anchor">#</a> 可变Map</h4> <p>可变Map需要手动导入==import scala.collection.mutable.Map==, 定义语法与不可变Map一致。</p> <p>演示</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//导包</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span></span>Map
<span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span></span>Map

<span class="token comment">//定义可变的map</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> map3 <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token operator">-&gt;</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">&quot;lisi&quot;</span><span class="token operator">-&gt;</span><span class="token number">40</span><span class="token punctuation">)</span>
map3<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>Map<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Map<span class="token punctuation">(</span>lisi <span class="token operator">-&gt;</span> <span class="token number">40</span><span class="token punctuation">,</span> zhangsan <span class="token operator">-&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span>

<span class="token comment">//获取zhangsan这个key对应的value</span>
scala<span class="token operator">&gt;</span> map3<span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span>
res26<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">30</span>

<span class="token comment">//给zhangsan这个key重新赋值value</span>
scala<span class="token operator">&gt;</span> map3<span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">50</span>

<span class="token comment">//显示map3</span>
scala<span class="token operator">&gt;</span> map3
res28<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>Map<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Map<span class="token punctuation">(</span>lisi <span class="token operator">-&gt;</span> <span class="token number">40</span><span class="token punctuation">,</span> zhangsan <span class="token operator">-&gt;</span> <span class="token number">50</span><span class="token punctuation">)</span>

</code></pre></div><h4 id="map基本操作"><a href="#map基本操作" class="header-anchor">#</a> Map基本操作</h4> <p>按照key获取value</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// 获取zhagnsan的年龄 </span>
scala<span class="token operator">&gt;</span> map<span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span>
res10<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">30</span>

<span class="token comment">// 获取wangwu的年龄，如果wangwu不存在，则返回-1 比较友好，避免遇到不存在的key而报错</span>
scala<span class="token operator">&gt;</span> map<span class="token punctuation">.</span>getOrElse<span class="token punctuation">(</span><span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> 
res11<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre></div><p>修改可变Map的key对应的value</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> map<span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">50</span>
</code></pre></div><p>添加key-value键值对</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> map<span class="token operator">+=</span><span class="token punctuation">(</span><span class="token string">&quot;wangwu&quot;</span> <span class="token operator">-&gt;</span><span class="token number">35</span><span class="token punctuation">)</span>
res12<span class="token operator">:</span> map<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> Map<span class="token punctuation">(</span>lisi <span class="token operator">-&gt;</span> <span class="token number">50</span><span class="token punctuation">,</span> zhangsan <span class="token operator">-&gt;</span> <span class="token number">30</span><span class="token punctuation">,</span> wangwu <span class="token operator">-&gt;</span> <span class="token number">35</span><span class="token punctuation">)</span>
</code></pre></div><p>删除key-value键值对</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> map <span class="token operator">-=</span><span class="token string">&quot;wangwu&quot;</span>
res13<span class="token operator">:</span> map<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> Map<span class="token punctuation">(</span>lisi <span class="token operator">-&gt;</span> <span class="token number">50</span><span class="token punctuation">,</span> zhangsan <span class="token operator">-&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span>
</code></pre></div><p>获取所有的key和所有的value</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//获取所有的key</span>
scala<span class="token operator">&gt;</span> map<span class="token punctuation">.</span>keys
res36<span class="token operator">:</span> Iterable<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span>lisi<span class="token punctuation">,</span> zhangsan<span class="token punctuation">)</span>

<span class="token comment">//获取所有的key</span>
scala<span class="token operator">&gt;</span> map<span class="token punctuation">.</span>keySet
res37<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>Set<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span>lisi<span class="token punctuation">,</span> zhangsan<span class="token punctuation">)</span>

<span class="token comment">//获取所有的value</span>
scala<span class="token operator">&gt;</span> map<span class="token punctuation">.</span>values
res38<span class="token operator">:</span> Iterable<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> HashMap<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
</code></pre></div><p>遍历map</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//第一种遍历</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">for</span><span class="token punctuation">(</span>k <span class="token keyword">&lt;-</span> map<span class="token punctuation">.</span>keys<span class="token punctuation">)</span> println<span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token string">&quot; -&gt; &quot;</span> <span class="token operator">+</span>map<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span>
lisi <span class="token operator">-&gt;</span> <span class="token number">50</span>
zhangsan <span class="token operator">-&gt;</span> <span class="token number">30</span>


<span class="token comment">//第二种遍历</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token keyword">&lt;-</span> map<span class="token punctuation">)</span> println<span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token string">&quot; -&gt; &quot;</span><span class="token operator">+</span>v<span class="token punctuation">)</span>
lisi <span class="token operator">-&gt;</span> <span class="token number">50</span>
zhangsan <span class="token operator">-&gt;</span> <span class="token number">30</span>
</code></pre></div><h2 id="set集合-无重复-定长-变长"><a href="#set集合-无重复-定长-变长" class="header-anchor">#</a> Set集合（无重复，定长/变长）</h2> <p>Set是代表没有重复元素的集合。Set具备以下性质：</p> <ul><li>元素不重复</li> <li>不保证插入顺序</li> <li>元素可以是不同类型</li></ul> <p>scala中的set集合也分为两种，一种是不可变集合，另一种是可变集合。</p> <h4 id="不可变set集合"><a href="#不可变set集合" class="header-anchor">#</a> 不可变Set集合</h4> <p>语法</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//创建一个空的不可变集</span>
<span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> 变量名 <span class="token operator">=</span> Set<span class="token punctuation">[</span>类型<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//给定元素来创建一个不可变集</span>
<span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> 变量名 <span class="token operator">=</span> Set<span class="token punctuation">[</span>类型<span class="token punctuation">]</span><span class="token punctuation">(</span>元素<span class="token number">1</span><span class="token punctuation">,</span> 元素<span class="token number">2</span><span class="token punctuation">,</span> 元素<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

</code></pre></div><p>演示</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// 创建set集合 </span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> a <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span> 
a<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Set<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">// 获取集合的大小 </span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>size 
res0<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">5</span>

<span class="token comment">// 遍历集合</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> a<span class="token punctuation">)</span> println<span class="token punctuation">(</span>i<span class="token punctuation">)</span>

<span class="token comment">//添加元素生成新的集合,原集合不受影响</span>
scala<span class="token operator">&gt;</span> a <span class="token operator">+</span> <span class="token number">6</span>
res1<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Set<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">// 删除一个元素,原集合不受影响 </span>
scala<span class="token operator">&gt;</span> a <span class="token operator">-</span> <span class="token number">1</span> 
res2<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Set<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">// 删除set集合中存在的元素 ,原集合不受影响</span>
scala<span class="token operator">&gt;</span> a <span class="token operator">--</span> Set<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> 
res3<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Set<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">// 拼接两个集合 ,原集合不受影响</span>
scala<span class="token operator">&gt;</span> a <span class="token operator">++</span> Set<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span> 
res4<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Set<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">//求2个Set集合的交集,原集合不受影响</span>
scala<span class="token operator">&gt;</span> a <span class="token operator">&amp;</span> Set<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>
res5<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Set<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">//注意：这里对不可变的set集合进行添加删除等操作，对于该集合来说是没有发生任何变化，这里是生成了新的集合，新的集合相比于原来的集合来说发生了变化。</span>
</code></pre></div><h4 id="可变set集合"><a href="#可变set集合" class="header-anchor">#</a> 可变Set集合</h4> <p>要使用可变集，必须要手动导入： ==import scala.collection.mutable.Set==</p> <p>演示</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//导包</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span></span>Set
<span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span></span>Set

<span class="token comment">//定义可变的set集合</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> set<span class="token operator">=</span>Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
set<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">//添加单个元素</span>
scala<span class="token operator">&gt;</span> set <span class="token operator">+=</span><span class="token number">6</span>
res10<span class="token operator">:</span> set<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">//添加多个元素</span>
scala<span class="token operator">&gt;</span> set <span class="token operator">+=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>
res11<span class="token operator">:</span> set<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>

<span class="token comment">//添加一个set集合中的元素</span>
scala<span class="token operator">&gt;</span> set <span class="token operator">++</span><span class="token operator">=</span>Set<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span>
res12<span class="token operator">:</span> set<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>

<span class="token comment">//删除一个元素</span>
scala<span class="token operator">&gt;</span> set <span class="token operator">-=</span><span class="token number">11</span>
res13<span class="token operator">:</span> set<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>

<span class="token comment">//删除多个元素</span>
scala<span class="token operator">&gt;</span> set <span class="token operator">-=</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
res15<span class="token operator">:</span> set<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>

<span class="token comment">//删除一个set子集</span>
scala<span class="token operator">&gt;</span> set <span class="token operator">--</span><span class="token operator">=</span>Set<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>
res19<span class="token operator">:</span> set<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> set<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
res17<span class="token operator">:</span> <span class="token builtin">Boolean</span> <span class="token operator">=</span> <span class="token boolean">true</span>

scala<span class="token operator">&gt;</span> set
res18<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="列表-list-可重复"><a href="#列表-list-可重复" class="header-anchor">#</a> 列表 List（可重复）</h2> <p>List是scala中最重要的、也是最常用的数据结构。List具备以下性质：</p> <ul><li>可以保存重复的值</li> <li>有先后顺序</li></ul> <p>在scala中，也有两种列表，一种是不可变列表、另一种是可变列表</p> <h4 id="不可变列表"><a href="#不可变列表" class="header-anchor">#</a> 不可变列表</h4> <p>不可变列表就是列表的<strong>元素、长度都是不可变的</strong></p> <p>语法格式:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> 变量名 <span class="token operator">=</span> List<span class="token punctuation">(</span>元素<span class="token number">1</span><span class="token punctuation">,</span> 元素<span class="token number">2</span><span class="token punctuation">,</span> 元素<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token comment">//使用 Nil 创建一个不可变的空列表</span>
<span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> 变量名 <span class="token operator">=</span> Nil

<span class="token comment">//使用 :: 方法创建一个不可变列表</span>
<span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> 变量名 <span class="token operator">=</span> 元素<span class="token number">1</span> <span class="token operator">::</span> 元素<span class="token number">2</span> <span class="token operator">::</span> Nil
</code></pre></div><p>演示</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//创建一个不可变列表，存放以下几个元素（1,2,3,4）</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span>  list1<span class="token operator">=</span>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
list1<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">//使用Nil创建一个不可变的空列表</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span>  list2<span class="token operator">=</span>Nil
list2<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Nil<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//使用 :: 方法创建列表，包含1、2、3三个元素</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> list3<span class="token operator">=</span><span class="token number">1</span><span class="token operator">::</span><span class="token number">2</span><span class="token operator">::</span><span class="token number">3</span><span class="token operator">::</span>Nil
list3<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="可变列表"><a href="#可变列表" class="header-anchor">#</a> 可变列表</h4> <p>可变列表就是列表的元素、长度都是可变的。</p> <p>要使用可变列表，先要导入 ==import scala.collection.mutable.ListBuffer==</p> <p>创建空的可变列表，语法：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> 变量名 <span class="token operator">=</span> ListBuffer<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>创建非空的可变列表，语法结构：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span><span class="token operator">/</span><span class="token keyword">var</span> 变量名 <span class="token operator">=</span> ListBuffer<span class="token punctuation">(</span>元素<span class="token number">1</span>，元素<span class="token number">2</span>，元素<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre></div><p>演示</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//导包</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span></span>ListBuffer
<span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span></span>ListBuffer

<span class="token comment">//定义一个空的可变列表</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> a<span class="token operator">=</span>ListBuffer<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
a<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>ListBuffer<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> ListBuffer<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//定义一个有初始元素的可变列表</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> b<span class="token operator">=</span>ListBuffer<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
b<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>ListBuffer<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> ListBuffer<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="列表操作"><a href="#列表操作" class="header-anchor">#</a> 列表操作</h4> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//导包</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span></span>ListBuffer
<span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span></span>ListBuffer

<span class="token comment">//定义一个可变的列表</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> list<span class="token operator">=</span>ListBuffer<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
list<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>ListBuffer<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> ListBuffer<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">//获取第一个元素</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
res4<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token comment">//获取第一个元素</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>head
res5<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">//获取除了第一个元素外其他元素组成的列表</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>tail
res6<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>ListBuffer<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> ListBuffer<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">//添加单个元素</span>
scala<span class="token operator">&gt;</span> list <span class="token operator">+=</span><span class="token number">5</span>
res7<span class="token operator">:</span> list<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> ListBuffer<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment">//添加一个不可变的列表</span>
scala<span class="token operator">&gt;</span> list <span class="token operator">++</span><span class="token operator">=</span>List<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span>
res8<span class="token operator">:</span> list<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> ListBuffer<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>

<span class="token comment">//添加一个可变的列表</span>
scala<span class="token operator">&gt;</span> list <span class="token operator">++</span><span class="token operator">=</span>ListBuffer<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>
res9<span class="token operator">:</span> list<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> ListBuffer<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>

<span class="token comment">//删除单个元素</span>
scala<span class="token operator">&gt;</span> list <span class="token operator">-=</span><span class="token number">9</span>
res10<span class="token operator">:</span> list<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> ListBuffer<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>

<span class="token comment">//删除一个不可变的列表存在的元素</span>
scala<span class="token operator">&gt;</span> list <span class="token operator">--</span><span class="token operator">=</span>List<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>
res11<span class="token operator">:</span> list<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> ListBuffer<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>

<span class="token comment">//删除一个可变的列表存在的元素</span>
scala<span class="token operator">&gt;</span> list <span class="token operator">--</span><span class="token operator">=</span>ListBuffer<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>
res12<span class="token operator">:</span> list<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> ListBuffer<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">//可变的列表转为不可变列表,生成了新列表，对原数组无影响</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>toList
res13<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">//可变的列表转为不可变数组,生成了新列表，对原数组无影响</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>toArray
res14<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="函数式编程"><a href="#函数式编程" class="header-anchor">#</a> 函数式编程</h2> <p>我们将来使用Spark/Flink的大量业务代码都会使用到函数式编程。</p> <p>下面的这些操作是学习的重点，先来感受下如何进行函数式编程以及它的强大</p> <h4 id="遍历-foreach"><a href="#遍历-foreach" class="header-anchor">#</a> 遍历 - foreach</h4> <p>foreach是List集合带有的方法。通俗解释：将集合的元素传入函数体，对元素执行函数体设定的操作，如打印每个元素等。</p> <p>方法描述：</p> <div class="language-scala extra-class"><pre class="language-scala"><code>foreach<span class="token punctuation">(</span>f<span class="token operator">:</span> <span class="token punctuation">(</span>A<span class="token punctuation">)</span> ⇒ <span class="token builtin">Unit</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span>
</code></pre></div><p>方法说明: foreach方法有一个参数f,参数类型是一个匿名函数(A) ⇒ Unit，方法的返回值是Unit。</p> <table><thead><tr><th>foreach</th> <th>API</th> <th>说明</th></tr></thead> <tbody><tr><td>参数</td> <td>f: (A) ⇒ Unit</td> <td>接收一个匿名函数对象<br>函数的输入参数为集合的元素<br>返回值为空</td></tr> <tr><td>返回值</td> <td>Unit</td> <td>空</td></tr></tbody></table> <p>方法实操</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> list<span class="token operator">=</span>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
list<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">//定义一个匿名函数传入到foreach方法中</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">4</span>

<span class="token comment">//匿名函数的输入参数类型可以省略，由编译器自动推断</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>x<span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">4</span>

<span class="token comment">//当函数参数，只在函数体中出现一次，而且函数体没有嵌套调用时，可以使用下划线来简化函数定 义</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">4</span>

<span class="token comment">//最简写，直接给定println</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">4</span>

<span class="token comment">//很神奇的语法，别害怕，盘它就可以了，后期通过scala语言开发spark、Flink程序非常简洁方便</span>
</code></pre></div><h4 id="映射-map"><a href="#映射-map" class="header-anchor">#</a> 映射 - map</h4> <p>合的映射操作是将来在编写Spark/Flink用得最多的操作，是我们必须要掌握的掌握。通俗解释：将集合的元素传入函数体，对元素执行函数体设定的操作生成新的元素，新的元素形成新的集合。生成了新的集合，但是原集合是不受影响的。</p> <p>方法描述</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> map<span class="token punctuation">[</span>B<span class="token punctuation">]</span><span class="token punctuation">(</span>f<span class="token operator">:</span> <span class="token punctuation">(</span>A<span class="token punctuation">)</span> ⇒ B<span class="token punctuation">)</span><span class="token operator">:</span> TraversableOnce<span class="token punctuation">[</span>B<span class="token punctuation">]</span>
</code></pre></div><p>方法说明</p> <table><thead><tr><th>map方法</th> <th>API</th> <th>说明</th></tr></thead> <tbody><tr><td>泛型</td> <td>[B]</td> <td>指定map方法最终返回的集合泛型</td></tr> <tr><td>参数</td> <td>f: (A) ⇒ B</td> <td>传入一个函数对象<br>该函数接收一个类型A（要转换的列表元素）<br>返回值为类型B</td></tr> <tr><td>返回值</td> <td>TraversableOnce[B]</td> <td>B类型的集合</td></tr></tbody></table> <p>方法实操</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//定义一个list集合，实现把内部每一个元素做乘以10，生成一个新的list集合</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> list<span class="token operator">=</span>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
list<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">//定义一个匿名函数</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token keyword">=&gt;</span>x<span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span>
res21<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>

<span class="token comment">//省略匿名函数参数类型</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>map<span class="token punctuation">(</span>x<span class="token keyword">=&gt;</span>x<span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span>
res22<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>

<span class="token comment">//最简写   用下划线</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>map<span class="token punctuation">(</span>_<span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span>
res23<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="扁平化映射-flatmap"><a href="#扁平化映射-flatmap" class="header-anchor">#</a> 扁平化映射 - flatmap</h4> <p>映射扁平化也是将来用得非常多的操作，也是必须要掌握的。通俗解释：将集合的元素传入函数体，每传入一个元素就生成一个集合，多个集合最终汇聚成一个集合。原集合会受到影响。</p> <p>方法描述</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> flatMap<span class="token punctuation">[</span>B<span class="token punctuation">]</span><span class="token punctuation">(</span>f<span class="token operator">:</span> <span class="token punctuation">(</span>A<span class="token punctuation">)</span> ⇒ GenTraversableOnce<span class="token punctuation">[</span>B<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> TraversableOnce<span class="token punctuation">[</span>B<span class="token punctuation">]</span>
</code></pre></div><p>方法说明</p> <table><thead><tr><th>flatmap方法</th> <th>API</th> <th>说明</th></tr></thead> <tbody><tr><td>泛型</td> <td>[B]</td> <td>最终要转换的集合元素类型</td></tr> <tr><td>参数</td> <td>f: (A) ⇒ GenTraversableOnce[B]</td> <td>传入一个函数对象<br>函数的参数是集合的元素<br>函数的返回值是一个集合</td></tr> <tr><td>返回值</td> <td>TraversableOnce[B]</td> <td>B类型的集合</td></tr></tbody></table> <ul><li>方法实操</li></ul> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//定义一个List集合,每一个元素中就是一行数据，有很多个单词</span>
scala<span class="token operator">&gt;</span>  <span class="token keyword">val</span> list <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token string">&quot;hadoop hive spark flink&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hbase spark&quot;</span><span class="token punctuation">)</span>
list<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span>hadoop hive spark flink<span class="token punctuation">,</span> hbase spark<span class="token punctuation">)</span>

<span class="token comment">//使用flatMap进行偏平化处理，获取得到所有的单词</span>
<span class="token comment">//注意：flatMap的M是大写</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>flatMap<span class="token punctuation">(</span>x <span class="token keyword">=&gt;</span> x<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
res24<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span>hadoop<span class="token punctuation">,</span> hive<span class="token punctuation">,</span> spark<span class="token punctuation">,</span> flink<span class="token punctuation">,</span> hbase<span class="token punctuation">,</span> spark<span class="token punctuation">)</span>

<span class="token comment">//简写</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>flatMap<span class="token punctuation">(</span>_<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
res25<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span>hadoop<span class="token punctuation">,</span> hive<span class="token punctuation">,</span> spark<span class="token punctuation">,</span> flink<span class="token punctuation">,</span> hbase<span class="token punctuation">,</span> spark<span class="token punctuation">)</span>

<span class="token comment">// flatMap该方法其本质是先进行了map 然后又调用了flatten</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>map<span class="token punctuation">(</span>_<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>flatten
res26<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span>hadoop<span class="token punctuation">,</span> hive<span class="token punctuation">,</span> spark<span class="token punctuation">,</span> flink<span class="token punctuation">,</span> hbase<span class="token punctuation">,</span> spark<span class="token punctuation">)</span>
</code></pre></div><p>flatmap的效果与下面一样,可理解成flatmap将两个步骤合在一起了：</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> list1<span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token keyword">=&gt;</span>x<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
res10<span class="token operator">:</span> List<span class="token punctuation">[</span>Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span>Array<span class="token punctuation">(</span>hadoop<span class="token punctuation">,</span> hive<span class="token punctuation">,</span> spark<span class="token punctuation">,</span> flink<span class="token punctuation">)</span><span class="token punctuation">,</span> Array<span class="token punctuation">(</span>hbase<span class="token punctuation">,</span> spark<span class="token punctuation">)</span><span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> list1<span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token keyword">=&gt;</span>x<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>flatten
res11<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span>hadoop<span class="token punctuation">,</span> hive<span class="token punctuation">,</span> spark<span class="token punctuation">,</span> flink<span class="token punctuation">,</span> hbase<span class="token punctuation">,</span> spark<span class="token punctuation">)</span>
</code></pre></div><h4 id="过滤-filter"><a href="#过滤-filter" class="header-anchor">#</a> 过滤 - filter</h4> <p>通俗解释：将集合的元素传入函数体，经过设定的判断后，若为true，则保留该元素，否则过滤掉。注意：过滤掉后是生成了新的集合，原集合不受影响。</p> <p>方法描述</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> filter<span class="token punctuation">(</span>p<span class="token operator">:</span> <span class="token punctuation">(</span>A<span class="token punctuation">)</span> ⇒ <span class="token builtin">Boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> TraversableOnce<span class="token punctuation">[</span>A<span class="token punctuation">]</span>
</code></pre></div><p>方法说明</p> <table><thead><tr><th>filter方法</th> <th>API</th> <th>说明</th></tr></thead> <tbody><tr><td>参数</td> <td>p: (A) ⇒ Boolean</td> <td>传入一个函数对象<br>接收一个集合类型的参数<br>返回布尔类型，满足条件返回true, 不满足返回false</td></tr> <tr><td>返回值</td> <td>TraversableOnce[A]</td> <td>列表</td></tr></tbody></table> <p>方法实操</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//定义一个list集合</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> list<span class="token operator">=</span>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
list<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment">//过滤出集合中大于5的元素</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>filter<span class="token punctuation">(</span>x <span class="token keyword">=&gt;</span> x <span class="token operator">&gt;</span><span class="token number">5</span><span class="token punctuation">)</span>
res27<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment">//把集合中大于5的元素取出来乘以10生成一个新的list集合</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>filter<span class="token punctuation">(</span>_ <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map<span class="token punctuation">(</span>_ <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>
res29<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>

<span class="token comment">//通过这个案例，应该是可以感受到scala比java的强大了...</span>
</code></pre></div><h4 id="排序-sort"><a href="#排序-sort" class="header-anchor">#</a> 排序 - sort</h4> <p>在scala集合中，可以使用以下几种方式来进行排序。（原集合不受影响）</p> <ol><li>sorted默认排序</li> <li>sortBy指定字段排序</li> <li>sortWith自定义排序</li></ol> <h6 id="sorted默认排序"><a href="#sorted默认排序" class="header-anchor">#</a> sorted默认排序</h6> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//定义一个List集合</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> list<span class="token operator">=</span>List<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
list<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">//默认就是升序</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>sorted
res30<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="sortby指定字段排序"><a href="#sortby指定字段排序" class="header-anchor">#</a> sortBy指定字段排序</h6> <p>通俗解释：将集合元素传入函数体，经过处理后生成新的元素，根据新的元素对原集合进行排序。原集合不受影响。</p> <p>方法描述</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> sortBy<span class="token punctuation">[</span>B<span class="token punctuation">]</span><span class="token punctuation">(</span>f<span class="token operator">:</span> <span class="token punctuation">(</span>A<span class="token punctuation">)</span> ⇒ B<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token punctuation">[</span>A<span class="token punctuation">]</span>
</code></pre></div><p>方法说明</p> <table><thead><tr><th>sortBy方法</th> <th>API</th> <th>说明</th></tr></thead> <tbody><tr><td>泛型</td> <td>[B]</td> <td>按照什么类型来进行排序</td></tr> <tr><td>参数</td> <td>f: (A) ⇒ B</td> <td>传入函数对象<br>接收一个集合类型的元素参数<br>返回B类型的元素进行排序</td></tr> <tr><td>返回值</td> <td>List[A]</td> <td>返回排序后的列表</td></tr></tbody></table> <p>方法实操</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//定义一个List集合</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> list<span class="token operator">=</span>List<span class="token punctuation">(</span><span class="token string">&quot;1 hadoop&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;2 spark&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;3 flink&quot;</span><span class="token punctuation">)</span>
list<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span> hadoop<span class="token punctuation">,</span> <span class="token number">2</span> spark<span class="token punctuation">,</span> <span class="token number">3</span> flink<span class="token punctuation">)</span>

<span class="token comment">//按照单词的首字母进行排序</span>
scala<span class="token operator">&gt;</span> list1<span class="token punctuation">.</span>sortBy<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token keyword">=&gt;</span>x<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
res27<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">3</span> flink<span class="token punctuation">,</span> <span class="token number">1</span> hadoop<span class="token punctuation">,</span> <span class="token number">2</span> spark<span class="token punctuation">)</span>

<span class="token comment">//可简写成下面：</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>sortBy<span class="token punctuation">(</span>x<span class="token keyword">=&gt;</span>x<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
res33<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">3</span> flink<span class="token punctuation">,</span> <span class="token number">1</span> hadoop<span class="token punctuation">,</span> <span class="token number">2</span> spark<span class="token punctuation">)</span>
</code></pre></div><h6 id="sortwith自定义排序"><a href="#sortwith自定义排序" class="header-anchor">#</a> sortWith自定义排序</h6> <p>通俗解释：将集合的两个元素传入函数体，进行比较，如果小于就返回true，两个元素调换位置，否则不变，多次比较后不同的两个元素后就得到了排序后的集合。原集合不受影响。</p> <p>方法描述</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> sortWith<span class="token punctuation">(</span>lt<span class="token operator">:</span> <span class="token punctuation">(</span>A<span class="token punctuation">,</span> A<span class="token punctuation">)</span> ⇒ <span class="token builtin">Boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token punctuation">[</span>A<span class="token punctuation">]</span>
</code></pre></div><p>方法说明</p> <table><thead><tr><th>sortWith方法</th> <th>API</th> <th>说明</th></tr></thead> <tbody><tr><td>参数</td> <td>lt: (A, A) ⇒ Boolean</td> <td>传入一个比较大小的函数对象<br>接收两个集合类型的元素参数<br>返回两个元素大小，小于返回true，大于返回false</td></tr> <tr><td>返回值</td> <td>List[A]</td> <td>返回排序后的列表</td></tr></tbody></table> <p>方法实操</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> list <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
a<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment">//降序</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>sortWith<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token keyword">=&gt;</span>x<span class="token operator">&gt;</span>y<span class="token punctuation">)</span>
res35<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">//升序</span>
scala<span class="token operator">&gt;</span> list<span class="token punctuation">.</span>sortWith<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token keyword">=&gt;</span>x<span class="token operator">&lt;</span>y<span class="token punctuation">)</span>
res36<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="分组-groupby"><a href="#分组-groupby" class="header-anchor">#</a> 分组 - groupBy</h4> <p>通俗解释：将集合元素传入函数体，处理后得到新的元素，如果新的元素相同，则将集合原来的元素归为同一组。</p> <ul><li>方法描述</li></ul> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> groupBy<span class="token punctuation">[</span>K<span class="token punctuation">]</span><span class="token punctuation">(</span>f<span class="token operator">:</span> <span class="token punctuation">(</span>A<span class="token punctuation">)</span> ⇒ K<span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token punctuation">[</span>K<span class="token punctuation">,</span> List<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>方法说明</li></ul> <table><thead><tr><th>groupBy方法</th> <th>API</th> <th>说明</th></tr></thead> <tbody><tr><td>泛型</td> <td>[K]</td> <td>分组字段的类型</td></tr> <tr><td>参数</td> <td>f: (A) ⇒ K</td> <td>传入一个函数对象<br>接收集合元素类型的参数<br>返回一个K类型的key，这个key会用来进行分组，相同的key放在一组中</td></tr> <tr><td>返回值</td> <td>Map[K, List[A]]</td> <td>返回一个映射，K为分组字段，List为这个分组字段对应的一组数据</td></tr></tbody></table> <ul><li>方法实操</li></ul> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> a <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token string">&quot;张三&quot;</span><span class="token operator">-&gt;</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;李四&quot;</span><span class="token operator">-&gt;</span><span class="token string">&quot;女&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;王五&quot;</span><span class="token operator">-&gt;</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">)</span>
a<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token punctuation">(</span>张三<span class="token punctuation">,</span>男<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>李四<span class="token punctuation">,</span>女<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>王五<span class="token punctuation">,</span>男<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 按照性别分组</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>groupBy<span class="token punctuation">(</span><span class="token punctuation">(</span>kv<span class="token operator">:</span><span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">=&gt;</span>kv<span class="token punctuation">.</span>_2<span class="token punctuation">)</span>
res31<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Map<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span>List<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Map<span class="token punctuation">(</span>男 <span class="token operator">-&gt;</span> List<span class="token punctuation">(</span><span class="token punctuation">(</span>张三<span class="token punctuation">,</span>男<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>王五<span class="token punctuation">,</span>男<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 女 <span class="token operator">-&gt;</span> List<span class="token punctuation">(</span><span class="token punctuation">(</span>李四<span class="token punctuation">,</span>女<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//可简写成下面:</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>groupBy<span class="token punctuation">(</span>_<span class="token punctuation">.</span>_2<span class="token punctuation">)</span>

<span class="token comment">// 将分组后的映射转换为性别/人数元组列表</span>
scala<span class="token operator">&gt;</span> res31<span class="token punctuation">.</span>map<span class="token punctuation">(</span>x <span class="token keyword">=&gt;</span> x<span class="token punctuation">.</span>_1 <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span>_2<span class="token punctuation">.</span>size<span class="token punctuation">)</span>
res32<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>immutable<span class="token punctuation">.</span>Map<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Map<span class="token punctuation">(</span>男 <span class="token operator">-&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> 女 <span class="token operator">-&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="聚合-reduce"><a href="#聚合-reduce" class="header-anchor">#</a> 聚合 - reduce</h4> <p>reduce表示将列表元素，传入一个函数进行聚合计算</p> <p>方法描述</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> reduce<span class="token punctuation">[</span>A1 <span class="token operator">&gt;</span><span class="token operator">:</span> A<span class="token punctuation">]</span><span class="token punctuation">(</span>op<span class="token operator">:</span> <span class="token punctuation">(</span>A1<span class="token punctuation">,</span> A1<span class="token punctuation">)</span> ⇒ A1<span class="token punctuation">)</span><span class="token operator">:</span> A1
</code></pre></div><p>方法说明</p> <table><thead><tr><th>reduce方法</th> <th>API</th> <th>说明</th></tr></thead> <tbody><tr><td>泛型</td> <td>[A1 &gt;: A]</td> <td>（下界）A1必须是集合元素类型的子类</td></tr> <tr><td>参数</td> <td>op: (A1, A1) ⇒ A1</td> <td>传入函数对象，用来不断进行聚合操作<br>第一个A1类型参数为：当前聚合后的变量<br>第二个A1类型参数为：当前要进行聚合的元素</td></tr> <tr><td>返回值</td> <td>A1</td> <td>列表最终聚合为一个元素</td></tr></tbody></table> <p>方法实操</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> a <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
a<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>reduce<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">)</span>
res5<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">55</span>

<span class="token comment">// 第一个下划线表示第一个参数，就是历史的聚合数据结果</span>
<span class="token comment">// 第二个下划线表示第二个参数，就是当前要聚合的数据元素</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>reduce<span class="token punctuation">(</span>_ <span class="token operator">+</span> _<span class="token punctuation">)</span>
res53<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">55</span>

<span class="token comment">// 与reduce一样，从左往右计算</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>reduceLeft<span class="token punctuation">(</span>_ <span class="token operator">+</span> _<span class="token punctuation">)</span>
res0<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">55</span>

<span class="token comment">// 从右往左聚合计算</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>reduceRight<span class="token punctuation">(</span>_ <span class="token operator">+</span> _<span class="token punctuation">)</span>
res1<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">55</span>
</code></pre></div><h4 id="折叠-fold"><a href="#折叠-fold" class="header-anchor">#</a> 折叠 - fold</h4> <ul><li>fold与reduce很像，但是多了一个指定初始值参数</li> <li>方法描述</li></ul> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> fold<span class="token punctuation">[</span>A1 <span class="token operator">&gt;</span><span class="token operator">:</span> A<span class="token punctuation">]</span><span class="token punctuation">(</span>z<span class="token operator">:</span> A1<span class="token punctuation">)</span><span class="token punctuation">(</span>op<span class="token operator">:</span> <span class="token punctuation">(</span>A1<span class="token punctuation">,</span> A1<span class="token punctuation">)</span> ⇒ A1<span class="token punctuation">)</span><span class="token operator">:</span> A1
</code></pre></div><ul><li>方法说明</li></ul> <table><thead><tr><th>reduce方法</th> <th>API</th> <th>说明</th></tr></thead> <tbody><tr><td>泛型</td> <td>[A1 &gt;: A]</td> <td>（下界）A1必须是集合元素类型的子类</td></tr> <tr><td>参数1</td> <td>z: A1</td> <td>初始值</td></tr> <tr><td>参数2</td> <td>op: (A1, A1) ⇒ A1</td> <td>传入函数对象，用来不断进行折叠操作<br>第一个A1类型参数为：当前折叠后的变量<br>第二个A1类型参数为：当前要进行折叠的元素</td></tr> <tr><td>返回值</td> <td>A1</td> <td>列表最终折叠为一个元素</td></tr></tbody></table> <ul><li>方法实操</li></ul> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//定义一个List集合</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> a <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
a<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment">//求和</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>sum
res41<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">55</span>

<span class="token comment">//给定一个初始值，，折叠求和</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>fold<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">(</span>_<span class="token operator">+</span>_<span class="token punctuation">)</span>
res42<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">55</span>

scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>fold<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">(</span>_<span class="token operator">+</span>_<span class="token punctuation">)</span>
res43<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">65</span>

<span class="token comment">//从左往右</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>foldLeft<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">(</span>_<span class="token operator">+</span>_<span class="token punctuation">)</span>
res44<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">65</span>

<span class="token comment">//从右往左</span>
scala<span class="token operator">&gt;</span> a<span class="token punctuation">.</span>foldRight<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">(</span>_<span class="token operator">+</span>_<span class="token punctuation">)</span>
res45<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">65</span>


<span class="token comment">//fold和foldLet效果一致，表示从左往右计算</span>
<span class="token comment">//foldRight表示从右往左计算</span>

</code></pre></div><h2 id="高阶函数"><a href="#高阶函数" class="header-anchor">#</a> 高阶函数</h2> <p>使用函数值作为参数，或者返回值为函数值的“函数”和“方法”，均称之为“高阶函数”。</p> <h4 id="函数值作为参数"><a href="#函数值作为参数" class="header-anchor">#</a> 函数值作为参数</h4> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//定义一个数组</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> array<span class="token operator">=</span>Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
array<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment">//定义一个函数</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> func<span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token keyword">=&gt;</span>x<span class="token operator">*</span><span class="token number">10</span>
func<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token generics"><span class="token punctuation">&lt;</span>function1<span class="token punctuation">&gt;</span></span>

<span class="token comment">//函数作为参数传递到方法中</span>
scala<span class="token operator">&gt;</span> array<span class="token punctuation">.</span>map<span class="token punctuation">(</span>func<span class="token punctuation">)</span>
res0<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="匿名函数"><a href="#匿名函数" class="header-anchor">#</a> 匿名函数</h4> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//定义一个数组</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> array<span class="token operator">=</span>Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
array<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment">//定义一个没有名称的函数----匿名函数</span>
scala<span class="token operator">&gt;</span> array<span class="token punctuation">.</span>map<span class="token punctuation">(</span>x<span class="token keyword">=&gt;</span>x<span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span>
res1<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="柯里化"><a href="#柯里化" class="header-anchor">#</a> 柯里化</h4> <p>方法可以定义多个参数列表，当使用较少的参数列表调用多参数列表的方法时，会产生一个新的函数，该函数接收剩余的参数列表作为其参数。这被称为柯里化。</p> <p>通俗解释：两个括号</p> <p>示例：定义一个方法，参数列表是(a:String)，返回类型是一个函数(String,String)=&gt;String。调用该方法时，会产生一个新的函数，新的函数可以接受剩余的参数列表作为参数。</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> getAddress<span class="token punctuation">(</span>a<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token keyword">=&gt;</span><span class="token builtin">String</span><span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token punctuation">(</span>b<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span>c<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token keyword">=&gt;</span>a<span class="token operator">+</span><span class="token string">&quot;-&quot;</span><span class="token operator">+</span>b<span class="token operator">+</span><span class="token string">&quot;-&quot;</span><span class="token operator">+</span>c
<span class="token punctuation">}</span>

scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> f1<span class="token operator">=</span>getAddress<span class="token punctuation">(</span><span class="token string">&quot;china&quot;</span><span class="token punctuation">)</span>
f1<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token generics"><span class="token punctuation">&lt;</span>function2<span class="token punctuation">&gt;</span></span>

scala<span class="token operator">&gt;</span> f1<span class="token punctuation">(</span><span class="token string">&quot;beijing&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;tiananmen&quot;</span><span class="token punctuation">)</span>
res5<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> china<span class="token operator">-</span>beijing<span class="token operator">-</span>tiananmen
</code></pre></div><p>下面对该示例进行柯里化：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> getAddress<span class="token punctuation">(</span>a<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token punctuation">(</span>b<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span>c<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">String</span><span class="token operator">=</span><span class="token punctuation">{</span> 
  		a<span class="token operator">+</span><span class="token string">&quot;-&quot;</span><span class="token operator">+</span>b<span class="token operator">+</span><span class="token string">&quot;-&quot;</span><span class="token operator">+</span>c 
<span class="token punctuation">}</span>
<span class="token comment">//调用方法时，要将两个括号的参数都填上，否则报错</span>
scala<span class="token operator">&gt;</span> getAddress<span class="token punctuation">(</span><span class="token string">&quot;china&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">&quot;beijing&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;tiananmen&quot;</span><span class="token punctuation">)</span>
res0<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> china<span class="token operator">-</span>beijing<span class="token operator">-</span>tiananmen
</code></pre></div><p>进行了柯里化的方法，可以只传入第一个括号的参数，然后生成参数为第二个括号的参数的新方法。</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> func<span class="token operator">=</span>getAddress<span class="token punctuation">(</span><span class="token string">&quot;china&quot;</span><span class="token punctuation">)</span>_
func<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token generics"><span class="token punctuation">&lt;</span>function2<span class="token punctuation">&gt;</span></span>

scala<span class="token operator">&gt;</span> func<span class="token punctuation">(</span><span class="token string">&quot;beijing&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;tiananmen&quot;</span><span class="token punctuation">)</span>
res50<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> china<span class="token operator">-</span>beijing<span class="token operator">-</span>tiananmen
</code></pre></div><p>之前学习使用的下面这些操作就是使用到了柯里化。</p> <div class="language-scala extra-class"><pre class="language-scala"><code>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fold<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">(</span>_<span class="token operator">+</span>_<span class="token punctuation">)</span>
List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>foldLeft<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">(</span>_<span class="token operator">+</span>_<span class="token punctuation">)</span>
List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>foldRight<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">(</span>_<span class="token operator">+</span>_<span class="token punctuation">)</span>
</code></pre></div><h4 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h4> <p>函数里面引用外面类成员变量叫作闭包</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">var</span> factor<span class="token operator">=</span><span class="token number">10</span>
scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> f1<span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x<span class="token operator">*</span>factor
scala<span class="token operator">&gt;</span> f1<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
res51<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">20</span>


<span class="token comment">//定义的函数f1，它的返回值是依赖于不在函数作用域的一个变量</span>
<span class="token comment">//后期必须要要获取到这个变量才能执行</span>
<span class="token comment">//spark和flink程序的开发中大量的使用到函数，函数的返回值依赖的变量可能都需要进行大量的网络传输获取得到。这里就需要这些变量实现序列化进行网络传输。</span>

<span class="token keyword">def</span> multiply<span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span>y<span class="token operator">:</span><span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token keyword">=&gt;</span>x<span class="token operator">*</span>y
<span class="token keyword">val</span> doubleFunc<span class="token operator">=</span>multiply<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">//调用方法multiply，生成函数并赋给doubleFunc</span>
<span class="token keyword">val</span> tripleFunc<span class="token operator">=</span>multiply<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> doubleFunc<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
res52<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> <span class="token number">20.0</span>

scala<span class="token operator">&gt;</span> tripleFunc<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
res53<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> <span class="token number">30.0</span>
</code></pre></div><h2 id="scala面向对象编程之类"><a href="#scala面向对象编程之类" class="header-anchor">#</a> scala面向对象编程之类</h2> <h4 id="类的定义"><a href="#类的定义" class="header-anchor">#</a> 类的定义</h4> <p>scala是支持面向对象的，也有类和对象的概念。</p> <p>示例：</p> <ul><li>定义一个Customer类，并添加成员变量/成员方法</li> <li>添加一个main方法，并创建Customer类的对象，并给对象赋值，打印对象中的成员，调用成员方法</li></ul> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Customer <span class="token punctuation">{</span>
  <span class="token keyword">var</span> name<span class="token operator">:</span><span class="token builtin">String</span> <span class="token operator">=</span> _
  <span class="token keyword">var</span> sex<span class="token operator">:</span><span class="token builtin">String</span> <span class="token operator">=</span> _
  <span class="token keyword">val</span> registerDate<span class="token operator">:</span>Date <span class="token operator">=</span> <span class="token keyword">new</span> Date

  <span class="token keyword">def</span> sayHi<span class="token punctuation">(</span>msg<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">object</span> Main <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> customer <span class="token operator">=</span> <span class="token keyword">new</span> Customer
    <span class="token comment">//给对象的成员变量赋值</span>
    customer<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span>
    customer<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span>

    println<span class="token punctuation">(</span>s<span class="token string">&quot;姓名: ${customer.name}, 性别：${customer.sex}, 注册时间: ${customer.registerDate}&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">//对象调用方法  </span>
    customer<span class="token punctuation">.</span>sayHi<span class="token punctuation">(</span><span class="token string">&quot;你好!&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*运行结果为：
姓名：张三, 性别：男, 注册时间: Mon Apr 13 00:00:54 CST 2020
你好！
*/</span>
</code></pre></div><p>说明</p> <ol><li>var name:String = _，  _表示使用默认值进行初始化
例如：String类型默认值是null，Int类型默认值是0，Boolean类型默认值是false...</li> <li>val变量不能使用_来进行初始化，因为val是不可变的，所以必须手动指定一个默认值</li> <li>main方法必须要放在一个scala的object（单例对象）中才能执行</li> <li>println(s&quot;...${}...&quot;)中的s必须要写，有s才可以获取成员变量的值，如：${customer.name}</li></ol> <h4 id="类的构造器"><a href="#类的构造器" class="header-anchor">#</a> 类的构造器</h4> <p>主构造器:  主构造器是指在类名的后面跟上一系列参数，例如</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> 类名<span class="token punctuation">(</span><span class="token keyword">var</span><span class="token operator">/</span><span class="token keyword">val</span> 参数名<span class="token operator">:</span>类型 <span class="token operator">=</span> 默认值<span class="token punctuation">,</span> <span class="token keyword">var</span><span class="token operator">/</span><span class="token keyword">val</span> 参数名<span class="token operator">:</span>类型 <span class="token operator">=</span> 默认值<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 构造代码块</span>
<span class="token punctuation">}</span>
</code></pre></div><p>辅助构造器:  在类中使用this来定义，例如</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">def</span> <span class="token keyword">this</span><span class="token punctuation">(</span>参数名<span class="token operator">:</span>类型<span class="token punctuation">,</span> 参数名<span class="token operator">:</span>类型<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>演示</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Student<span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">val</span> age<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> address<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;beijing&quot;</span>

  <span class="token comment">//定义只有一个参数的辅助构造器1</span>
  <span class="token keyword">def</span> <span class="token keyword">this</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//定义只有一个参数的辅助构造器2</span>
  <span class="token keyword">def</span> <span class="token keyword">this</span><span class="token punctuation">(</span>age<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token string">&quot;某某某&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">object</span> Main <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> Student<span class="token punctuation">(</span><span class="token string">&quot;Krystal&quot;</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span>   <span class="token comment">//使用主构造器</span>
    <span class="token keyword">val</span> stu2 <span class="token operator">=</span> <span class="token keyword">new</span> Student<span class="token punctuation">(</span><span class="token string">&quot;Jimmy&quot;</span><span class="token punctuation">)</span>			<span class="token comment">//使用辅助构造器</span>
    <span class="token keyword">val</span> stu3 <span class="token operator">=</span> <span class="token keyword">new</span> Student<span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span>              <span class="token comment">//使用辅助构造器</span>
    println<span class="token punctuation">(</span>s<span class="token string">&quot;${stu1.name},${stu1.age}\n${stu2.name},${stu2.age}\n${stu3.name},${stu3.age}&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>Krystal,21
Jimmy,20
某某某,23
</code></pre></div><h2 id="scala面向对象编程之对象"><a href="#scala面向对象编程之对象" class="header-anchor">#</a> scala面向对象编程之对象</h2> <h4 id="scala中的object"><a href="#scala中的object" class="header-anchor">#</a> scala中的object</h4> <p>scala中是没有Java中的静态成员的。如果将来我们需要用到static变量、static方法，就要用到scala中的单例对象object。</p> <p>定义object方法：定义单例对象和定义类很像，就是把class换成object</p> <p>示例：定义一个工具类，用来格式化日期时间</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> DateUtils<span class="token punctuation">{</span>

  <span class="token comment">// 在object中定义的成员变量，相当于Java中定义一个静态变量</span>
  <span class="token comment">// 定义一个SimpleDateFormat日期时间格式化对象</span>
  <span class="token keyword">val</span> sdf<span class="token operator">=</span><span class="token keyword">new</span> SimpleDateFormat<span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm&quot;</span><span class="token punctuation">)</span>

  <span class="token comment">// 相当于Java中定义一个静态方法</span>
  <span class="token keyword">def</span> format<span class="token punctuation">(</span>d<span class="token operator">:</span>Date<span class="token punctuation">)</span><span class="token operator">=</span>sdf<span class="token punctuation">.</span>format<span class="token punctuation">(</span>d<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">//可以直接调用DateUtils的format方法：</span>
    println<span class="token punctuation">(</span>DateUtils<span class="token punctuation">.</span>format<span class="token punctuation">(</span><span class="token keyword">new</span> Date<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>2020-04-13 00:32
</code></pre></div><p>说明：</p> <ol><li>使用object 单例对象名定义一个单例对象，可以用object作为工具类或者存放常量</li> <li>在单例对象中定义的变量，类似于Java中的static成员变量</li> <li>在单例对象中定义的方法，类似于Java中的static方法</li> <li>object单例对象的构造代码可以直接写在花括号中</li> <li>调用单例对象的方法，直接使用单例对象名.方法名，访问单例对象的成员变量也是使用单例对象名.变量名</li> <li>单例对象只能有一个无参的主构造器，不能添加其他参数</li></ol> <h4 id="scala中的伴生对象"><a href="#scala中的伴生对象" class="header-anchor">#</a> scala中的伴生对象</h4> <p>在同一个scala文件，有一个class和object具有同样的名字，那么就称这个object是class的伴生对象，class是object的伴生类；</p> <p>伴生类和伴生对象的最大特点是，<strong>可以相互访问私有属性</strong>；</p> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> ClassObject<span class="token punctuation">{</span>
  <span class="token keyword">def</span> printConstant<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">{</span>
      <span class="token comment">//可以访问伴生对象Dog的私有属性</span>
    println<span class="token punctuation">(</span>ClassObject<span class="token punctuation">.</span>CONSTANT<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> ClassObject<span class="token punctuation">{</span>
  <span class="token comment">//伴生对象中的私有属性:</span>
  <span class="token keyword">private</span> <span class="token keyword">val</span> CONSTANT<span class="token operator">=</span><span class="token string">&quot;krystal&quot;</span>

  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> p<span class="token operator">=</span><span class="token keyword">new</span> ClassObject
    p<span class="token punctuation">.</span>printConstant<span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>krystal
</code></pre></div><p>说明</p> <div class="language- extra-class"><pre class="language-text"><code>(1). 伴生类和伴生对象的名字必须是一样的
(2). 伴生类和伴生对象需要在一个scala源文件中
(3). 伴生类和伴生对象可以互相访问private的属性
</code></pre></div><h4 id="scala中object的apply方法"><a href="#scala中object的apply方法" class="header-anchor">#</a> scala中object的apply方法</h4> <p>我们之前使用过下列方式来创建一个Array对象，这种写法非常简便，不需要再写一个new，然后敲一个空格，再写类名。</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// 创建一个Array对象</span>
<span class="token keyword">val</span> a <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p><strong>可以这样创建对象的原因是？</strong></p> <ol><li><p>Array类有一个伴生对象Array,伴生对象Array里面定义着apply方法</p></li> <li><p>apply方法的源码大致如下，方法参数时Int*,返回类型是Array</p> <img src="scala.assets/1568196769539.png" alt="1568196769539" style="zoom:67%;"></li> <li><p>执行val a = Array(1,2,3,4)操作时，首先会找到Array类的伴生对象object Array</p></li> <li><p>然后找到伴生对象里，有着对应参数的apply方法，进行调用，从而创建了新对象</p></li></ol></blockquote> <p>因此，归为一点就是：<strong>实现伴生对象的apply方法</strong>，伴生对象的apply方法用来快速地创建一个伴生类的对象。</p> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Person<span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> toString<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> s<span class="token string">&quot;Person{$name,$age}&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Person<span class="token punctuation">{</span>
  <span class="token comment">//实现apply方法,返回Person伴生类的对象</span>
  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token keyword">new</span> Person<span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span>
  <span class="token comment">//apply方法支持重载</span>
  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token keyword">new</span> Person<span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span>
  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>age<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token keyword">new</span> Person<span class="token punctuation">(</span><span class="token string">&quot;krystal&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span>
  <span class="token keyword">def</span> apply<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token keyword">new</span> Person<span class="token punctuation">(</span><span class="token string">&quot;krystal&quot;</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> p<span class="token operator">=</span>Person<span class="token punctuation">(</span><span class="token string">&quot;krystal&quot;</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>p<span class="token punctuation">.</span>toString<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>Person{krystal,21}
</code></pre></div><p>说明：</p> <ol><li>当遇到类名(参数1, 参数2...)会自动调用对应的apply方法，在apply方法中来创建对象</li> <li>定义apply时，如果参数列表是空，也不能省略括号()，否则引用的是伴生对象</li></ol> <h4 id="scala中object的main方法"><a href="#scala中object的main方法" class="header-anchor">#</a> scala中object的main方法</h4> <p>scala和Java一样，如果要运行一个程序，必须有一个main方法。而在Java中main方法是静态的，而在scala中没有静态方法。<strong>在scala中，这个main方法必须放在一个object中</strong></p> <p>示例1：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> Main1<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span>Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span><span class="token string">&quot;hello, scala&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>也可以继承自App Trait（特质），然后将需要编写在main方法中的代码，写在object的构造方法体内。其本质是调用了Trait这个特质中的main方法。</p> <p>示例2</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> Main2 <span class="token keyword">extends</span> App <span class="token punctuation">{</span>
  println<span class="token punctuation">(</span><span class="token string">&quot;hello, scala&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//不需要再写main方法</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="scala面向对象编程之继承"><a href="#scala面向对象编程之继承" class="header-anchor">#</a> scala面向对象编程之继承</h2> <h4 id="继承extends"><a href="#继承extends" class="header-anchor">#</a> 继承extends</h4> <p>scala和Java一样，使用<strong>extends</strong>关键字来实现继承。可以在子类中定义父类中没有的字段和方法，或者重写父类的方法。</p> <p>示例1：实现简单继承</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Person1<span class="token punctuation">{</span>
  <span class="token keyword">var</span> name<span class="token operator">=</span><span class="token string">&quot;super&quot;</span>
  <span class="token keyword">def</span> getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>name
<span class="token punctuation">}</span>
<span class="token keyword">class</span> Student1 <span class="token keyword">extends</span> Person1<span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test1<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> p1<span class="token operator">=</span><span class="token keyword">new</span> Person1
    <span class="token keyword">var</span> s1<span class="token operator">=</span><span class="token keyword">new</span> Student1
    s1<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">&quot;krystal&quot;</span>
    println<span class="token punctuation">(</span>s1<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>krystal
</code></pre></div><p>示例2：单例对象实现继承</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Person1<span class="token punctuation">{</span>
  <span class="token keyword">var</span> name<span class="token operator">=</span><span class="token string">&quot;super&quot;</span>
  <span class="token keyword">def</span> getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>name
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Student1 <span class="token keyword">extends</span> Person1<span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test1<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    Student1<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">&quot;krystal&quot;</span>
    println<span class="token punctuation">(</span>Student1<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>krystal
</code></pre></div><h4 id="关键字-override-super"><a href="#关键字-override-super" class="header-anchor">#</a> 关键字：override/super</h4> <ol><li>如果子类要覆盖父类中的一个非抽象方法，必须要使用override关键字</li> <li>可以使用override关键字来重写一个val字段</li> <li>可以使用super关键字来访问父类的成员</li></ol> <p>示例1：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Person2<span class="token punctuation">{</span>
  <span class="token keyword">val</span> name<span class="token operator">=</span><span class="token string">&quot;super&quot;</span>
  <span class="token keyword">def</span> getName<span class="token operator">=</span>name
<span class="token punctuation">}</span>
<span class="token keyword">class</span> Person3 <span class="token keyword">extends</span> Person2<span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> name<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;krystal&quot;</span>   <span class="token comment">//重写字段</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> getName<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;hello &quot;</span><span class="token operator">+</span><span class="token keyword">super</span><span class="token punctuation">.</span>getName  <span class="token comment">//调用父类的getName方法</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test3<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> p3<span class="token operator">:</span>Person3<span class="token operator">=</span><span class="token keyword">new</span> Person3<span class="token punctuation">(</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>p3<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>p3<span class="token punctuation">.</span>getName<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>krystal
hello krystal
</code></pre></div><h4 id="关键字-isinstanceof-asinstanceof"><a href="#关键字-isinstanceof-asinstanceof" class="header-anchor">#</a> 关键字：isInstanceOf/asInstanceOf</h4> <p>我们经常要在代码中进行类型的判断和类型的转换。在Java中，我们可以使用instanceof关键字、以及(类型)object来实现。在scala中如何实现呢？</p> <p>scala中对象提供isInstanceOf 和 asInstanceOf方法。</p> <ul><li>isInstanceOf判断对象是否为指定类的对象</li> <li>asInstanceOf将对象转换为指定类型</li></ul> <table><thead><tr><th></th> <th>Java</th> <th>Scala</th></tr></thead> <tbody><tr><td>判断对象是否是C类型</td> <td>obj instanceof C</td> <td>obj.isInstanceof[C]</td></tr> <tr><td>将对象强转成C类型</td> <td>(C ) obj</td> <td>obj.asInstanceof[C]</td></tr> <tr><td>获取类型为T的class对象</td> <td>C.class</td> <td>classOf[C]</td></tr></tbody></table> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Person4<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> Student4 <span class="token keyword">extends</span> Person4<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">object</span> Person5<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> pn<span class="token operator">:</span>Person4<span class="token operator">=</span><span class="token keyword">new</span> Person4
    <span class="token keyword">val</span> s<span class="token operator">:</span>Student4<span class="token operator">=</span><span class="token keyword">null</span>
    println<span class="token punctuation">(</span>pn<span class="token punctuation">.</span>isInstanceOf<span class="token punctuation">[</span>Person4<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//true</span>
    println<span class="token punctuation">(</span>pn<span class="token punctuation">.</span>isInstanceOf<span class="token punctuation">[</span>Student4<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//false</span>
    println<span class="token punctuation">(</span>s<span class="token punctuation">.</span>isInstanceOf<span class="token punctuation">[</span>Student4<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//false</span>
      
    <span class="token keyword">val</span> a<span class="token operator">=</span>pn<span class="token punctuation">.</span>asInstanceOf<span class="token punctuation">[</span>Person4<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="getclass和classof"><a href="#getclass和classof" class="header-anchor">#</a> getClass和classOf</h4> <p>isInstanceOf 只能判断出对象是否为指定类以及其子类的对象，而不能精确的判断出，对象就是指定类的对象。如果要求精确地判断出对象就是指定类的对象，那么就只能使用 getClass 和 classOf 。</p> <ul><li><p>对象.getClass可以精确获取对象的类型</p></li> <li><p>classOf[x]可以精确获取类型</p></li> <li><p>使用==操作符就可以直接比较</p></li></ul> <p>示例:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Person<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> Student <span class="token keyword">extends</span> Person<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> p<span class="token operator">:</span>Person<span class="token operator">=</span><span class="token keyword">new</span> Student  <span class="token comment">//p是Person类的子类的对象</span>
    println<span class="token punctuation">(</span>p<span class="token punctuation">.</span>isInstanceOf<span class="token punctuation">[</span>Person<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//true</span>
    println<span class="token punctuation">(</span>p<span class="token punctuation">.</span>isInstanceOf<span class="token punctuation">[</span>Student<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//true</span>
    println<span class="token punctuation">(</span>p<span class="token punctuation">.</span>getClass<span class="token operator">==</span>classOf<span class="token punctuation">[</span>Person<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//false</span>
    println<span class="token punctuation">(</span>p<span class="token punctuation">.</span>getClass<span class="token operator">==</span>classOf<span class="token punctuation">[</span>Student<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="scala访问修饰符"><a href="#scala访问修饰符" class="header-anchor">#</a> scala访问修饰符</h2> <p>scala只有两个访问修饰符：private/protected</p> <p>Java中的访问控制，同样适用于scala，可以在成员前面添加private/protected关键字来控制成员的可见性。但在scala中，没有public关键字，任何没有被标为private或protected的成员都是公共的。</p> <h4 id="private修饰符"><a href="#private修饰符" class="header-anchor">#</a> private修饰符</h4> <p>private修饰的成员只能在类内部或者伴生对象中使用</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">var</span> name<span class="token operator">=</span><span class="token string">&quot;krystal&quot;</span>
  <span class="token keyword">def</span> getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">{</span>
    name <span class="token comment">//没报错</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> Student<span class="token punctuation">{</span>
  <span class="token keyword">val</span> p<span class="token operator">:</span>Person<span class="token operator">=</span><span class="token keyword">new</span> Person
  <span class="token comment">// println(p.name) --&gt;报错</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> Student2 <span class="token keyword">extends</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">val</span> s<span class="token operator">:</span>Student2<span class="token operator">=</span><span class="token keyword">new</span> Student2
  <span class="token comment">// println(s.name)--&gt;报错</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> pp<span class="token operator">:</span>Person<span class="token operator">=</span><span class="token keyword">new</span> Person
    println<span class="token punctuation">(</span>pp<span class="token punctuation">.</span>name<span class="token punctuation">)</span>  <span class="token comment">//没报错</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="private-this-修饰符"><a href="#private-this-修饰符" class="header-anchor">#</a> private[this]修饰符</h4> <p>被修饰的成员只能在当前类中被访问。或者可以理解为：只能通过this.来访问（在当前类中访问成员会自动添加this.）</p> <p>示例:</p> <p>private[this] var name只能从this对象的方法访问。</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">private</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span> <span class="token keyword">var</span> name<span class="token operator">=</span><span class="token string">&quot;krystal&quot;</span>
  <span class="token keyword">def</span> getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>name
  
  <span class="token keyword">def</span> sayHelloTo<span class="token punctuation">(</span>p<span class="token operator">:</span>Person<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>     <span class="token comment">// 报错!无法访问</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> pp<span class="token operator">:</span>Person<span class="token operator">=</span><span class="token keyword">new</span> Person
    <span class="token comment">//println(pp.name) --&gt;报错</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="protected-this-修饰符"><a href="#protected-this-修饰符" class="header-anchor">#</a> protected[this]修饰符</h4> <p>被修饰的成员只能在当前类和当前子类中被访问。也可以理解为：当前类通过**this.<strong>访问或者子类通过</strong>this.**访问</p> <p>示例:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">protected</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span> <span class="token keyword">var</span> name<span class="token operator">=</span><span class="token string">&quot;super&quot;</span>
  <span class="token keyword">def</span> getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name
  <span class="token punctuation">}</span>
  <span class="token keyword">def</span> sayHi<span class="token punctuation">(</span>person<span class="token operator">:</span> Person<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token comment">//println(person.name)--&gt;报错</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//伴生对象</span>
<span class="token keyword">object</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">def</span> showName<span class="token punctuation">(</span>person<span class="token operator">:</span> Person<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token comment">//println(person.name)--&gt;报错</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> Student <span class="token keyword">extends</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">def</span> showName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span><span class="token punctuation">{</span>
    println<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="调用父类的constructor"><a href="#调用父类的constructor" class="header-anchor">#</a> 调用父类的constructor</h4> <p>实例化子类对象，必须要调用父类的构造器，在scala中，只能在子类的主构造器中调用父类的构造器</p> <p>示例:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Person<span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  println<span class="token punctuation">(</span><span class="token string">&quot;name: &quot;</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 直接在父类的类名后面调用父类构造器</span>
<span class="token keyword">class</span> Student<span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token keyword">var</span> age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Person<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> stu<span class="token operator">:</span>Student<span class="token operator">=</span><span class="token keyword">new</span> Student<span class="token punctuation">(</span><span class="token string">&quot;krystal&quot;</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>s<span class="token string">&quot;${stu.name}-${stu.age}&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//先调用父类的构造器，再调用子类的构造器</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>name: krystal
krystal-21
</code></pre></div><h4 id="抽象类"><a href="#抽象类" class="header-anchor">#</a> 抽象类</h4> <p>如果类的某个成员在当前类中的定义是不包含完整的，它就是一个<strong>抽象类</strong></p> <p>不完整定义有两种情况：</p> <ol><li>方法没有方法体</li> <li>变量没有初始化</li></ol> <p>没有方法体的方法称为<strong>抽象方法</strong>，没有初始化的变量称为<strong>抽象字段</strong>。定义抽象类和Java一样，在类前面加上<strong>abstract</strong>关键字就可以了</p> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">def</span> sayhello<span class="token operator">:</span><span class="token builtin">Unit</span>
  <span class="token keyword">def</span> sayBye<span class="token operator">:</span><span class="token builtin">Unit</span>
  <span class="token keyword">val</span> address<span class="token operator">:</span><span class="token builtin">String</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> Student <span class="token keyword">extends</span> Person<span class="token punctuation">{</span>
  <span class="token comment">//重写方法</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> sayhello<span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;hello krystal&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">//重写方法</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> sayBye<span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Bye&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">//重写字段</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> address<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;MaoMing&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> stu<span class="token operator">:</span>Student<span class="token operator">=</span><span class="token keyword">new</span> Student
    stu<span class="token punctuation">.</span>sayhello
    stu<span class="token punctuation">.</span>sayBye
    println<span class="token punctuation">(</span>stu<span class="token punctuation">.</span>address<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>hello krystal
Bye
MaoMing
</code></pre></div><h4 id="匿名内部类"><a href="#匿名内部类" class="header-anchor">#</a> 匿名内部类</h4> <p>匿名内部类是没有名称的子类，直接用来创建实例对象。Spark的源代码中有大量使用到匿名内部类。</p> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">def</span> sayHello<span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">//创建一个匿名内部类对象</span>
    <span class="token keyword">var</span> p<span class="token operator">:</span>Person<span class="token operator">=</span><span class="token keyword">new</span> Person <span class="token punctuation">{</span>
      <span class="token keyword">override</span> <span class="token keyword">def</span> sayHello<span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;匿名内部类&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    p<span class="token punctuation">.</span>sayHello
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>匿名内部类
</code></pre></div><h2 id="scala面向对象编程之trait特质"><a href="#scala面向对象编程之trait特质" class="header-anchor">#</a> scala面向对象编程之trait特质</h2> <p>特质：</p> <ol><li>特质是scala中代码复用的基础单元</li> <li>它可以将方法和字段定义封装起来，然后添加到类中</li> <li>与类继承不一样的是，类继承要求每个类都只能继承一个超类，而一个类可以添加任意数量的特质。</li> <li>特质的定义和抽象类的定义很像，但它是使用trait关键字</li></ol> <h4 id="作为接口使用"><a href="#作为接口使用" class="header-anchor">#</a> 作为接口使用</h4> <p>使用<code>extends</code>来继承trait（scala不论是类还是特质，都是使用extends关键字）</p> <p>如果要继承多个trait，则使用with关键字</p> <p>示例一：继承单个trait</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">trait</span> Logger1<span class="token punctuation">{</span>
  <span class="token comment">//抽象方法</span>
  <span class="token keyword">def</span> log<span class="token punctuation">(</span>msg<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> ConsoleLogger1 <span class="token keyword">extends</span> Logger1<span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> log<span class="token punctuation">(</span>msg<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> cons<span class="token operator">=</span><span class="token keyword">new</span> ConsoleLogger1
    cons<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&quot;warn:file not found&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>warn:file not found
</code></pre></div><p>示例二：继承多个trait</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">trait</span> Logger1<span class="token punctuation">{</span>
  <span class="token keyword">def</span> log<span class="token punctuation">(</span>msg<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">trait</span> Send<span class="token punctuation">{</span>
  <span class="token keyword">def</span> send<span class="token punctuation">(</span>msg<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> ConsoleLogger1 <span class="token keyword">extends</span> Logger1 <span class="token keyword">with</span> Send <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> log<span class="token punctuation">(</span>msg<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> send<span class="token punctuation">(</span>msg<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> cons<span class="token operator">=</span><span class="token keyword">new</span> ConsoleLogger1
    cons<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&quot;warn:file not found&quot;</span><span class="token punctuation">)</span>
    cons<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">&quot;hello scala&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>warn:file not found
hello scala
</code></pre></div><h4 id="定义具体的方法"><a href="#定义具体的方法" class="header-anchor">#</a> 定义具体的方法</h4> <p>和类一样，trait中还可以定义具体的方法。</p> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">trait</span> Logger1<span class="token punctuation">{</span>
  <span class="token comment">//具体的方法</span>
  <span class="token keyword">def</span> log<span class="token punctuation">(</span>msg<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">=</span>println<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> Add <span class="token keyword">extends</span> Logger1<span class="token punctuation">{</span>
  <span class="token keyword">def</span> add<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span>log<span class="token punctuation">(</span><span class="token string">&quot;添加用户&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> ad<span class="token operator">=</span><span class="token keyword">new</span> Add
    ad<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>添加用户
</code></pre></div><h4 id="定义具体方法和抽象方法"><a href="#定义具体方法和抽象方法" class="header-anchor">#</a> 定义具体方法和抽象方法</h4> <p>在trait中，可以混合使用具体方法和抽象方法</p> <p>使用具体方法依赖于抽象方法，而抽象方法可以放到继承trait的子类中实现，这种设计方式也称为<strong>模板模式</strong></p> <p>示例</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">trait</span> Logger3<span class="token punctuation">{</span>
  <span class="token keyword">def</span> log<span class="token punctuation">(</span>msg<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span>
  <span class="token keyword">def</span> INFO<span class="token punctuation">(</span>info<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">=</span>log<span class="token punctuation">(</span><span class="token string">&quot;INFO&quot;</span><span class="token operator">+</span>info<span class="token punctuation">)</span>
  <span class="token keyword">def</span> WARN<span class="token punctuation">(</span>warn<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">=</span>log<span class="token punctuation">(</span><span class="token string">&quot;WARN&quot;</span><span class="token operator">+</span>warn<span class="token punctuation">)</span>
  <span class="token keyword">def</span> ERROR<span class="token punctuation">(</span>error<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">=</span>log<span class="token punctuation">(</span><span class="token string">&quot;ERROR&quot;</span><span class="token operator">+</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> PrintLog <span class="token keyword">extends</span> Logger3<span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> log<span class="token punctuation">(</span>msg<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> log1<span class="token operator">=</span><span class="token keyword">new</span> PrintLog
    log1<span class="token punctuation">.</span>INFO<span class="token punctuation">(</span><span class="token string">&quot;这是一条INFO级别信息&quot;</span><span class="token punctuation">)</span>
    log1<span class="token punctuation">.</span>WARN<span class="token punctuation">(</span><span class="token string">&quot;这是一条WARN级别信息&quot;</span><span class="token punctuation">)</span>
    log1<span class="token punctuation">.</span>ERROR<span class="token punctuation">(</span><span class="token string">&quot;这是一条ERROR级别信息&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>INFO这是一条INFO级别信息
WARN这是一条WARN级别信息
ERROR这是一条ERROR级别信息
</code></pre></div><h4 id="定义具体字段和抽象字段"><a href="#定义具体字段和抽象字段" class="header-anchor">#</a> 定义具体字段和抽象字段</h4> <p>在trait中可以定义具体字段和抽象字段，继承trait的子类自动拥有trait中定义的字段，字段直接被添加到子类中。</p> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">trait</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">val</span> name<span class="token operator">:</span><span class="token builtin">String</span>
  <span class="token keyword">val</span> address<span class="token operator">:</span><span class="token builtin">String</span><span class="token operator">=</span><span class="token string">&quot;China&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> Student1 <span class="token keyword">extends</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">val</span> name<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;krystal&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> s1<span class="token operator">:</span>Student1<span class="token operator">=</span><span class="token keyword">new</span> Student1
    println<span class="token punctuation">(</span>s<span class="token string">&quot;${s1.name} lives in ${s1.address}&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>krystal lives in China
</code></pre></div><h4 id="实例对象混入trait"><a href="#实例对象混入trait" class="header-anchor">#</a> 实例对象混入trait</h4> <ol><li>trait还可以混入到实例对象中，给对象实例添加额外的行为</li> <li>只有混入了trait的对象才具有trait中的方法，其他的该类对象不具有trait中的行为</li> <li>使用with将trait混入到实例对象中</li> <li>将trait混入对象时，不要自己指定类型，使用自动推导，即不能写成该形式：val s1:Student=...</li></ol> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">trait</span> Person<span class="token punctuation">{</span>
  <span class="token keyword">val</span> address<span class="token operator">:</span><span class="token builtin">String</span><span class="token operator">=</span><span class="token string">&quot;China&quot;</span>
  <span class="token keyword">def</span> log<span class="token punctuation">(</span>msg<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">=</span>println<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> Student1<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用with关键字直接将特质混入到对象中</span>
    <span class="token keyword">val</span> s1<span class="token operator">=</span><span class="token keyword">new</span> Student1 <span class="token keyword">with</span> Person <span class="token comment">//不能写成val s1:Student=new Student1 with Person</span>
    println<span class="token punctuation">(</span>s<span class="token string">&quot;krystal lives in ${s1.address}&quot;</span><span class="token punctuation">)</span>
    s1<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&quot;你好&quot;</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>s1<span class="token punctuation">.</span>getClass<span class="token punctuation">)</span>

    <span class="token keyword">val</span> s2<span class="token operator">:</span>Student1<span class="token operator">=</span><span class="token keyword">new</span> Student1
    println<span class="token punctuation">(</span>s2<span class="token punctuation">.</span>getClass<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>krystal lives in China
你好
class Test$$anon$1
class Student1
</code></pre></div><h2 id="scala模式匹配和样例类"><a href="#scala模式匹配和样例类" class="header-anchor">#</a> scala模式匹配和样例类</h2> <p>scala有一个十分强大的模式匹配机制，可以应用到很多场合。并且scala还提供了样例类，对模式匹配进行了优化，可以快速进行匹配。</p> <p>应用场合：</p> <ol><li>java  switch  case</li> <li>switch语句</li> <li>类型查询</li> <li>以及快速获取数据</li></ol> <h4 id="匹配字符串"><a href="#匹配字符串" class="header-anchor">#</a> 匹配字符串</h4> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Random

<span class="token keyword">object</span> Test <span class="token keyword">extends</span> App<span class="token punctuation">{</span>
  <span class="token keyword">val</span> arr<span class="token operator">=</span>Array<span class="token punctuation">(</span><span class="token string">&quot;hadoop&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;zookeeper&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;flume&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;spark&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> name<span class="token operator">=</span>arr<span class="token punctuation">(</span>Random<span class="token punctuation">.</span>nextInt<span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>
  name <span class="token keyword">match</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;hadoop&quot;</span> <span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span><span class="token string">&quot;This is Hadoop&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token string">&quot;zookeeper&quot;</span> <span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span><span class="token string">&quot;This is zookeeper&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span><span class="token string">&quot;I don't know who you are&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>说明：</p> <ol><li>Random.nextInt()用于生成随机数</li> <li>case &quot;hadoop&quot; =&gt;println(&quot;This is Hadoop&quot;)表示name如果是&quot;hadoop&quot;,则执行println(&quot;This is Hadoop&quot;)</li> <li>case _表示，如果前面的case都不满足，则执行...</li></ol> <h4 id="匹配类型"><a href="#匹配类型" class="header-anchor">#</a> 匹配类型</h4> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Random

<span class="token keyword">object</span> Test <span class="token keyword">extends</span> App<span class="token punctuation">{</span>
  <span class="token keyword">val</span> arr<span class="token operator">=</span>Array<span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3.5</span><span class="token punctuation">,</span>Test<span class="token punctuation">)</span>
  <span class="token keyword">val</span> valueA<span class="token operator">=</span>arr<span class="token punctuation">(</span>Random<span class="token punctuation">.</span>nextInt<span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>

  valueA <span class="token keyword">match</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> x<span class="token operator">:</span><span class="token builtin">Int</span>                <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Int=&gt;&quot;</span><span class="token operator">+</span>x<span class="token punctuation">)</span>
    <span class="token keyword">case</span> y<span class="token operator">:</span><span class="token builtin">Double</span> <span class="token keyword">if</span><span class="token punctuation">(</span>y<span class="token operator">&gt;=</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Double=&gt;&quot;</span><span class="token operator">+</span>y<span class="token punctuation">)</span>
    <span class="token keyword">case</span> z<span class="token operator">:</span><span class="token builtin">String</span>             <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;String=&gt;&quot;</span><span class="token operator">+</span>z<span class="token punctuation">)</span>
    <span class="token keyword">case</span> _                    <span class="token keyword">=&gt;</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> Exception<span class="token punctuation">(</span><span class="token string">&quot;not match exception&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>说明：</p> <ol><li>case x:Int一行表示，如果valueA是Int类型，则将valueA赋值给x,然后执行语句println(&quot;Int=&gt;&quot;+x)</li> <li>case y:Double if(y&gt;=0)一行表示，如果valueA是Double类型，则将valueA赋值给y,然后判断y是否&gt;=0,如果是，则执行语句println(&quot;Double=&gt;&quot;+y)</li></ol> <h4 id="匹配数组"><a href="#匹配数组" class="header-anchor">#</a> 匹配数组</h4> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Random

<span class="token keyword">object</span> Test <span class="token keyword">extends</span> App<span class="token punctuation">{</span>
  <span class="token keyword">val</span> arr<span class="token operator">=</span>Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
  arr <span class="token keyword">match</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>         <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span>x<span class="token operator">+</span><span class="token string">&quot;---&quot;</span><span class="token operator">+</span>y<span class="token punctuation">)</span>
    <span class="token keyword">case</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>_<span class="token operator">*</span><span class="token punctuation">)</span>          <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;1...&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> Array<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>             <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Only 0&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> _                    <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;something else&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>3---5
</code></pre></div><p>说明：</p> <ol><li>case Array(1,x,y)表示如果arr的第一个元素是1，且arr刚好有3个元素，则将3、5分别赋值给x,y，然后执行println(x+&quot;---&quot;+y)</li> <li>case Array(1,_*)表示如果arr的第一个元素是1，且1后面还有一个或者多个元素，则执行...</li> <li>case匹配只会匹配一个，如果前面的case已经满足条件了，则不会再去判断后面case了，这就是运行结果只有3---5，没有1...的原因。</li></ol> <h4 id="匹配集合"><a href="#匹配集合" class="header-anchor">#</a> 匹配集合</h4> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> Test <span class="token keyword">extends</span> App<span class="token punctuation">{</span>
  <span class="token keyword">val</span> list1<span class="token operator">=</span>List<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>
  list1 <span class="token keyword">match</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">::</span>Nil <span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span><span class="token string">&quot;Only 0&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">::</span>tail <span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span><span class="token string">&quot;0...&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> x<span class="token operator">::</span>y<span class="token operator">::</span>z<span class="token operator">::</span>Nil <span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span>s<span class="token string">&quot;x:$x y:$y z:$z&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span><span class="token string">&quot;something else&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>0...
</code></pre></div><p>说明：</p> <ol><li>case 0::Nil的Nil表示已经到了末尾，表示0后面没有元素了，也就是list1只有0</li> <li>case 0::tail的tail表示List的后半部分，List可分为两部分，head是第一个元素，tail是第一个元素后的所有元素</li> <li>case x::y:😒::Nil表示List只有3个元素</li></ol> <h4 id="匹配元组"><a href="#匹配元组" class="header-anchor">#</a> 匹配元组</h4> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> Test <span class="token keyword">extends</span> App<span class="token punctuation">{</span>
  <span class="token keyword">val</span> tup<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>
  tup <span class="token keyword">match</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>    <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span>s<span class="token string">&quot;1,$x,$y&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>    <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span>s<span class="token string">&quot;$x,$y&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> _          <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;others...&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>others...
</code></pre></div><p>说明：</p> <ol><li>类比匹配数组即可</li></ol> <hr> <h4 id="样例类"><a href="#样例类" class="header-anchor">#</a> 样例类</h4> <p>样例类是一种特殊类，它可以用来快速定义一个用于<strong>保存数据</strong>的类（类似于Java POJO类），而且它会自动生成apply方法，允许我们快速地创建样例类实例对象。</p> <p>注：Java POJO类是一个有属性和get、set方法的类，但是没有业务逻辑。</p> <h5 id="样例类-2"><a href="#样例类-2" class="header-anchor">#</a> 样例类</h5> <p>语法结构：定义样例类</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">case</span> <span class="token keyword">class</span> 样例类名<span class="token punctuation">(</span>成员变量名<span class="token number">1</span><span class="token operator">:</span>类型<span class="token number">1</span><span class="token punctuation">,</span> 成员变量名<span class="token number">2</span><span class="token operator">:</span>类型<span class="token number">2</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre></div><p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">//定义样例类：</span>
<span class="token keyword">case</span> <span class="token keyword">class</span> casePerson<span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token keyword">class</span> caseStudent<span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token keyword">var</span> age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token comment">// 使用var指定成员变量是可变的</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//使用newc创建实例：</span>
    <span class="token keyword">val</span> p1<span class="token operator">=</span><span class="token keyword">new</span> casePerson<span class="token punctuation">(</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token comment">//使用类名直接创建实例：</span>
    <span class="token keyword">val</span> p2<span class="token operator">=</span>casePerson<span class="token punctuation">(</span><span class="token string">&quot;王五&quot;</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">)</span>
    <span class="token comment">//p1.name=&quot;zhangsan&quot;---&gt;报错，样例类默认的成员变量都是val的，除非手动指定变量为var类型</span>
    <span class="token comment">//p2.name=&quot;wangwu&quot;---&gt;报错</span>

    <span class="token keyword">val</span> p3<span class="token operator">=</span>caseStudent<span class="token punctuation">(</span><span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span>
    p3<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">&quot;lisi&quot;</span> <span class="token comment">//没报错</span>
    println<span class="token punctuation">(</span>s<span class="token string">&quot;${p3.name} ${p3.age}&quot;</span><span class="token punctuation">)</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>lisi 21
</code></pre></div><p>说明：</p> <ol><li>样例类默认的成员变量都是val的，除非手动指定变量为var类型</li></ol> <h5 id="样例对象"><a href="#样例对象" class="header-anchor">#</a> 样例对象</h5> <p>使用case object可以创建样例对象。样例对象是单例的，而且它<strong>没有主构造器</strong>。样例对象是可序列化的。</p> <p>语法格式：定义样例对象</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">case</span> <span class="token keyword">object</span> 样例对象名
</code></pre></div><p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">case</span> <span class="token keyword">class</span> SendMessage<span class="token punctuation">(</span>text<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span>

<span class="token comment">// 消息如果没有任何参数，就可以定义为样例对象</span>
<span class="token keyword">case</span> <span class="token keyword">object</span> startTask
<span class="token keyword">case</span> <span class="token keyword">object</span> PauseTask
<span class="token keyword">case</span> <span class="token keyword">object</span> StopTask
</code></pre></div><p>示例: 样例类和样例对象结合模式使用</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Random

<span class="token keyword">case</span> <span class="token keyword">class</span> SubmitTask<span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token keyword">class</span> HeartBeat<span class="token punctuation">(</span>time<span class="token operator">:</span><span class="token builtin">Long</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token keyword">object</span> CheckTimeOutTask

<span class="token keyword">case</span> <span class="token keyword">object</span> caseDemo <span class="token keyword">extends</span> App<span class="token punctuation">{</span>
  <span class="token keyword">val</span> arr<span class="token operator">=</span>Array<span class="token punctuation">(</span>CheckTimeOutTask<span class="token punctuation">,</span>HeartBeat<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>SubmitTask<span class="token punctuation">(</span><span class="token string">&quot;0001&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;task-0001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> a<span class="token operator">=</span>arr<span class="token punctuation">(</span>Random<span class="token punctuation">.</span>nextInt<span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>
  a <span class="token keyword">match</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> SubmitTask<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span>s<span class="token string">&quot;id:$x, name:$y&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> HeartBeat<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span>s<span class="token string">&quot;time: $x&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> CheckTimeOutTask <span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span><span class="token string">&quot;检查超时&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span><span class="token string">&quot;others...&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>说明：</p> <ol><li>case SubmitTask(x,y)=&gt;...表示如果是SubmitTask类型，则将&quot;0001&quot;,&quot;task-0001&quot;分别赋值给x,y，然后执行语句...</li> <li>其它case，类比即可。</li></ol> <h5 id="option类"><a href="#option类" class="header-anchor">#</a> Option类</h5> <p>Option类可以看成是特殊的样例类，用来表示可能存在或也可能不存在的值，Option类有2个子类</p> <p>一个是Some, Some包装了某个值,一个是None, None表示没有值。两个子类的大致源代码如下：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">final</span> <span class="token keyword">case</span> <span class="token keyword">class</span> Some<span class="token punctuation">[</span><span class="token operator">+</span>A<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">val</span> x <span class="token operator">:</span> A<span class="token punctuation">)</span> <span class="token keyword">extends</span> scala<span class="token punctuation">.</span>Option<span class="token punctuation">[</span>A<span class="token punctuation">]</span> <span class="token keyword">with</span> <span class="token namespace">scala<span class="token punctuation">.</span></span>Product <span class="token keyword">with</span> <span class="token namespace">scala<span class="token punctuation">.</span></span>Serializable <span class="token punctuation">{</span>
  <span class="token keyword">def</span> isEmpty <span class="token operator">:</span> scala<span class="token punctuation">.</span><span class="token builtin">Boolean</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* compiled code */</span> <span class="token punctuation">}</span>
  <span class="token keyword">def</span> get <span class="token operator">:</span> A <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* compiled code */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">case</span> <span class="token keyword">object</span> None <span class="token keyword">extends</span> scala<span class="token punctuation">.</span>Option<span class="token punctuation">[</span>scala<span class="token punctuation">.</span><span class="token builtin">Nothing</span><span class="token punctuation">]</span> <span class="token keyword">with</span> <span class="token namespace">scala<span class="token punctuation">.</span></span>Product <span class="token keyword">with</span> <span class="token namespace">scala<span class="token punctuation">.</span></span>Serializable <span class="token punctuation">{</span>
  <span class="token keyword">def</span> isEmpty <span class="token operator">:</span> scala<span class="token punctuation">.</span><span class="token builtin">Boolean</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* compiled code */</span> <span class="token punctuation">}</span>
  <span class="token keyword">def</span> get <span class="token operator">:</span> scala<span class="token punctuation">.</span><span class="token builtin">Nothing</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* compiled code */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/1568271621212.a4b196a3.png" alt="1568271621212"></p> <p><img src="/assets/img/1568271671144.a9f25570.png" alt="1568271671144"></p> <p>示例:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> map1<span class="token operator">=</span>Map<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token operator">-&gt;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token operator">-&gt;</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> value1<span class="token operator">:</span>Option<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token operator">=</span>map1<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span>

    <span class="token keyword">val</span> v1<span class="token operator">=</span>value1 <span class="token keyword">match</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> Some<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token keyword">=&gt;</span>i
      <span class="token keyword">case</span> None <span class="token keyword">=&gt;</span><span class="token number">0</span>
    <span class="token punctuation">}</span>
    println<span class="token punctuation">(</span>v1<span class="token punctuation">)</span>

    <span class="token comment">//更好的方式：</span>
    <span class="token keyword">val</span> v2<span class="token operator">=</span>map1<span class="token punctuation">.</span>getOrElse<span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>v2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>2
0
</code></pre></div><p>说明：</p> <ol><li>map1.get(&quot;b&quot;)是获得键为b的键值</li> <li>value1可能是有值也可能没值，由map1.get()中的键决定。如果有值就用Some类型来接收值，没有值就是用None类型。</li> <li>Option/Some/None都是样例类</li> <li>case Some(i)=&gt;i表示 如果value1的类型是Some类型(有值），则将value1的值赋给i，然后执行 i</li> <li>case Some(i)=&gt;i表示 如果value1的类型是None类型（无值），然后执行 0</li> <li>匹配的值最终赋给vl</li></ol> <h5 id="偏函数"><a href="#偏函数" class="header-anchor">#</a> 偏函数</h5> <p>被包在花括号内==没有match的一组case语句==是一个偏函数，它是PartialFunction[A, B]类的一个实例，</p> <ul><li>A代表输入参数类型</li> <li>B代表返回结果类型</li> <li>可以理解为：偏函数是一个参数和一个返回值的函数。</li></ul> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> Test <span class="token keyword">extends</span> App<span class="token punctuation">{</span>
  <span class="token comment">//func1是一个输入参数为Int类型，返回值为String类型的偏函数</span>
  <span class="token keyword">val</span> func1<span class="token operator">:</span>PartialFunction<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;一&quot;</span>
    <span class="token keyword">case</span> <span class="token number">2</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;二&quot;</span>
    <span class="token keyword">case</span> <span class="token number">3</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;三&quot;</span>
    <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token string">&quot;其他&quot;</span>
  <span class="token punctuation">}</span>
  println<span class="token punctuation">(</span>func1<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">val</span> list1<span class="token operator">=</span>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>
  <span class="token comment">//使用偏函数来执行filter过滤操作，filter编程原本是这样写的list1.filter(x =&gt; x &gt;3)</span>
  <span class="token keyword">val</span> res<span class="token operator">=</span>list1<span class="token punctuation">.</span>filter<span class="token punctuation">{</span>
    <span class="token keyword">case</span> x <span class="token keyword">if</span> x<span class="token operator">&gt;</span><span class="token number">3</span> <span class="token keyword">=&gt;</span><span class="token boolean">true</span>
    <span class="token keyword">case</span> _<span class="token keyword">=&gt;</span><span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  println<span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>二
List(4, 5, 6)
</code></pre></div><p>说明：</p> <ol><li>PartialFunction[Int,String]={
case 1 =&gt; &quot;一&quot;
case 2 =&gt; &quot;二&quot;
case 3 =&gt; &quot;三&quot;
case _ =&gt; &quot;其他&quot;
}这是一个偏函数，是func1的类型</li> <li></li></ol> <h2 id="scala异常处理"><a href="#scala异常处理" class="header-anchor">#</a> scala异常处理</h2> <h4 id="异常场景"><a href="#异常场景" class="header-anchor">#</a> 异常场景</h4> <p>来看看下面一段代码</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> n<span class="token operator">=</span><span class="token number">10</span><span class="token operator">/</span><span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果：</p> <div class="language-scala extra-class"><pre class="language-scala"><code>Exception in thread <span class="token string">&quot;main&quot;</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ArithmeticException<span class="token operator">:</span> <span class="token operator">/</span> by zero
at Test$<span class="token punctuation">.</span>main<span class="token punctuation">(</span>Customer<span class="token punctuation">.</span>scala<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span>
at Test<span class="token punctuation">.</span>main<span class="token punctuation">(</span>Customer<span class="token punctuation">.</span>scala<span class="token punctuation">)</span>
</code></pre></div><p>执行程序，可以看到scala抛出了异常，说明程序出现错误后就终止了。那怎么解决该问题呢？</p> <h4 id="捕获异常"><a href="#捕获异常" class="header-anchor">#</a> 捕获异常</h4> <p>在scala中，可以使用异常处理来解决这个问题。在Scala里，借用了模式匹配的思想来做异常的匹配</p> <p>捕获异常的语法格式：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// 代码</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> ex<span class="token operator">:</span>异常类型<span class="token number">1</span> <span class="token keyword">=&gt;</span> <span class="token comment">// 代码</span>
    <span class="token keyword">case</span> ex<span class="token operator">:</span>异常类型<span class="token number">2</span> <span class="token keyword">=&gt;</span> <span class="token comment">// 代码</span>
<span class="token punctuation">}</span>
<span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token comment">// 代码</span>
<span class="token punctuation">}</span>

</code></pre></div><p>说明：</p> <ol><li>try中的代码是我们编写的业务处理代码</li> <li>在catch中表示当出现某个异常时，需要执行的代码</li> <li>在finally中，是不管是否出现异常都会执行的代码</li></ol> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span><span class="token punctuation">{</span>
      <span class="token keyword">val</span> n<span class="token operator">=</span><span class="token number">10</span><span class="token operator">/</span><span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> ex1<span class="token operator">:</span> Exception<span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span>ex1<span class="token punctuation">.</span>getMessage<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
      println<span class="token punctuation">(</span><span class="token string">&quot;我始终都会被执行&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token operator">/</span> by zero
我始终都会被执行
</code></pre></div><h4 id="抛出异常"><a href="#抛出异常" class="header-anchor">#</a> 抛出异常</h4> <p>我们也可以在一个方法中，抛出异常。语法格式和Java类似，使用throw new Exception...</p> <p>示例：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> Exception<span class="token punctuation">(</span><span class="token string">&quot;这是一个异常&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language-scala extra-class"><pre class="language-scala"><code>Exception in thread <span class="token string">&quot;main&quot;</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Exception<span class="token operator">:</span> 这是一个异常
	at Test$<span class="token punctuation">.</span>main<span class="token punctuation">(</span>Customer<span class="token punctuation">.</span>scala<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span>
	at Test<span class="token punctuation">.</span>main<span class="token punctuation">(</span>Customer<span class="token punctuation">.</span>scala<span class="token punctuation">)</span>
</code></pre></div><h2 id="scala提取器-extractor"><a href="#scala提取器-extractor" class="header-anchor">#</a> scala提取器(Extractor)</h2> <p>提取器是从传递给它的对象中提取出构造该对象的参数。(回想样例类进行模式匹配提取参数)</p> <p>scala 提取器是一个带有unapply方法的对象。unapply方法算是apply方法的反向操作</p> <p>unapply接受一个对象，然后从对象中提取值，提取的值通常是用来构造该对象的值。</p> <p><img src="/assets/img/1552639637165.2ab0f718.png" alt="1552639637165"></p> <p><img src="/assets/img/1552639674932.1692d8d2.png" alt="1552639674932"></p> <p>示例:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Student<span class="token punctuation">{</span>
  <span class="token keyword">var</span> name<span class="token operator">:</span><span class="token builtin">String</span><span class="token operator">=</span>_
  <span class="token keyword">var</span> age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token operator">=</span>_
  <span class="token comment">//辅助构造器1：</span>
  <span class="token keyword">def</span> <span class="token keyword">this</span><span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age
  <span class="token punctuation">}</span>
  <span class="token comment">//辅助构造器2：</span>
  <span class="token keyword">def</span> <span class="token keyword">this</span><span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">object</span> Student<span class="token punctuation">{</span>
  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> Student <span class="token operator">=</span> <span class="token keyword">new</span> Student<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> Student <span class="token operator">=</span> <span class="token keyword">new</span> Student<span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span>
  <span class="token comment">//实现提取器：</span>
  <span class="token keyword">def</span> unapply<span class="token punctuation">(</span>arg<span class="token operator">:</span> Student<span class="token punctuation">)</span><span class="token operator">:</span> Option<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> Some<span class="token punctuation">(</span>arg<span class="token punctuation">.</span>name<span class="token punctuation">,</span>arg<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>

    <span class="token comment">//正常new一个实例</span>
    <span class="token keyword">val</span> kk<span class="token operator">=</span><span class="token keyword">new</span> Student<span class="token punctuation">(</span><span class="token string">&quot;krystal&quot;</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>kk<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token comment">//类名创建一个实例</span>
    <span class="token keyword">val</span> kk2<span class="token operator">=</span>Student<span class="token punctuation">(</span><span class="token string">&quot;krystal2&quot;</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>kk2<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

    <span class="token keyword">val</span> lisi<span class="token operator">=</span>Student<span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span>
    lisi <span class="token keyword">match</span><span class="token punctuation">{</span>
      <span class="token keyword">case</span> Student<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token keyword">=&gt;</span>println<span class="token punctuation">(</span>s<span class="token string">&quot;name:$x  age:$y&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language-scala extra-class"><pre class="language-scala"><code>krystal
krystal2
name<span class="token operator">:</span>lisi  age<span class="token operator">:</span><span class="token number">30</span>
</code></pre></div><p>说明：</p> <ol><li>执行lisi match{
case Student(x,y)=&gt;println(s&quot;name:$x  age:$y&quot;)
}时，</li> <li>首先会调用伴生对象的unapply方法，同时把lisi对象传到该unapply方法，解析出name和age,然后构造一个Some,最后将name赋给x,age赋给y,然后执行println(s&quot;name:$x  age:$y&quot;)</li></ol> <h2 id="scala泛型"><a href="#scala泛型" class="header-anchor">#</a> scala泛型</h2> <p>scala和Java一样，类和特质、方法都可以支持泛型。在scala中，使用方括号来定义类型参数</p> <div class="language-scala extra-class"><pre class="language-scala"><code>scala<span class="token operator">&gt;</span> <span class="token keyword">val</span> list1<span class="token operator">:</span>List<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span>
list1<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="定义一个泛型方法"><a href="#定义一个泛型方法" class="header-anchor">#</a> 定义一个泛型方法</h4> <p>示例：不考虑泛型的支持</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> getMiddle<span class="token punctuation">(</span>arr<span class="token operator">:</span>Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">=</span>arr<span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> arr1<span class="token operator">=</span>Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>getMiddle<span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>3
</code></pre></div><p>示例：考虑泛型的支持</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token comment">//使用泛型：</span>
  <span class="token keyword">def</span> getMiddle<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token punctuation">(</span>arr<span class="token operator">:</span>Array<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">{</span>arr<span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> arr1<span class="token operator">=</span>Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> arr2<span class="token operator">=</span>Array<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>getMiddle<span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>getMiddle<span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">//简写方式：</span>
    println<span class="token punctuation">(</span>getMiddle<span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>getMiddle<span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>3
c
3
c
</code></pre></div><h4 id="定义一个泛型类"><a href="#定义一个泛型类" class="header-anchor">#</a> 定义一个泛型类</h4> <p>定义一个Pair类包含2个类型不固定的泛型</p> <p>示例:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// 类名后面的方括号，就表示这个类可以使用两个类型、分别是T和S</span>
<span class="token comment">// 这个名字可以任意取</span>
<span class="token keyword">class</span> Pair<span class="token punctuation">[</span>T<span class="token punctuation">,</span>S<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">val</span> f1<span class="token operator">:</span>T<span class="token punctuation">,</span><span class="token keyword">val</span> f2<span class="token operator">:</span>S<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">case</span> <span class="token keyword">class</span> People<span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token keyword">var</span> age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
 <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token keyword">val</span> p1<span class="token operator">=</span><span class="token keyword">new</span> Pair<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
   <span class="token keyword">val</span> p2<span class="token operator">=</span><span class="token keyword">new</span> Pair<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1997-02-16&quot;</span><span class="token punctuation">)</span>
   <span class="token keyword">val</span> p3<span class="token operator">=</span><span class="token keyword">new</span> Pair<span class="token punctuation">[</span>People<span class="token punctuation">,</span>People<span class="token punctuation">]</span><span class="token punctuation">(</span>People<span class="token punctuation">(</span><span class="token string">&quot;jimmy&quot;</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">,</span>People<span class="token punctuation">(</span><span class="token string">&quot;krystal&quot;</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="上下界"><a href="#上下界" class="header-anchor">#</a> 上下界</h4> <p>在指定泛型类型时，有时需要界定泛型类型的范围，而不是接收任意类型。比如，要求某个泛型类型，必须是某个类的子类，这样在程序中就可以放心的调用父类的方法，程序才能正常的使用与运行.</p> <p>scala的上下边界特性允许泛型类型是某个类的子类，或者是某个类的父类</p> <p>参数U &gt;: 类型T  这是类型下界的定义，也就是U必须是类型T的父类或者是自己本身。</p> <p>参数U &lt;: 类型T  这是类型上界的定义，也就是U必须是类型T的子类或者是自己本身。</p> <h6 id="示例1-上界"><a href="#示例1-上界" class="header-anchor">#</a> 示例1：上界</h6> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Pair<span class="token punctuation">[</span>T<span class="token operator">&lt;</span><span class="token operator">:</span>Person<span class="token punctuation">,</span>S<span class="token operator">&lt;</span><span class="token operator">:</span>Person<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">val</span> first<span class="token operator">:</span>T<span class="token punctuation">,</span><span class="token keyword">val</span> second<span class="token operator">:</span>S<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">def</span> chat<span class="token punctuation">(</span>msg<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">=</span>println<span class="token punctuation">(</span>s<span class="token string">&quot;${first.name}对${second.name}说: $msg&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> Person<span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token keyword">var</span> age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> Student<span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Person<span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//Pair的构造方法的参数既可以是Person类型，也可以是Student类型</span>
    <span class="token keyword">val</span> p1<span class="token operator">=</span><span class="token keyword">new</span> Pair<span class="token punctuation">[</span>Person<span class="token punctuation">,</span>Student<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">new</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Jimmy&quot;</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">new</span> Student<span class="token punctuation">(</span><span class="token string">&quot;krystal&quot;</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    p1<span class="token punctuation">.</span>chat<span class="token punctuation">(</span><span class="token string">&quot;I love you&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>Jimmy对krystal说: I love you
</code></pre></div><h6 id="示例2-上下界结合"><a href="#示例2-上下界结合" class="header-anchor">#</a> 示例2：上下界结合</h6> <p><img src="/assets/img/1552657709922.3f0b7d9f.png" alt="1552657709922"></p> <p>需求：控制Person只能和Person、Policeman聊天，但是不能和Superman聊天。</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Pair<span class="token punctuation">[</span>T<span class="token operator">&lt;</span><span class="token operator">:</span>Person<span class="token punctuation">,</span>S <span class="token operator">&gt;</span><span class="token operator">:</span> Policeman <span class="token operator">&lt;</span><span class="token operator">:</span>Person<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">val</span> first<span class="token operator">:</span>T<span class="token punctuation">,</span><span class="token keyword">val</span> second<span class="token operator">:</span>S<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">def</span> chat<span class="token punctuation">(</span>msg<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">=</span>println<span class="token punctuation">(</span>s<span class="token string">&quot;${first.name}对${second.name}说: $msg&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> Person<span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span><span class="token keyword">var</span> age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> Policeman<span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Person<span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span>
<span class="token keyword">class</span> Superman<span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Policeman<span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span>

<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> p1<span class="token operator">=</span><span class="token keyword">new</span> Pair<span class="token punctuation">[</span>Person<span class="token punctuation">,</span>Person<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">new</span> Person<span class="token punctuation">(</span><span class="token string">&quot;lufei&quot;</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">new</span> Person<span class="token punctuation">(</span><span class="token string">&quot;nvdi&quot;</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    p1<span class="token punctuation">.</span>chat<span class="token punctuation">(</span><span class="token string">&quot;我爱你&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> p2<span class="token operator">=</span><span class="token keyword">new</span> Pair<span class="token punctuation">[</span>Person<span class="token punctuation">,</span>Policeman<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">new</span> Person<span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">new</span> Policeman<span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    p2<span class="token punctuation">.</span>chat<span class="token punctuation">(</span><span class="token string">&quot;你好&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">//val p3=new Pair[Person,Superman](new Person(&quot;zuolong&quot;,21),new Superman(&quot;sanji&quot;,25))--&gt;报错</span>
    <span class="token comment">//p3.chat(&quot;我迷路了&quot;)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为:</p> <div class="language- extra-class"><pre class="language-text"><code>lufei对nvdi说: 我爱你
lisi对zhangsan说: 你好
</code></pre></div><h4 id="scala协变、逆变、非变"><a href="#scala协变、逆变、非变" class="header-anchor">#</a> scala协变、逆变、非变</h4> <p>观察下面代码块1，思考一个类型转换的问题：从val p1 = new Pair(&quot;hello&quot;)可以知道，p1的类型是Pair(String),那么将p1赋给类型为Pair(AnyRef)的p2?</p> <p>答案是不行的，会报错。虽然说String类型是AnyRef的子类型，但是不代表Pair(String)是Pair(AnyRef)的子类型，所以不能将Pair(String)类型转为Pair(AnyRef)类型。</p> <p>代码块1：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Pair<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">(</span>a<span class="token operator">:</span>T<span class="token punctuation">)</span>

<span class="token keyword">object</span> Pair <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> Pair<span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// 编译报错，无法将p1转换为p2</span>
    <span class="token keyword">val</span> p2<span class="token operator">:</span>Pair<span class="token punctuation">[</span><span class="token builtin">AnyRef</span><span class="token punctuation">]</span> <span class="token operator">=</span> p1

    println<span class="token punctuation">(</span>p2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>那怎么解决这个问题？--&gt;使用协变。</p> <h6 id="协变"><a href="#协变" class="header-anchor">#</a> 协变</h6> <p>将上面代码块1中的class Pair[T]替换成class Pair[+T]：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Pair<span class="token punctuation">[</span><span class="token operator">+</span>T<span class="token punctuation">]</span>，这种情况是协变。类型B是A的子类型，Pair<span class="token punctuation">[</span>B<span class="token punctuation">]</span>可以认为是Pair<span class="token punctuation">[</span>A<span class="token punctuation">]</span>的子类型。这种情况，参数化类型的方向和类型的方向是一致的。
</code></pre></div><h6 id="逆变"><a href="#逆变" class="header-anchor">#</a> 逆变</h6> <p>将上面代码块1中的class Pair[T]替换成class Pair[-T]：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Pair<span class="token punctuation">[</span><span class="token operator">-</span>T<span class="token punctuation">]</span>，这种情况是逆变。类型B是A的子类型，Pair<span class="token punctuation">[</span>A<span class="token punctuation">]</span>反过来可以认为是Pair<span class="token punctuation">[</span>B<span class="token punctuation">]</span>的子类型。这种情况，参数化类型的方向和类型的方向是相反的。
</code></pre></div><h6 id="非变"><a href="#非变" class="header-anchor">#</a> 非变</h6> <p>上面的代码块1使用的就是非变：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Pair<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>，这种情况就是非变（默认），类型B是A的子类型，Pair<span class="token punctuation">[</span>A<span class="token punctuation">]</span>和Pair<span class="token punctuation">[</span>B<span class="token punctuation">]</span>没有任何从属关系，这种情况和Java是一样的。
</code></pre></div><p><img src="/assets/img/1558064807949.38c61d6c.png" alt="1558064807949"></p> <h6 id="示例-3"><a href="#示例-3" class="header-anchor">#</a> 示例:</h6> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Father
<span class="token keyword">class</span> Son <span class="token keyword">extends</span> Father

<span class="token keyword">class</span> Temp1<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token punctuation">(</span>title<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> Temp2<span class="token punctuation">[</span><span class="token operator">+</span>A<span class="token punctuation">]</span><span class="token punctuation">(</span>title<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> Temp3<span class="token punctuation">[</span><span class="token operator">-</span>A<span class="token punctuation">]</span><span class="token punctuation">(</span>title<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span>

<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> a<span class="token operator">=</span><span class="token keyword">new</span> Son<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> b<span class="token operator">:</span>Father<span class="token operator">=</span>a  <span class="token comment">//没报错，证明Son是Father的子类，可以转换</span>

    <span class="token comment">//非变：</span>
    <span class="token keyword">val</span> t1<span class="token operator">:</span>Temp1<span class="token punctuation">[</span>Son<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">new</span> Temp1<span class="token punctuation">[</span>Son<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">&quot;测试&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">//val tt1:Temp1[Father]=t1--&gt;报错</span>

    <span class="token comment">//协变</span>
    <span class="token keyword">val</span> t2<span class="token operator">:</span>Temp2<span class="token punctuation">[</span>Son<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">new</span> Temp2<span class="token punctuation">[</span>Son<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">&quot;测试&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> tt2<span class="token operator">:</span>Temp2<span class="token punctuation">[</span>Father<span class="token punctuation">]</span><span class="token operator">=</span>t2

    <span class="token comment">//逆变</span>
    <span class="token keyword">val</span> t3<span class="token operator">:</span>Temp3<span class="token punctuation">[</span>Father<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">new</span> Temp3<span class="token punctuation">[</span>Father<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">&quot;测试&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> tt3<span class="token operator">:</span>Temp3<span class="token punctuation">[</span>Son<span class="token punctuation">]</span><span class="token operator">=</span>t3
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>总结:</p> <div class="language-scala extra-class"><pre class="language-scala"><code>C<span class="token punctuation">[</span><span class="token operator">+</span>T<span class="token punctuation">]</span>：如果A是B的子类，那么C<span class="token punctuation">[</span>A<span class="token punctuation">]</span>是C<span class="token punctuation">[</span>B<span class="token punctuation">]</span>的子类。
C<span class="token punctuation">[</span><span class="token operator">-</span>T<span class="token punctuation">]</span>：如果A是B的子类，那么C<span class="token punctuation">[</span>B<span class="token punctuation">]</span>是C<span class="token punctuation">[</span>A<span class="token punctuation">]</span>的子类。
C<span class="token punctuation">[</span>T<span class="token punctuation">]</span>： 无论A和B是什么关系，C<span class="token punctuation">[</span>A<span class="token punctuation">]</span>和C<span class="token punctuation">[</span>B<span class="token punctuation">]</span>没有从属关系。
</code></pre></div><h2 id="scala隐式转换和隐式参数"><a href="#scala隐式转换和隐式参数" class="header-anchor">#</a> scala隐式转换和隐式参数</h2> <h4 id="隐式转换"><a href="#隐式转换" class="header-anchor">#</a> 隐式转换</h4> <p>Scala提供的隐式转换和隐式参数功能，是非常有特色的功能。是Java等编程语言所没有的功能。它可以允许你手动指定，将某种类型的对象转换成其他类型的对象或者是给一个类增加方法。通过这些功能，可以实现非常强大、特殊的功能。</p> <p>隐式转换其核心就是定义一个使用 ==implicit== 关键字修饰的方法 实现把一个原始类转换成目标类，进而可以调用目标类中的方法</p> <h4 id="隐式参数"><a href="#隐式参数" class="header-anchor">#</a> 隐式参数</h4> <p>所谓的隐式参数，指的是在函数或者方法中，定义一个用implicit修饰的参数，
此时Scala会尝试找到一个指定类型的用implicit修饰的参数，即隐式值，并注入参数。</p> <p>所有的隐式转换和隐式参数必须定义在一个object中</p> <h4 id="案例演示"><a href="#案例演示" class="header-anchor">#</a> 案例演示</h4> <h5 id="案例一-让java-io-file类具备richfile类中的read方法"><a href="#案例一-让java-io-file类具备richfile类中的read方法" class="header-anchor">#</a> 案例一：让java.io.File类具备RichFile类中的read方法</h5> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>File
<span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Source

<span class="token keyword">class</span> RichFile<span class="token punctuation">(</span><span class="token keyword">val</span> f<span class="token operator">:</span>File<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">def</span> read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">String</span><span class="token operator">=</span><span class="token punctuation">{</span>
    Source<span class="token punctuation">.</span>fromFile<span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">.</span>mkString
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> MyPredef<span class="token punctuation">{</span>
  <span class="token keyword">implicit</span> <span class="token keyword">def</span> file2RichFile<span class="token punctuation">(</span>f<span class="token operator">:</span>File<span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">new</span> RichFile<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> f<span class="token operator">=</span><span class="token keyword">new</span> File<span class="token punctuation">(</span><span class="token string">&quot;F:\\test\\aa.txt&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">import</span> MyPredef<span class="token punctuation">.</span>file2RichFile 
    <span class="token keyword">val</span> data<span class="token operator">:</span><span class="token builtin">String</span><span class="token operator">=</span>f<span class="token punctuation">.</span>read
    println<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>说明：</p> <ol><li>mkString的作用是将一个集合转化为一个字符串</li> <li>import MyPredef.file2RichFile 如果将这行注释掉，会报错</li> <li></li></ol> <h5 id="案例二-超人变身"><a href="#案例二-超人变身" class="header-anchor">#</a> 案例二：超人变身</h5> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jimmy</span>

<span class="token keyword">class</span> Man<span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">def</span> fight1<span class="token operator">=</span>println<span class="token punctuation">(</span><span class="token string">&quot;打不过怪兽&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> SuperMan<span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">def</span> fight2<span class="token operator">=</span>println<span class="token punctuation">(</span><span class="token string">&quot;超人打怪兽&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> MySuper<span class="token punctuation">{</span>
  <span class="token keyword">implicit</span> <span class="token keyword">def</span> Man2Super<span class="token punctuation">(</span>m<span class="token operator">:</span>Man<span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">new</span> SuperMan<span class="token punctuation">(</span>m<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test<span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> m<span class="token operator">=</span><span class="token keyword">new</span> Man<span class="token punctuation">(</span><span class="token string">&quot;dijia&quot;</span><span class="token punctuation">)</span>
    m<span class="token punctuation">.</span>fight1

    println<span class="token punctuation">(</span><span class="token string">&quot;变身！！！！！！&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">import</span> MySuper<span class="token punctuation">.</span>Man2Super
    m<span class="token punctuation">.</span>fight2
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>打不过怪兽
变身！！！！！！
超人打怪兽
</code></pre></div><h5 id="案例三-一个类隐式转换成具有相同方法的多个类"><a href="#案例三-一个类隐式转换成具有相同方法的多个类" class="header-anchor">#</a> 案例三：一个类隐式转换成具有相同方法的多个类</h5> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Animal<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> Person1<span class="token punctuation">{</span>
  <span class="token keyword">def</span> readBook<span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">=</span>println<span class="token punctuation">(</span>s<span class="token string">&quot;在读书: $name&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> Person2<span class="token punctuation">{</span>
  <span class="token keyword">def</span> readBook<span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">=</span>println<span class="token punctuation">(</span>s<span class="token string">&quot;在看书: $name&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">def</span> Riding<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span>println<span class="token punctuation">(</span><span class="token string">&quot;在骑单车&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> MyUtils<span class="token punctuation">{</span>
  <span class="token keyword">implicit</span> <span class="token keyword">def</span> animaltoPerson1<span class="token punctuation">(</span>am<span class="token operator">:</span>Animal<span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">new</span> Person1
  <span class="token keyword">implicit</span> <span class="token keyword">def</span> animaltoPerson2<span class="token punctuation">(</span>am<span class="token operator">:</span>Animal<span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">new</span> Person2
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test1 <span class="token keyword">extends</span> App<span class="token punctuation">{</span>
  <span class="token keyword">val</span> am<span class="token operator">:</span>Animal<span class="token operator">=</span><span class="token keyword">new</span> Animal
  <span class="token keyword">import</span> MyUtils<span class="token punctuation">.</span>animaltoPerson1
  am<span class="token punctuation">.</span>readBook<span class="token punctuation">(</span><span class="token string">&quot;格列佛游记&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test2 <span class="token keyword">extends</span> App<span class="token punctuation">{</span>
  <span class="token keyword">val</span> am<span class="token operator">:</span>Animal<span class="token operator">=</span><span class="token keyword">new</span> Animal
  <span class="token keyword">import</span> MyUtils<span class="token punctuation">.</span>animaltoPerson2
  am<span class="token punctuation">.</span>readBook<span class="token punctuation">(</span><span class="token string">&quot;西游记&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test3 <span class="token keyword">extends</span> App<span class="token punctuation">{</span>
  <span class="token keyword">val</span> am<span class="token operator">:</span>Animal<span class="token operator">=</span><span class="token keyword">new</span> Animal
  <span class="token keyword">import</span> MyUtils<span class="token punctuation">.</span>_  <span class="token comment">//不能使用这种方式导入，下面容易出错</span>
  <span class="token comment">//am.readBook(&quot;西游记&quot;)--&gt;报错</span>
<span class="token punctuation">}</span>
</code></pre></div><p>三个object的运行结果分别为：</p> <div class="language- extra-class"><pre class="language-text"><code>在读书: 格列佛游记
在看书: 西游记
报错
</code></pre></div><p>说明：</p> <ol><li>import MyUtils._ 这种方式会导入所有的隐式转换函数，因为Person1和Person2都有readBook函数，所以这个方式会导致不知道选用哪个类的readBook，从而报错</li></ol> <h5 id="案例四-员工领取薪水"><a href="#案例四-员工领取薪水" class="header-anchor">#</a> 案例四：员工领取薪水</h5> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> Msg<span class="token punctuation">{</span>
  <span class="token comment">//在object中定义隐式值</span>
  <span class="token comment">//注意：同一类型的隐式值只允许出现一次，否则会报错</span>
  <span class="token keyword">implicit</span> <span class="token keyword">val</span> name<span class="token operator">=</span><span class="token string">&quot;zhangsan&quot;</span>
  <span class="token keyword">implicit</span> <span class="token keyword">val</span> salary<span class="token operator">=</span><span class="token number">10000.00</span>  <span class="token comment">//这个需要有小数位，否则后面会报错</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> Boss<span class="token punctuation">{</span>
  <span class="token keyword">def</span> callName<span class="token punctuation">(</span><span class="token keyword">implicit</span> name<span class="token operator">:</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">String</span><span class="token operator">=</span>name <span class="token operator">+</span><span class="token string">&quot; is coming. &quot;</span>
  <span class="token keyword">def</span> sendSalary<span class="token punctuation">(</span><span class="token keyword">implicit</span> salary<span class="token operator">:</span><span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">String</span><span class="token operator">=</span><span class="token string">&quot;This is your salary: &quot;</span><span class="token operator">+</span>salary
<span class="token punctuation">}</span>
<span class="token keyword">object</span> Test <span class="token keyword">extends</span> App<span class="token punctuation">{</span>
  <span class="token comment">//使用import导入定义好的隐式值，注意：必须先加载否则会报错</span>
  <span class="token keyword">import</span> Msg<span class="token punctuation">.</span>name
  <span class="token keyword">import</span> Msg<span class="token punctuation">.</span>salary
  <span class="token keyword">val</span> b1<span class="token operator">=</span><span class="token keyword">new</span> Boss
  println<span class="token punctuation">(</span>b1<span class="token punctuation">.</span>callName<span class="token operator">+</span>b1<span class="token punctuation">.</span>sendSalary<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>zhangsan is coming. This is your salary: 10000.0
</code></pre></div><p>说明：</p> <ol><li>在object中定义隐式值，但是同一类型的隐式值只允许出现一次，否则会报错</li> <li>隐式类型以及对应的值类型必须对应好，否则容易报错</li> <li>println(b1.callName+b1.sendSalary)这里使用callName和sendSalary方法都不需要传参数，是因为有了隐式参数</li> <li>调用带有隐式参数的方法时，只需导入方法参数对应类型的隐式参数即可。</li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/MaLunan/press/edit/dev-mln/docs/scala/scala.md" target="_blank" rel="noopener noreferrer">在GitHub 上编辑此页！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">1/19/2021, 1:41:59 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fdd7a502.js" defer></script><script src="/assets/js/16.375b747e.js" defer></script><script src="/assets/js/24.69816497.js" defer></script>
  </body>
</html>
